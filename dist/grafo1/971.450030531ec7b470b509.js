(self.webpackChunkgrafo1=self.webpackChunkgrafo1||[]).push([[971],{218:(x,E,o)=>{x.exports={graphlib:o(7759),layout:o(8090),debug:o(1544),util:{time:o(1824).time,notime:o(1824).notime},version:o(6854)}},6467:(x,E,o)=>{"use strict";var a=o(2712),_=o(3199);x.exports={run:function(c){var d,u="greedy"===c.graph().acyclicer?_(c,(d=c,function(f){return d.edge(f).weight})):function(c){var u=[],t={},d={};return a.forEach(c.nodes(),function f(l){a.has(d,l)||(d[l]=!0,t[l]=!0,a.forEach(c.outEdges(l),function(p){a.has(t,p.w)?u.push(p):f(p.w)}),delete t[l])}),u}(c);a.forEach(u,function(d){var f=c.edge(d);c.removeEdge(d),f.forwardName=d.name,f.reversed=!0,c.setEdge(d.w,d.v,f,a.uniqueId("rev"))})},undo:function(c){a.forEach(c.edges(),function(u){var t=c.edge(u);if(t.reversed){c.removeEdge(u);var d=t.forwardName;delete t.reversed,delete t.forwardName,c.setEdge(u.w,u.v,t,d)}})}}},9752:(x,E,o)=>{var a=o(2712),_=o(1824);function m(h,c,u,t,d,f){var p=d[c][f-1],y=_.addDummyNode(h,"border",{width:0,height:0,rank:f,borderType:c},u);d[c][f]=y,h.setParent(y,t),p&&h.setEdge(p,y,{weight:1})}x.exports=function(h){a.forEach(h.children(),function c(u){var t=h.children(u),d=h.node(u);if(t.length&&a.forEach(t,c),a.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var f=d.minRank,l=d.maxRank+1;f<l;++f)m(h,"borderLeft","_bl",u,d,f),m(h,"borderRight","_br",u,d,f)}})}},6232:(x,E,o)=>{"use strict";var a=o(2712);function m(f){a.forEach(f.nodes(),function(l){h(f.node(l))}),a.forEach(f.edges(),function(l){h(f.edge(l))})}function h(f){var l=f.width;f.width=f.height,f.height=l}function u(f){f.y=-f.y}function d(f){var l=f.x;f.x=f.y,f.y=l}x.exports={adjust:function(f){var l=f.graph().rankdir.toLowerCase();("lr"===l||"rl"===l)&&m(f)},undo:function(f){var l=f.graph().rankdir.toLowerCase();("bt"===l||"rl"===l)&&function(f){a.forEach(f.nodes(),function(l){u(f.node(l))}),a.forEach(f.edges(),function(l){var p=f.edge(l);a.forEach(p.points,u),a.has(p,"y")&&u(p)})}(f),("lr"===l||"rl"===l)&&(function(f){a.forEach(f.nodes(),function(l){d(f.node(l))}),a.forEach(f.edges(),function(l){var p=f.edge(l);a.forEach(p.points,d),a.has(p,"x")&&d(p)})}(f),m(f))}}},8190:x=>{function E(){var _={};_._next=_._prev=_,this._sentinel=_}function o(_){_._prev._next=_._next,_._next._prev=_._prev,delete _._next,delete _._prev}function a(_,v){if("_next"!==_&&"_prev"!==_)return v}x.exports=E,E.prototype.dequeue=function(){var _=this._sentinel,v=_._prev;if(v!==_)return o(v),v},E.prototype.enqueue=function(_){var v=this._sentinel;_._prev&&_._next&&o(_),_._next=v._next,v._next._prev=_,v._next=_,_._prev=v},E.prototype.toString=function(){for(var _=[],v=this._sentinel,m=v._prev;m!==v;)_.push(JSON.stringify(m,a)),m=m._prev;return"["+_.join(", ")+"]"}},1544:(x,E,o)=>{var a=o(2712),_=o(1824),v=o(7759).Graph;x.exports={debugOrdering:function(h){var c=_.buildLayerMatrix(h),u=new v({compound:!0,multigraph:!0}).setGraph({});return a.forEach(h.nodes(),function(t){u.setNode(t,{label:t}),u.setParent(t,"layer"+h.node(t).rank)}),a.forEach(h.edges(),function(t){u.setEdge(t.v,t.w,{},t.name)}),a.forEach(c,function(t,d){u.setNode("layer"+d,{rank:"same"}),a.reduce(t,function(l,p){return u.setEdge(l,p,{style:"invis"}),p})}),u}}},7759:(x,E,o)=>{var a;try{a=o(30)}catch(_){}a||(a=window.graphlib),x.exports=a},3199:(x,E,o)=>{var a=o(2712),_=o(7759).Graph,v=o(8190);x.exports=function(f,l){if(f.nodeCount()<=1)return[];var p=function(f,l){var p=new _,y=0,C=0;a.forEach(f.nodes(),function(A){p.setNode(A,{v:A,in:0,out:0})}),a.forEach(f.edges(),function(A){var O=p.edge(A.v,A.w)||0,k=l(A);p.setEdge(A.v,A.w,O+k),C=Math.max(C,p.node(A.v).out+=k),y=Math.max(y,p.node(A.w).in+=k)});var T=a.range(C+y+3).map(function(){return new v}),N=y+1;return a.forEach(p.nodes(),function(A){d(T,N,p.node(A))}),{graph:p,buckets:T,zeroIdx:N}}(f,l||m),y=function(f,l,p){for(var N,y=[],C=l[l.length-1],T=l[0];f.nodeCount();){for(;N=T.dequeue();)u(f,l,p,N);for(;N=C.dequeue();)u(f,l,p,N);if(f.nodeCount())for(var A=l.length-2;A>0;--A)if(N=l[A].dequeue()){y=y.concat(u(f,l,p,N,!0));break}}return y}(p.graph,p.buckets,p.zeroIdx);return a.flatten(a.map(y,function(C){return f.outEdges(C.v,C.w)}),!0)};var m=a.constant(1);function u(f,l,p,y,C){var T=C?[]:void 0;return a.forEach(f.inEdges(y.v),function(N){var A=f.edge(N),O=f.node(N.v);C&&T.push({v:N.v,w:N.w}),O.out-=A,d(l,p,O)}),a.forEach(f.outEdges(y.v),function(N){var A=f.edge(N),k=f.node(N.w);k.in-=A,d(l,p,k)}),f.removeNode(y.v),T}function d(f,l,p){p.out?p.in?f[p.out-p.in+l].enqueue(p):f[f.length-1].enqueue(p):f[0].enqueue(p)}},8090:(x,E,o)=>{"use strict";var a=o(2712),_=o(6467),v=o(8284),m=o(2445),h=o(1824).normalizeRanks,c=o(2375),u=o(1824).removeEmptyRanks,t=o(5970),d=o(9752),f=o(6232),l=o(1989),p=o(6685),y=o(1824),C=o(7759).Graph;x.exports=function(z,K){var rt=K&&K.debugTiming?y.time:y.notime;rt("layout",function(){var ut=rt("  buildLayoutGraph",function(){return function(z){var K=new C({multigraph:!0,compound:!0}),rt=pt(z.graph());return K.setGraph(a.merge({},k,lt(rt,O),a.pick(rt,L))),a.forEach(z.nodes(),function(ut){var ft=pt(z.node(ut));K.setNode(ut,a.defaults(lt(ft,J),Y)),K.setParent(ut,z.parent(ut))}),a.forEach(z.edges(),function(ut){var ft=pt(z.edge(ut));K.setEdge(ut,a.merge({},Q,lt(ft,V),a.pick(ft,I)))}),K}(z)});rt("  runLayout",function(){!function(z,K){K("    makeSpaceForEdgeLabels",function(){!function(z){var K=z.graph();K.ranksep/=2,a.forEach(z.edges(),function(rt){var ut=z.edge(rt);ut.minlen*=2,"c"!==ut.labelpos.toLowerCase()&&("TB"===K.rankdir||"BT"===K.rankdir?ut.width+=ut.labeloffset:ut.height+=ut.labeloffset)})}(z)}),K("    removeSelfEdges",function(){!function(z){a.forEach(z.edges(),function(K){if(K.v===K.w){var rt=z.node(K.v);rt.selfEdges||(rt.selfEdges=[]),rt.selfEdges.push({e:K,label:z.edge(K)}),z.removeEdge(K)}})}(z)}),K("    acyclic",function(){_.run(z)}),K("    nestingGraph.run",function(){t.run(z)}),K("    rank",function(){m(y.asNonCompoundGraph(z))}),K("    injectEdgeLabelProxies",function(){!function(z){a.forEach(z.edges(),function(K){var rt=z.edge(K);if(rt.width&&rt.height){var ut=z.node(K.v),ft=z.node(K.w);y.addDummyNode(z,"edge-proxy",{rank:(ft.rank-ut.rank)/2+ut.rank,e:K},"_ep")}})}(z)}),K("    removeEmptyRanks",function(){u(z)}),K("    nestingGraph.cleanup",function(){t.cleanup(z)}),K("    normalizeRanks",function(){h(z)}),K("    assignRankMinMax",function(){!function(z){var K=0;a.forEach(z.nodes(),function(rt){var ut=z.node(rt);ut.borderTop&&(ut.minRank=z.node(ut.borderTop).rank,ut.maxRank=z.node(ut.borderBottom).rank,K=a.max(K,ut.maxRank))}),z.graph().maxRank=K}(z)}),K("    removeEdgeLabelProxies",function(){!function(z){a.forEach(z.nodes(),function(K){var rt=z.node(K);"edge-proxy"===rt.dummy&&(z.edge(rt.e).labelRank=rt.rank,z.removeNode(K))})}(z)}),K("    normalize.run",function(){v.run(z)}),K("    parentDummyChains",function(){c(z)}),K("    addBorderSegments",function(){d(z)}),K("    order",function(){l(z)}),K("    insertSelfEdges",function(){!function(z){var K=y.buildLayerMatrix(z);a.forEach(K,function(rt){var ut=0;a.forEach(rt,function(ft,ht){var gt=z.node(ft);gt.order=ht+ut,a.forEach(gt.selfEdges,function(xt){y.addDummyNode(z,"selfedge",{width:xt.label.width,height:xt.label.height,rank:gt.rank,order:ht+ ++ut,e:xt.e,label:xt.label},"_se")}),delete gt.selfEdges})})}(z)}),K("    adjustCoordinateSystem",function(){f.adjust(z)}),K("    position",function(){p(z)}),K("    positionSelfEdges",function(){!function(z){a.forEach(z.nodes(),function(K){var rt=z.node(K);if("selfedge"===rt.dummy){var ut=z.node(rt.e.v),ft=ut.x+ut.width/2,ht=ut.y,gt=rt.x-ft,xt=ut.height/2;z.setEdge(rt.e,rt.label),z.removeNode(K),rt.label.points=[{x:ft+2*gt/3,y:ht-xt},{x:ft+5*gt/6,y:ht-xt},{x:ft+gt,y:ht},{x:ft+5*gt/6,y:ht+xt},{x:ft+2*gt/3,y:ht+xt}],rt.label.x=rt.x,rt.label.y=rt.y}})}(z)}),K("    removeBorderNodes",function(){!function(z){a.forEach(z.nodes(),function(K){if(z.children(K).length){var rt=z.node(K),ut=z.node(rt.borderTop),ft=z.node(rt.borderBottom),ht=z.node(a.last(rt.borderLeft)),gt=z.node(a.last(rt.borderRight));rt.width=Math.abs(gt.x-ht.x),rt.height=Math.abs(ft.y-ut.y),rt.x=ht.x+rt.width/2,rt.y=ut.y+rt.height/2}}),a.forEach(z.nodes(),function(K){"border"===z.node(K).dummy&&z.removeNode(K)})}(z)}),K("    normalize.undo",function(){v.undo(z)}),K("    fixupEdgeLabelCoords",function(){!function(z){a.forEach(z.edges(),function(K){var rt=z.edge(K);if(a.has(rt,"x"))switch(("l"===rt.labelpos||"r"===rt.labelpos)&&(rt.width-=rt.labeloffset),rt.labelpos){case"l":rt.x-=rt.width/2+rt.labeloffset;break;case"r":rt.x+=rt.width/2+rt.labeloffset}})}(z)}),K("    undoCoordinateSystem",function(){f.undo(z)}),K("    translateGraph",function(){!function(z){var K=Number.POSITIVE_INFINITY,rt=0,ut=Number.POSITIVE_INFINITY,ft=0,ht=z.graph(),gt=ht.marginx||0,xt=ht.marginy||0;function Ft(bt){var Ct=bt.x,mt=bt.y,Jt=bt.width,vt=bt.height;K=Math.min(K,Ct-Jt/2),rt=Math.max(rt,Ct+Jt/2),ut=Math.min(ut,mt-vt/2),ft=Math.max(ft,mt+vt/2)}a.forEach(z.nodes(),function(bt){Ft(z.node(bt))}),a.forEach(z.edges(),function(bt){var Ct=z.edge(bt);a.has(Ct,"x")&&Ft(Ct)}),K-=gt,ut-=xt,a.forEach(z.nodes(),function(bt){var Ct=z.node(bt);Ct.x-=K,Ct.y-=ut}),a.forEach(z.edges(),function(bt){var Ct=z.edge(bt);a.forEach(Ct.points,function(mt){mt.x-=K,mt.y-=ut}),a.has(Ct,"x")&&(Ct.x-=K),a.has(Ct,"y")&&(Ct.y-=ut)}),ht.width=rt-K+gt,ht.height=ft-ut+xt}(z)}),K("    assignNodeIntersects",function(){!function(z){a.forEach(z.edges(),function(K){var ht,gt,rt=z.edge(K),ut=z.node(K.v),ft=z.node(K.w);rt.points?(ht=rt.points[0],gt=rt.points[rt.points.length-1]):(rt.points=[],ht=ft,gt=ut),rt.points.unshift(y.intersectRect(ut,ht)),rt.points.push(y.intersectRect(ft,gt))})}(z)}),K("    reversePoints",function(){!function(z){a.forEach(z.edges(),function(K){var rt=z.edge(K);rt.reversed&&rt.points.reverse()})}(z)}),K("    acyclic.undo",function(){_.undo(z)})}(ut,rt)}),rt("  updateInputGraph",function(){!function(z,K){a.forEach(z.nodes(),function(rt){var ut=z.node(rt),ft=K.node(rt);ut&&(ut.x=ft.x,ut.y=ft.y,K.children(rt).length&&(ut.width=ft.width,ut.height=ft.height))}),a.forEach(z.edges(),function(rt){var ut=z.edge(rt),ft=K.edge(rt);ut.points=ft.points,a.has(ft,"x")&&(ut.x=ft.x,ut.y=ft.y)}),z.graph().width=K.graph().width,z.graph().height=K.graph().height}(z,ut)})})};var O=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L=["acyclicer","ranker","rankdir","align"],J=["width","height"],Y={width:0,height:0},V=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},I=["labelpos"];function lt(z,K){return a.mapValues(a.pick(z,K),Number)}function pt(z){var K={};return a.forEach(z,function(rt,ut){K[ut.toLowerCase()]=rt}),K}},2712:(x,E,o)=>{var a;try{a={cloneDeep:o(7524),constant:o(5654),defaults:o(6726),each:o(3718),filter:o(3834),find:o(8990),flatten:o(4694),forEach:o(4733),forIn:o(8577),has:o(2335),isUndefined:o(9569),last:o(7842),map:o(9718),mapValues:o(182),max:o(1334),merge:o(3912),min:o(1518),minBy:o(5353),now:o(765),pick:o(1133),range:o(1221),reduce:o(6101),sortBy:o(280),uniqueId:o(5927),values:o(3348),zipObject:o(1507)}}catch(_){}a||(a=window._),x.exports=a},5970:(x,E,o)=>{var a=o(2712),_=o(1824);function m(t,d,f,l,p,y,C){var T=t.children(C);if(T.length){var N=_.addBorderNode(t,"_bt"),A=_.addBorderNode(t,"_bb"),O=t.node(C);t.setParent(N,C),O.borderTop=N,t.setParent(A,C),O.borderBottom=A,a.forEach(T,function(k){m(t,d,f,l,p,y,k);var L=t.node(k),J=L.borderTop?L.borderTop:k,Y=L.borderBottom?L.borderBottom:k,V=L.borderTop?l:2*l,Q=J!==Y?1:p-y[C]+1;t.setEdge(N,J,{weight:V,minlen:Q,nestingEdge:!0}),t.setEdge(Y,A,{weight:V,minlen:Q,nestingEdge:!0})}),t.parent(C)||t.setEdge(d,N,{weight:0,minlen:p+y[C]})}else C!==d&&t.setEdge(d,C,{weight:0,minlen:f})}x.exports={run:function(t){var d=_.addDummyNode(t,"root",{},"_root"),f=function(t){var d={};function f(l,p){var y=t.children(l);y&&y.length&&a.forEach(y,function(C){f(C,p+1)}),d[l]=p}return a.forEach(t.children(),function(l){f(l,1)}),d}(t),l=a.max(a.values(f))-1,p=2*l+1;t.graph().nestingRoot=d,a.forEach(t.edges(),function(C){t.edge(C).minlen*=p});var y=function(t){return a.reduce(t.edges(),function(d,f){return d+t.edge(f).weight},0)}(t)+1;a.forEach(t.children(),function(C){m(t,d,p,y,l,f,C)}),t.graph().nodeRankFactor=p},cleanup:function(t){var d=t.graph();t.removeNode(d.nestingRoot),delete d.nestingRoot,a.forEach(t.edges(),function(f){t.edge(f).nestingEdge&&t.removeEdge(f)})}}},8284:(x,E,o)=>{"use strict";var a=o(2712),_=o(1824);x.exports={run:function(c){c.graph().dummyChains=[],a.forEach(c.edges(),function(u){!function(c,u){var t=u.v,d=c.node(t).rank,f=u.w,l=c.node(f).rank,p=u.name,y=c.edge(u),C=y.labelRank;if(l!==d+1){var T,N,A;for(c.removeEdge(u),A=0,++d;d<l;++A,++d)y.points=[],T=_.addDummyNode(c,"edge",N={width:0,height:0,edgeLabel:y,edgeObj:u,rank:d},"_d"),d===C&&(N.width=y.width,N.height=y.height,N.dummy="edge-label",N.labelpos=y.labelpos),c.setEdge(t,T,{weight:y.weight},p),0===A&&c.graph().dummyChains.push(T),t=T;c.setEdge(t,f,{weight:y.weight},p)}}(c,u)})},undo:function(c){a.forEach(c.graph().dummyChains,function(u){var f,t=c.node(u),d=t.edgeLabel;for(c.setEdge(t.edgeObj,d);t.dummy;)f=c.successors(u)[0],c.removeNode(u),d.points.push({x:t.x,y:t.y}),"edge-label"===t.dummy&&(d.x=t.x,d.y=t.y,d.width=t.width,d.height=t.height),t=c.node(u=f)})}}},6600:(x,E,o)=>{var a=o(2712);x.exports=function(v,m,h){var u,c={};a.forEach(h,function(t){for(var f,l,d=v.parent(t);d;){if((f=v.parent(d))?(l=c[f],c[f]=d):(l=u,u=d),l&&l!==d)return void m.setEdge(l,d);d=f}})}},8372:(x,E,o)=>{var a=o(2712);x.exports=function(v,m){return a.map(m,function(h){var c=v.inEdges(h);if(c.length){var u=a.reduce(c,function(t,d){var f=v.edge(d),l=v.node(d.v);return{sum:t.sum+f.weight*l.order,weight:t.weight+f.weight}},{sum:0,weight:0});return{v:h,barycenter:u.sum/u.weight,weight:u.weight}}return{v:h}})}},1273:(x,E,o)=>{var a=o(2712),_=o(7759).Graph;x.exports=function(h,c,u){var t=function(h){for(var c;h.hasNode(c=a.uniqueId("_root")););return c}(h),d=new _({compound:!0}).setGraph({root:t}).setDefaultNodeLabel(function(f){return h.node(f)});return a.forEach(h.nodes(),function(f){var l=h.node(f),p=h.parent(f);(l.rank===c||l.minRank<=c&&c<=l.maxRank)&&(d.setNode(f),d.setParent(f,p||t),a.forEach(h[u](f),function(y){var C=y.v===f?y.w:y.v,T=d.edge(C,f),N=a.isUndefined(T)?0:T.weight;d.setEdge(C,f,{weight:h.edge(y).weight+N})}),a.has(l,"minRank")&&d.setNode(f,{borderLeft:l.borderLeft[c],borderRight:l.borderRight[c]}))}),d}},7021:(x,E,o)=>{"use strict";var a=o(2712);function v(m,h,c){for(var u=a.zipObject(c,a.map(c,function(y,C){return C})),t=a.flatten(a.map(h,function(y){return a.sortBy(a.map(m.outEdges(y),function(C){return{pos:u[C.w],weight:m.edge(C).weight}}),"pos")}),!0),d=1;d<c.length;)d<<=1;var f=2*d-1;d-=1;var l=a.map(new Array(f),function(){return 0}),p=0;return a.forEach(t.forEach(function(y){var C=y.pos+d;l[C]+=y.weight;for(var T=0;C>0;)C%2&&(T+=l[C+1]),l[C=C-1>>1]+=y.weight;p+=y.weight*T})),p}x.exports=function(m,h){for(var c=0,u=1;u<h.length;++u)c+=v(m,h[u-1],h[u]);return c}},1989:(x,E,o)=>{"use strict";var a=o(2712),_=o(4189),v=o(7021),m=o(9939),h=o(1273),c=o(6600),u=o(7759).Graph,t=o(1824);function f(y,C,T){return a.map(C,function(N){return h(y,N,T)})}function l(y,C){var T=new u;a.forEach(y,function(N){var A=N.graph().root,O=m(N,A,T,C);a.forEach(O.vs,function(k,L){N.node(k).order=L}),c(N,T,O.vs)})}function p(y,C){a.forEach(C,function(T){a.forEach(T,function(N,A){y.node(N).order=A})})}x.exports=function(y){var C=t.maxRank(y),T=f(y,a.range(1,C+1),"inEdges"),N=f(y,a.range(C-1,-1,-1),"outEdges"),A=_(y);p(y,A);for(var k,O=Number.POSITIVE_INFINITY,L=0,J=0;J<4;++L,++J){l(L%2?T:N,L%4>=2),A=t.buildLayerMatrix(y);var Y=v(y,A);Y<O&&(J=0,k=a.cloneDeep(A),O=Y)}p(y,k)}},4189:(x,E,o)=>{"use strict";var a=o(2712);x.exports=function(v){var m={},h=a.filter(v.nodes(),function(f){return!v.children(f).length}),c=a.max(a.map(h,function(f){return v.node(f).rank})),u=a.map(a.range(c+1),function(){return[]}),d=a.sortBy(h,function(f){return v.node(f).rank});return a.forEach(d,function t(f){if(!a.has(m,f)){m[f]=!0;var l=v.node(f);u[l.rank].push(f),a.forEach(v.successors(f),t)}}),u}},965:(x,E,o)=>{"use strict";var a=o(2712);x.exports=function(h,c){var u={};return a.forEach(h,function(d,f){var l=u[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:f};a.isUndefined(d.barycenter)||(l.barycenter=d.barycenter,l.weight=d.weight)}),a.forEach(c.edges(),function(d){var f=u[d.v],l=u[d.w];!a.isUndefined(f)&&!a.isUndefined(l)&&(l.indegree++,f.out.push(u[d.w]))}),function(h){var c=[];function u(f){return function(l){l.merged||(a.isUndefined(l.barycenter)||a.isUndefined(f.barycenter)||l.barycenter>=f.barycenter)&&function(h,c){var u=0,t=0;h.weight&&(u+=h.barycenter*h.weight,t+=h.weight),c.weight&&(u+=c.barycenter*c.weight,t+=c.weight),h.vs=c.vs.concat(h.vs),h.barycenter=u/t,h.weight=t,h.i=Math.min(c.i,h.i),c.merged=!0}(f,l)}}function t(f){return function(l){l.in.push(f),0==--l.indegree&&h.push(l)}}for(;h.length;){var d=h.pop();c.push(d),a.forEach(d.in.reverse(),u(d)),a.forEach(d.out,t(d))}return a.map(a.filter(c,function(f){return!f.merged}),function(f){return a.pick(f,["vs","i","barycenter","weight"])})}(a.filter(u,function(d){return!d.indegree}))}},9939:(x,E,o)=>{var a=o(2712),_=o(8372),v=o(965),m=o(5291);x.exports=function h(t,d,f,l){var p=t.children(d),y=t.node(d),C=y?y.borderLeft:void 0,T=y?y.borderRight:void 0,N={};C&&(p=a.filter(p,function(Y){return Y!==C&&Y!==T}));var A=_(t,p);a.forEach(A,function(Y){if(t.children(Y.v).length){var V=h(t,Y.v,f,l);N[Y.v]=V,a.has(V,"barycenter")&&function(t,d){a.isUndefined(t.barycenter)?(t.barycenter=d.barycenter,t.weight=d.weight):(t.barycenter=(t.barycenter*t.weight+d.barycenter*d.weight)/(t.weight+d.weight),t.weight+=d.weight)}(Y,V)}});var O=v(A,f);!function(t,d){a.forEach(t,function(f){f.vs=a.flatten(f.vs.map(function(l){return d[l]?d[l].vs:l}),!0)})}(O,N);var k=m(O,l);if(C&&(k.vs=a.flatten([C,k.vs,T],!0),t.predecessors(C).length)){var L=t.node(t.predecessors(C)[0]),J=t.node(t.predecessors(T)[0]);a.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+L.order+J.order)/(k.weight+2),k.weight+=2}return k}},5291:(x,E,o)=>{var a=o(2712),_=o(1824);function m(c,u,t){for(var d;u.length&&(d=a.last(u)).i<=t;)u.pop(),c.push(d.vs),t++;return t}x.exports=function(c,u){var t=_.partition(c,function(N){return a.has(N,"barycenter")}),d=t.lhs,f=a.sortBy(t.rhs,function(N){return-N.i}),l=[],p=0,y=0,C=0;d.sort(function(c){return function(u,t){return u.barycenter<t.barycenter?-1:u.barycenter>t.barycenter?1:c?t.i-u.i:u.i-t.i}}(!!u)),C=m(l,f,C),a.forEach(d,function(N){C+=N.vs.length,l.push(N.vs),p+=N.barycenter*N.weight,y+=N.weight,C=m(l,f,C)});var T={vs:a.flatten(l,!0)};return y&&(T.barycenter=p/y,T.weight=y),T}},2375:(x,E,o)=>{var a=o(2712);x.exports=function(h){var c=function(h){var c={},u=0;return a.forEach(h.children(),function t(d){var f=u;a.forEach(h.children(d),t),c[d]={low:f,lim:u++}}),c}(h);a.forEach(h.graph().dummyChains,function(u){for(var t=h.node(u),d=t.edgeObj,f=function(h,c,u,t){var y,C,d=[],f=[],l=Math.min(c[u].low,c[t].low),p=Math.max(c[u].lim,c[t].lim);y=u;do{y=h.parent(y),d.push(y)}while(y&&(c[y].low>l||p>c[y].lim));for(C=y,y=t;(y=h.parent(y))!==C;)f.push(y);return{path:d.concat(f.reverse()),lca:C}}(h,c,d.v,d.w),l=f.path,p=f.lca,y=0,C=l[y],T=!0;u!==d.w;){if(t=h.node(u),T){for(;(C=l[y])!==p&&h.node(C).maxRank<t.rank;)y++;C===p&&(T=!1)}if(!T){for(;y<l.length-1&&h.node(C=l[y+1]).minRank<=t.rank;)y++;C=l[y]}h.setParent(u,C),u=h.successors(u)[0]}})}},1331:(x,E,o)=>{"use strict";var a=o(2712),_=o(7759).Graph,v=o(1824);function m(O,k){var L={};return a.reduce(k,function(Y,V){var Q=0,I=0,Z=Y.length,M=a.last(V);return a.forEach(V,function(P,B){var H=function(O,k){if(O.node(k).dummy)return a.find(O.predecessors(k),function(L){return O.node(L).dummy})}(O,P),et=H?O.node(H).order:Z;(H||P===M)&&(a.forEach(V.slice(I,B+1),function(G){a.forEach(O.predecessors(G),function(D){var X=O.node(D),W=X.order;(W<Q||et<W)&&(!X.dummy||!O.node(G).dummy)&&u(L,D,G)})}),I=B+1,Q=et)}),V}),L}function h(O,k){var L={};function J(V,Q,I,Z,M){var P;a.forEach(a.range(Q,I),function(B){O.node(P=V[B]).dummy&&a.forEach(O.predecessors(P),function(H){var et=O.node(H);et.dummy&&(et.order<Z||et.order>M)&&u(L,H,P)})})}return a.reduce(k,function(V,Q){var Z,I=-1,M=0;return a.forEach(Q,function(P,B){if("border"===O.node(P).dummy){var H=O.predecessors(P);H.length&&(Z=O.node(H[0]).order,J(Q,M,B,I,Z),M=B,I=Z)}J(Q,M,Q.length,Z,V.length)}),Q}),L}function u(O,k,L){if(k>L){var J=k;k=L,L=J}var Y=O[k];Y||(O[k]=Y={}),Y[L]=!0}function t(O,k,L){if(k>L){var J=k;k=L,L=J}return a.has(O[k],L)}function d(O,k,L,J){var Y={},V={},Q={};return a.forEach(k,function(I){a.forEach(I,function(Z,M){Y[Z]=Z,V[Z]=Z,Q[Z]=M})}),a.forEach(k,function(I){var Z=-1;a.forEach(I,function(M){var P=J(M);if(P.length)for(var B=((P=a.sortBy(P,function(D){return Q[D]})).length-1)/2,H=Math.floor(B),et=Math.ceil(B);H<=et;++H){var G=P[H];V[M]===M&&Z<Q[G]&&!t(L,M,G)&&(V[G]=M,V[M]=Y[M]=Y[G],Z=Q[G])}})}),{root:Y,align:V}}function f(O,k,L,J,Y){var V={},Q=function(O,k,L,J){var Y=new _,V=O.graph(),Q=function(O,k,L){return function(J,Y,V){var M,Q=J.node(Y),I=J.node(V),Z=0;if(Z+=Q.width/2,a.has(Q,"labelpos"))switch(Q.labelpos.toLowerCase()){case"l":M=-Q.width/2;break;case"r":M=Q.width/2}if(M&&(Z+=L?M:-M),M=0,Z+=(Q.dummy?k:O)/2,Z+=(I.dummy?k:O)/2,Z+=I.width/2,a.has(I,"labelpos"))switch(I.labelpos.toLowerCase()){case"l":M=I.width/2;break;case"r":M=-I.width/2}return M&&(Z+=L?M:-M),M=0,Z}}(V.nodesep,V.edgesep,J);return a.forEach(k,function(I){var Z;a.forEach(I,function(M){var P=L[M];if(Y.setNode(P),Z){var B=L[Z],H=Y.edge(B,P);Y.setEdge(B,P,Math.max(Q(O,M,Z),H||0))}Z=M})}),Y}(O,k,L,Y),I=Y?"borderLeft":"borderRight";function Z(B,H){for(var et=Q.nodes(),G=et.pop(),D={};G;)D[G]?B(G):(D[G]=!0,et.push(G),et=et.concat(H(G))),G=et.pop()}return Z(function(B){V[B]=Q.inEdges(B).reduce(function(H,et){return Math.max(H,V[et.v]+Q.edge(et))},0)},Q.predecessors.bind(Q)),Z(function(B){var H=Q.outEdges(B).reduce(function(G,D){return Math.min(G,V[D.w]-Q.edge(D))},Number.POSITIVE_INFINITY),et=O.node(B);H!==Number.POSITIVE_INFINITY&&et.borderType!==I&&(V[B]=Math.max(V[B],H))},Q.successors.bind(Q)),a.forEach(J,function(B){V[B]=V[L[B]]}),V}function p(O,k){return a.minBy(a.values(k),function(L){var J=Number.NEGATIVE_INFINITY,Y=Number.POSITIVE_INFINITY;return a.forIn(L,function(V,Q){var I=function(O,k){return O.node(k).width}(O,Q)/2;J=Math.max(V+I,J),Y=Math.min(V-I,Y)}),J-Y})}function y(O,k){var L=a.values(k),J=a.min(L),Y=a.max(L);a.forEach(["u","d"],function(V){a.forEach(["l","r"],function(Q){var M,I=V+Q,Z=O[I];if(Z!==k){var P=a.values(Z);(M="l"===Q?J-a.min(P):Y-a.max(P))&&(O[I]=a.mapValues(Z,function(B){return B+M}))}})})}function C(O,k){return a.mapValues(O.ul,function(L,J){if(k)return O[k.toLowerCase()][J];var Y=a.sortBy(a.map(O,J));return(Y[1]+Y[2])/2})}x.exports={positionX:function(O){var Y,k=v.buildLayerMatrix(O),L=a.merge(m(O,k),h(O,k)),J={};a.forEach(["u","d"],function(Q){Y="u"===Q?k:a.values(k).reverse(),a.forEach(["l","r"],function(I){"r"===I&&(Y=a.map(Y,function(B){return a.values(B).reverse()}));var Z=("u"===Q?O.predecessors:O.successors).bind(O),M=d(0,Y,L,Z),P=f(O,Y,M.root,M.align,"r"===I);"r"===I&&(P=a.mapValues(P,function(B){return-B})),J[Q+I]=P})});var V=p(O,J);return y(J,V),C(J,O.graph().align)},findType1Conflicts:m,findType2Conflicts:h,addConflict:u,hasConflict:t,verticalAlignment:d,horizontalCompaction:f,alignCoordinates:y,findSmallestWidthAlignment:p,balance:C}},6685:(x,E,o)=>{"use strict";var a=o(2712),_=o(1824),v=o(1331).positionX;x.exports=function(c){(function(c){var u=_.buildLayerMatrix(c),t=c.graph().ranksep,d=0;a.forEach(u,function(f){var l=a.max(a.map(f,function(p){return c.node(p).height}));a.forEach(f,function(p){c.node(p).y=d+l/2}),d+=l+t})})(c=_.asNonCompoundGraph(c)),a.forEach(v(c),function(u,t){c.node(t).x=u})}},5936:(x,E,o)=>{"use strict";var a=o(2712),_=o(7759).Graph,v=o(1618).slack;function h(t,d){return a.forEach(t.nodes(),function f(l){a.forEach(d.nodeEdges(l),function(p){var y=p.v,C=l===y?p.w:y;!t.hasNode(C)&&!v(d,p)&&(t.setNode(C,{}),t.setEdge(l,C,{}),f(C))})}),t.nodeCount()}function c(t,d){return a.minBy(d.edges(),function(f){if(t.hasNode(f.v)!==t.hasNode(f.w))return v(d,f)})}function u(t,d,f){a.forEach(t.nodes(),function(l){d.node(l).rank+=f})}x.exports=function(t){var p,y,d=new _({directed:!1}),f=t.nodes()[0],l=t.nodeCount();for(d.setNode(f,{});h(d,t)<l;)p=c(d,t),y=d.hasNode(p.v)?v(t,p):-v(t,p),u(d,t,y);return d}},2445:(x,E,o)=>{"use strict";var _=o(1618).longestPath,v=o(5936),m=o(1844);x.exports=function(d){switch(d.graph().ranker){case"network-simplex":t(d);break;case"tight-tree":!function(d){_(d),v(d)}(d);break;case"longest-path":c(d);break;default:t(d)}};var c=_;function t(d){m(d)}},1844:(x,E,o)=>{"use strict";var a=o(2712),_=o(5936),v=o(1618).slack,m=o(1618).longestPath,h=o(7759).alg.preorder,c=o(7759).alg.postorder,u=o(1824).simplify;function t(L){L=u(L),m(L);var Y,J=_(L);for(p(J),d(J,L);Y=C(J);)N(J,L,Y,T(J,L,Y))}function d(L,J){var Y=c(L,L.nodes());Y=Y.slice(0,Y.length-1),a.forEach(Y,function(V){!function(L,J,Y){var V=L.node(Y);L.edge(Y,V.parent).cutvalue=l(L,J,Y)}(L,J,V)})}function l(L,J,Y){var Q=L.node(Y).parent,I=!0,Z=J.edge(Y,Q),M=0;return Z||(I=!1,Z=J.edge(Q,Y)),M=Z.weight,a.forEach(J.nodeEdges(Y),function(P){var B=P.v===Y,H=B?P.w:P.v;if(H!==Q){var et=B===I,G=J.edge(P).weight;if(M+=et?G:-G,function(L,J,Y){return L.hasEdge(J,Y)}(L,Y,H)){var D=L.edge(Y,H).cutvalue;M+=et?-D:D}}}),M}function p(L,J){arguments.length<2&&(J=L.nodes()[0]),y(L,{},1,J)}function y(L,J,Y,V,Q){var I=Y,Z=L.node(V);return J[V]=!0,a.forEach(L.neighbors(V),function(M){a.has(J,M)||(Y=y(L,J,Y,M,V))}),Z.low=I,Z.lim=Y++,Q?Z.parent=Q:delete Z.parent,Y}function C(L){return a.find(L.edges(),function(J){return L.edge(J).cutvalue<0})}function T(L,J,Y){var V=Y.v,Q=Y.w;J.hasEdge(V,Q)||(V=Y.w,Q=Y.v);var I=L.node(V),Z=L.node(Q),M=I,P=!1;I.lim>Z.lim&&(M=Z,P=!0);var B=a.filter(J.edges(),function(H){return P===k(0,L.node(H.v),M)&&P!==k(0,L.node(H.w),M)});return a.minBy(B,function(H){return v(J,H)})}function N(L,J,Y,V){L.removeEdge(Y.v,Y.w),L.setEdge(V.v,V.w,{}),p(L),d(L,J),function(L,J){var Y=a.find(L.nodes(),function(Q){return!J.node(Q).parent}),V=h(L,Y);V=V.slice(1),a.forEach(V,function(Q){var I=L.node(Q).parent,Z=J.edge(Q,I),M=!1;Z||(Z=J.edge(I,Q),M=!0),J.node(Q).rank=J.node(I).rank+(M?Z.minlen:-Z.minlen)})}(L,J)}function k(L,J,Y){return Y.low<=J.lim&&J.lim<=Y.lim}x.exports=t,t.initLowLimValues=p,t.initCutValues=d,t.calcCutValue=l,t.leaveEdge=C,t.enterEdge=T,t.exchangeEdges=N},1618:(x,E,o)=>{"use strict";var a=o(2712);x.exports={longestPath:function(m){var h={};a.forEach(m.sources(),function c(u){var t=m.node(u);if(a.has(h,u))return t.rank;h[u]=!0;var d=a.min(a.map(m.outEdges(u),function(f){return c(f.w)-m.edge(f).minlen}));return(d===Number.POSITIVE_INFINITY||null==d)&&(d=0),t.rank=d})},slack:function(m,h){return m.node(h.w).rank-m.node(h.v).rank-m.edge(h).minlen}}},1824:(x,E,o)=>{"use strict";var a=o(2712),_=o(7759).Graph;function v(A,O,k,L){var J;do{J=a.uniqueId(L)}while(A.hasNode(J));return k.dummy=O,A.setNode(J,k),J}function y(A){return a.max(a.map(A.nodes(),function(O){var k=A.node(O).rank;if(!a.isUndefined(k))return k}))}x.exports={addDummyNode:v,simplify:function(A){var O=(new _).setGraph(A.graph());return a.forEach(A.nodes(),function(k){O.setNode(k,A.node(k))}),a.forEach(A.edges(),function(k){var L=O.edge(k.v,k.w)||{weight:0,minlen:1},J=A.edge(k);O.setEdge(k.v,k.w,{weight:L.weight+J.weight,minlen:Math.max(L.minlen,J.minlen)})}),O},asNonCompoundGraph:function(A){var O=new _({multigraph:A.isMultigraph()}).setGraph(A.graph());return a.forEach(A.nodes(),function(k){A.children(k).length||O.setNode(k,A.node(k))}),a.forEach(A.edges(),function(k){O.setEdge(k,A.edge(k))}),O},successorWeights:function(A){var O=a.map(A.nodes(),function(k){var L={};return a.forEach(A.outEdges(k),function(J){L[J.w]=(L[J.w]||0)+A.edge(J).weight}),L});return a.zipObject(A.nodes(),O)},predecessorWeights:function(A){var O=a.map(A.nodes(),function(k){var L={};return a.forEach(A.inEdges(k),function(J){L[J.v]=(L[J.v]||0)+A.edge(J).weight}),L});return a.zipObject(A.nodes(),O)},intersectRect:function(A,O){var I,Z,k=A.x,L=A.y,J=O.x-k,Y=O.y-L,V=A.width/2,Q=A.height/2;if(!J&&!Y)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Y)*V>Math.abs(J)*Q?(Y<0&&(Q=-Q),I=Q*J/Y,Z=Q):(J<0&&(V=-V),I=V,Z=V*Y/J),{x:k+I,y:L+Z}},buildLayerMatrix:function(A){var O=a.map(a.range(y(A)+1),function(){return[]});return a.forEach(A.nodes(),function(k){var L=A.node(k),J=L.rank;a.isUndefined(J)||(O[J][L.order]=k)}),O},normalizeRanks:function(A){var O=a.min(a.map(A.nodes(),function(k){return A.node(k).rank}));a.forEach(A.nodes(),function(k){var L=A.node(k);a.has(L,"rank")&&(L.rank-=O)})},removeEmptyRanks:function(A){var O=a.min(a.map(A.nodes(),function(Y){return A.node(Y).rank})),k=[];a.forEach(A.nodes(),function(Y){var V=A.node(Y).rank-O;k[V]||(k[V]=[]),k[V].push(Y)});var L=0,J=A.graph().nodeRankFactor;a.forEach(k,function(Y,V){a.isUndefined(Y)&&V%J!=0?--L:L&&a.forEach(Y,function(Q){A.node(Q).rank+=L})})},addBorderNode:function(A,O,k,L){var J={width:0,height:0};return arguments.length>=4&&(J.rank=k,J.order=L),v(A,"border",J,O)},maxRank:y,partition:function(A,O){var k={lhs:[],rhs:[]};return a.forEach(A,function(L){O(L)?k.lhs.push(L):k.rhs.push(L)}),k},time:function(A,O){var k=a.now();try{return O()}finally{console.log(A+" time: "+(a.now()-k)+"ms")}},notime:function(A,O){return O()}}},6854:x=>{x.exports="0.8.5"},30:(x,E,o)=>{var a=o(8057);x.exports={Graph:a.Graph,json:o(1852),alg:o(9226),version:a.version}},9174:(x,E,o)=>{var a=o(4269);x.exports=function(v){var c,m={},h=[];function u(t){a.has(m,t)||(m[t]=!0,c.push(t),a.each(v.successors(t),u),a.each(v.predecessors(t),u))}return a.each(v.nodes(),function(t){c=[],u(t),c.length&&h.push(c)}),h}},9831:(x,E,o)=>{var a=o(4269);function v(m,h,c,u,t,d){a.has(u,h)||(u[h]=!0,c||d.push(h),a.each(t(h),function(f){v(m,f,c,u,t,d)}),c&&d.push(h))}x.exports=function(m,h,c){a.isArray(h)||(h=[h]);var u=(m.isDirected()?m.successors:m.neighbors).bind(m),t=[],d={};return a.each(h,function(f){if(!m.hasNode(f))throw new Error("Graph does not have node: "+f);v(m,f,"post"===c,d,u,t)}),t}},2568:(x,E,o)=>{var a=o(8406),_=o(4269);x.exports=function(m,h,c){return _.transform(m.nodes(),function(u,t){u[t]=a(m,t,h,c)},{})}},8406:(x,E,o)=>{var a=o(4269),_=o(2643);x.exports=function(c,u,t,d){return function(c,u,t,d){var p,y,f={},l=new _,C=function(T){var N=T.v!==p?T.v:T.w,A=f[N],O=t(T),k=y.distance+O;if(O<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+O);k<A.distance&&(A.distance=k,A.predecessor=p,l.decrease(N,k))};for(c.nodes().forEach(function(T){var N=T===u?0:Number.POSITIVE_INFINITY;f[T]={distance:N},l.add(T,N)});l.size()>0&&(p=l.removeMin(),(y=f[p]).distance!==Number.POSITIVE_INFINITY);)d(p).forEach(C);return f}(c,String(u),t||v,d||function(f){return c.outEdges(f)})};var v=a.constant(1)},2777:(x,E,o)=>{var a=o(4269),_=o(468);x.exports=function(m){return a.filter(_(m),function(h){return h.length>1||1===h.length&&m.hasEdge(h[0],h[0])})}},6926:(x,E,o)=>{var a=o(4269);x.exports=function(h,c,u){return function(h,c,u){var t={},d=h.nodes();return d.forEach(function(f){t[f]={},t[f][f]={distance:0},d.forEach(function(l){f!==l&&(t[f][l]={distance:Number.POSITIVE_INFINITY})}),u(f).forEach(function(l){var p=l.v===f?l.w:l.v,y=c(l);t[f][p]={distance:y,predecessor:f}})}),d.forEach(function(f){var l=t[f];d.forEach(function(p){var y=t[p];d.forEach(function(C){var N=l[C],A=y[C],O=y[f].distance+N.distance;O<A.distance&&(A.distance=O,A.predecessor=N.predecessor)})})}),t}(h,c||_,u||function(t){return h.outEdges(t)})};var _=a.constant(1)},9226:(x,E,o)=>{x.exports={components:o(9174),dijkstra:o(8406),dijkstraAll:o(2568),findCycles:o(2777),floydWarshall:o(6926),isAcyclic:o(9160),postorder:o(2487),preorder:o(2223),prim:o(644),tarjan:o(468),topsort:o(6501)}},9160:(x,E,o)=>{var a=o(6501);x.exports=function(v){try{a(v)}catch(m){if(m instanceof a.CycleException)return!1;throw m}return!0}},2487:(x,E,o)=>{var a=o(9831);x.exports=function(v,m){return a(v,m,"post")}},2223:(x,E,o)=>{var a=o(9831);x.exports=function(v,m){return a(v,m,"pre")}},644:(x,E,o)=>{var a=o(4269),_=o(7051),v=o(2643);x.exports=function(h,c){var f,u=new _,t={},d=new v;function l(y){var C=y.v===f?y.w:y.v,T=d.priority(C);if(void 0!==T){var N=c(y);N<T&&(t[C]=f,d.decrease(C,N))}}if(0===h.nodeCount())return u;a.each(h.nodes(),function(y){d.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),d.decrease(h.nodes()[0],0);for(var p=!1;d.size()>0;){if(f=d.removeMin(),a.has(t,f))u.setEdge(f,t[f]);else{if(p)throw new Error("Input graph is not connected: "+h);p=!0}h.nodeEdges(f).forEach(l)}return u}},468:(x,E,o)=>{var a=o(4269);x.exports=function(v){var m=0,h=[],c={},u=[];function t(d){var f=c[d]={onStack:!0,lowlink:m,index:m++};if(h.push(d),v.successors(d).forEach(function(y){a.has(c,y)?c[y].onStack&&(f.lowlink=Math.min(f.lowlink,c[y].index)):(t(y),f.lowlink=Math.min(f.lowlink,c[y].lowlink))}),f.lowlink===f.index){var p,l=[];do{p=h.pop(),c[p].onStack=!1,l.push(p)}while(d!==p);u.push(l)}}return v.nodes().forEach(function(d){a.has(c,d)||t(d)}),u}},6501:(x,E,o)=>{var a=o(4269);function _(m){var h={},c={},u=[];if(a.each(m.sinks(),function t(d){if(a.has(c,d))throw new v;a.has(h,d)||(c[d]=!0,h[d]=!0,a.each(m.predecessors(d),t),delete c[d],u.push(d))}),a.size(h)!==m.nodeCount())throw new v;return u}function v(){}x.exports=_,_.CycleException=v,v.prototype=new Error},2643:(x,E,o)=>{var a=o(4269);function _(){this._arr=[],this._keyIndices={}}x.exports=_,_.prototype.size=function(){return this._arr.length},_.prototype.keys=function(){return this._arr.map(function(v){return v.key})},_.prototype.has=function(v){return a.has(this._keyIndices,v)},_.prototype.priority=function(v){var m=this._keyIndices[v];if(void 0!==m)return this._arr[m].priority},_.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},_.prototype.add=function(v,m){var h=this._keyIndices;if(v=String(v),!a.has(h,v)){var c=this._arr,u=c.length;return h[v]=u,c.push({key:v,priority:m}),this._decrease(u),!0}return!1},_.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},_.prototype.decrease=function(v,m){var h=this._keyIndices[v];if(m>this._arr[h].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[h].priority+" New: "+m);this._arr[h].priority=m,this._decrease(h)},_.prototype._heapify=function(v){var m=this._arr,h=2*v,c=h+1,u=v;h<m.length&&(u=m[h].priority<m[u].priority?h:u,c<m.length&&(u=m[c].priority<m[u].priority?c:u),u!==v&&(this._swap(v,u),this._heapify(u)))},_.prototype._decrease=function(v){for(var c,m=this._arr,h=m[v].priority;0!==v&&!(m[c=v>>1].priority<h);)this._swap(v,c),v=c},_.prototype._swap=function(v,m){var h=this._arr,c=this._keyIndices,u=h[v],t=h[m];h[v]=t,h[m]=u,c[t.key]=v,c[u.key]=m}},7051:(x,E,o)=>{"use strict";var a=o(4269);x.exports=h;var v="\0";function h(l){this._isDirected=!a.has(l,"directed")||l.directed,this._isMultigraph=!!a.has(l,"multigraph")&&l.multigraph,this._isCompound=!!a.has(l,"compound")&&l.compound,this._label=void 0,this._defaultNodeLabelFn=a.constant(void 0),this._defaultEdgeLabelFn=a.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[v]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function c(l,p){l[p]?l[p]++:l[p]=1}function u(l,p){--l[p]||delete l[p]}function t(l,p,y,C){var T=""+p,N=""+y;if(!l&&T>N){var A=T;T=N,N=A}return T+"\x01"+N+"\x01"+(a.isUndefined(C)?"\0":C)}function d(l,p,y,C){var T=""+p,N=""+y;if(!l&&T>N){var A=T;T=N,N=A}var O={v:T,w:N};return C&&(O.name=C),O}function f(l,p){return t(l,p.v,p.w,p.name)}h.prototype._nodeCount=0,h.prototype._edgeCount=0,h.prototype.isDirected=function(){return this._isDirected},h.prototype.isMultigraph=function(){return this._isMultigraph},h.prototype.isCompound=function(){return this._isCompound},h.prototype.setGraph=function(l){return this._label=l,this},h.prototype.graph=function(){return this._label},h.prototype.setDefaultNodeLabel=function(l){return a.isFunction(l)||(l=a.constant(l)),this._defaultNodeLabelFn=l,this},h.prototype.nodeCount=function(){return this._nodeCount},h.prototype.nodes=function(){return a.keys(this._nodes)},h.prototype.sources=function(){var l=this;return a.filter(this.nodes(),function(p){return a.isEmpty(l._in[p])})},h.prototype.sinks=function(){var l=this;return a.filter(this.nodes(),function(p){return a.isEmpty(l._out[p])})},h.prototype.setNodes=function(l,p){var y=arguments,C=this;return a.each(l,function(T){y.length>1?C.setNode(T,p):C.setNode(T)}),this},h.prototype.setNode=function(l,p){return a.has(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=p),this):(this._nodes[l]=arguments.length>1?p:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=v,this._children[l]={},this._children[v][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)},h.prototype.node=function(l){return this._nodes[l]},h.prototype.hasNode=function(l){return a.has(this._nodes,l)},h.prototype.removeNode=function(l){var p=this;if(a.has(this._nodes,l)){var y=function(C){p.removeEdge(p._edgeObjs[C])};delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],a.each(this.children(l),function(C){p.setParent(C)}),delete this._children[l]),a.each(a.keys(this._in[l]),y),delete this._in[l],delete this._preds[l],a.each(a.keys(this._out[l]),y),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this},h.prototype.setParent=function(l,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(a.isUndefined(p))p=v;else{for(var y=p+="";!a.isUndefined(y);y=this.parent(y))if(y===l)throw new Error("Setting "+p+" as parent of "+l+" would create a cycle");this.setNode(p)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=p,this._children[p][l]=!0,this},h.prototype._removeFromParentsChildList=function(l){delete this._children[this._parent[l]][l]},h.prototype.parent=function(l){if(this._isCompound){var p=this._parent[l];if(p!==v)return p}},h.prototype.children=function(l){if(a.isUndefined(l)&&(l=v),this._isCompound){var p=this._children[l];if(p)return a.keys(p)}else{if(l===v)return this.nodes();if(this.hasNode(l))return[]}},h.prototype.predecessors=function(l){var p=this._preds[l];if(p)return a.keys(p)},h.prototype.successors=function(l){var p=this._sucs[l];if(p)return a.keys(p)},h.prototype.neighbors=function(l){var p=this.predecessors(l);if(p)return a.union(p,this.successors(l))},h.prototype.isLeaf=function(l){return 0===(this.isDirected()?this.successors(l):this.neighbors(l)).length},h.prototype.filterNodes=function(l){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var y=this;a.each(this._nodes,function(N,A){l(A)&&p.setNode(A,N)}),a.each(this._edgeObjs,function(N){p.hasNode(N.v)&&p.hasNode(N.w)&&p.setEdge(N,y.edge(N))});var C={};function T(N){var A=y.parent(N);return void 0===A||p.hasNode(A)?(C[N]=A,A):A in C?C[A]:T(A)}return this._isCompound&&a.each(p.nodes(),function(N){p.setParent(N,T(N))}),p},h.prototype.setDefaultEdgeLabel=function(l){return a.isFunction(l)||(l=a.constant(l)),this._defaultEdgeLabelFn=l,this},h.prototype.edgeCount=function(){return this._edgeCount},h.prototype.edges=function(){return a.values(this._edgeObjs)},h.prototype.setPath=function(l,p){var y=this,C=arguments;return a.reduce(l,function(T,N){return C.length>1?y.setEdge(T,N,p):y.setEdge(T,N),N}),this},h.prototype.setEdge=function(){var l,p,y,C,T=!1,N=arguments[0];"object"==typeof N&&null!==N&&"v"in N?(l=N.v,p=N.w,y=N.name,2===arguments.length&&(C=arguments[1],T=!0)):(l=N,p=arguments[1],y=arguments[3],arguments.length>2&&(C=arguments[2],T=!0)),l=""+l,p=""+p,a.isUndefined(y)||(y=""+y);var A=t(this._isDirected,l,p,y);if(a.has(this._edgeLabels,A))return T&&(this._edgeLabels[A]=C),this;if(!a.isUndefined(y)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(p),this._edgeLabels[A]=T?C:this._defaultEdgeLabelFn(l,p,y);var O=d(this._isDirected,l,p,y);return l=O.v,p=O.w,Object.freeze(O),this._edgeObjs[A]=O,c(this._preds[p],l),c(this._sucs[l],p),this._in[p][A]=O,this._out[l][A]=O,this._edgeCount++,this},h.prototype.edge=function(l,p,y){var C=1===arguments.length?f(this._isDirected,arguments[0]):t(this._isDirected,l,p,y);return this._edgeLabels[C]},h.prototype.hasEdge=function(l,p,y){var C=1===arguments.length?f(this._isDirected,arguments[0]):t(this._isDirected,l,p,y);return a.has(this._edgeLabels,C)},h.prototype.removeEdge=function(l,p,y){var C=1===arguments.length?f(this._isDirected,arguments[0]):t(this._isDirected,l,p,y),T=this._edgeObjs[C];return T&&(l=T.v,p=T.w,delete this._edgeLabels[C],delete this._edgeObjs[C],u(this._preds[p],l),u(this._sucs[l],p),delete this._in[p][C],delete this._out[l][C],this._edgeCount--),this},h.prototype.inEdges=function(l,p){var y=this._in[l];if(y){var C=a.values(y);return p?a.filter(C,function(T){return T.v===p}):C}},h.prototype.outEdges=function(l,p){var y=this._out[l];if(y){var C=a.values(y);return p?a.filter(C,function(T){return T.w===p}):C}},h.prototype.nodeEdges=function(l,p){var y=this.inEdges(l,p);if(y)return y.concat(this.outEdges(l,p))}},8057:(x,E,o)=>{x.exports={Graph:o(7051),version:o(751)}},1852:(x,E,o)=>{var a=o(4269),_=o(7051);function m(u){return a.map(u.nodes(),function(t){var d=u.node(t),f=u.parent(t),l={v:t};return a.isUndefined(d)||(l.value=d),a.isUndefined(f)||(l.parent=f),l})}function h(u){return a.map(u.edges(),function(t){var d=u.edge(t),f={v:t.v,w:t.w};return a.isUndefined(t.name)||(f.name=t.name),a.isUndefined(d)||(f.value=d),f})}x.exports={write:function(u){var t={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:m(u),edges:h(u)};return a.isUndefined(u.graph())||(t.value=a.clone(u.graph())),t},read:function(u){var t=new _(u.options).setGraph(u.value);return a.each(u.nodes,function(d){t.setNode(d.v,d.value),d.parent&&t.setParent(d.v,d.parent)}),a.each(u.edges,function(d){t.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),t}}},4269:(x,E,o)=>{var a;try{a={clone:o(3742),constant:o(5654),each:o(3718),filter:o(3834),has:o(2335),isArray:o(1690),isEmpty:o(2232),isFunction:o(5836),isUndefined:o(9569),keys:o(9108),map:o(9718),reduce:o(6101),size:o(4951),transform:o(3593),union:o(9728),values:o(3348)}}catch(_){}a||(a=window._),x.exports=a},751:x=>{x.exports="2.1.8"},1235:(x,E,o)=>{var v=o(4153)(o(7038),"DataView");x.exports=v},1505:(x,E,o)=>{var a=o(9410),_=o(1143),v=o(604),m=o(584),h=o(7792);function c(u){var t=-1,d=null==u?0:u.length;for(this.clear();++t<d;){var f=u[t];this.set(f[0],f[1])}}c.prototype.clear=a,c.prototype.delete=_,c.prototype.get=v,c.prototype.has=m,c.prototype.set=h,x.exports=c},3545:(x,E,o)=>{var a=o(3391),_=o(8971),v=o(8858),m=o(3913),h=o(8944);function c(u){var t=-1,d=null==u?0:u.length;for(this.clear();++t<d;){var f=u[t];this.set(f[0],f[1])}}c.prototype.clear=a,c.prototype.delete=_,c.prototype.get=v,c.prototype.has=m,c.prototype.set=h,x.exports=c},9046:(x,E,o)=>{var v=o(4153)(o(7038),"Map");x.exports=v},3177:(x,E,o)=>{var a=o(536),_=o(1502),v=o(4960),m=o(1539),h=o(4138);function c(u){var t=-1,d=null==u?0:u.length;for(this.clear();++t<d;){var f=u[t];this.set(f[0],f[1])}}c.prototype.clear=a,c.prototype.delete=_,c.prototype.get=v,c.prototype.has=m,c.prototype.set=h,x.exports=c},7129:(x,E,o)=>{var v=o(4153)(o(7038),"Promise");x.exports=v},4918:(x,E,o)=>{var v=o(4153)(o(7038),"Set");x.exports=v},8690:(x,E,o)=>{var a=o(3177),_=o(365),v=o(8235);function m(h){var c=-1,u=null==h?0:h.length;for(this.__data__=new a;++c<u;)this.add(h[c])}m.prototype.add=m.prototype.push=_,m.prototype.has=v,x.exports=m},3667:(x,E,o)=>{var a=o(3545),_=o(8034),v=o(9223),m=o(5887),h=o(1450),c=o(1386);function u(t){var d=this.__data__=new a(t);this.size=d.size}u.prototype.clear=_,u.prototype.delete=v,u.prototype.get=m,u.prototype.has=h,u.prototype.set=c,x.exports=u},7333:(x,E,o)=>{var a=o(7038);x.exports=a.Symbol},6820:(x,E,o)=>{var a=o(7038);x.exports=a.Uint8Array},4203:(x,E,o)=>{var v=o(4153)(o(7038),"WeakMap");x.exports=v},1638:x=>{x.exports=function(o,a,_){switch(_.length){case 0:return o.call(a);case 1:return o.call(a,_[0]);case 2:return o.call(a,_[0],_[1]);case 3:return o.call(a,_[0],_[1],_[2])}return o.apply(a,_)}},4500:x=>{x.exports=function(o,a){for(var _=-1,v=null==o?0:o.length;++_<v&&!1!==a(o[_],_,o););return o}},1375:x=>{x.exports=function(o,a){for(var _=-1,v=null==o?0:o.length,m=0,h=[];++_<v;){var c=o[_];a(c,_,o)&&(h[m++]=c)}return h}},8588:(x,E,o)=>{var a=o(2166);x.exports=function(v,m){return!(null==v||!v.length)&&a(v,m,0)>-1}},679:x=>{x.exports=function(o,a,_){for(var v=-1,m=null==o?0:o.length;++v<m;)if(_(a,o[v]))return!0;return!1}},1890:(x,E,o)=>{var a=o(8282),_=o(2952),v=o(1690),m=o(4444),h=o(968),c=o(7679),t=Object.prototype.hasOwnProperty;x.exports=function(f,l){var p=v(f),y=!p&&_(f),C=!p&&!y&&m(f),T=!p&&!y&&!C&&c(f),N=p||y||C||T,A=N?a(f.length,String):[],O=A.length;for(var k in f)(l||t.call(f,k))&&(!N||!("length"==k||C&&("offset"==k||"parent"==k)||T&&("buffer"==k||"byteLength"==k||"byteOffset"==k)||h(k,O)))&&A.push(k);return A}},4992:x=>{x.exports=function(o,a){for(var _=-1,v=null==o?0:o.length,m=Array(v);++_<v;)m[_]=a(o[_],_,o);return m}},4165:x=>{x.exports=function(o,a){for(var _=-1,v=a.length,m=o.length;++_<v;)o[m+_]=a[_];return o}},9731:x=>{x.exports=function(o,a,_,v){var m=-1,h=null==o?0:o.length;for(v&&h&&(_=o[++m]);++m<h;)_=a(_,o[m],m,o);return _}},8141:x=>{x.exports=function(o,a){for(var _=-1,v=null==o?0:o.length;++_<v;)if(a(o[_],_,o))return!0;return!1}},8956:(x,E,o)=>{var _=o(8840)("length");x.exports=_},3530:(x,E,o)=>{var a=o(2007),_=o(1166);x.exports=function(m,h,c){(void 0!==c&&!_(m[h],c)||void 0===c&&!(h in m))&&a(m,h,c)}},3898:(x,E,o)=>{var a=o(2007),_=o(1166),m=Object.prototype.hasOwnProperty;x.exports=function(c,u,t){var d=c[u];(!m.call(c,u)||!_(d,t)||void 0===t&&!(u in c))&&a(c,u,t)}},5758:(x,E,o)=>{var a=o(1166);x.exports=function(v,m){for(var h=v.length;h--;)if(a(v[h][0],m))return h;return-1}},2067:(x,E,o)=>{var a=o(1694),_=o(9108);x.exports=function(m,h){return m&&a(h,_(h),m)}},882:(x,E,o)=>{var a=o(1694),_=o(2970);x.exports=function(m,h){return m&&a(h,_(h),m)}},2007:(x,E,o)=>{var a=o(395);x.exports=function(v,m,h){"__proto__"==m&&a?a(v,m,{configurable:!0,enumerable:!0,value:h,writable:!0}):v[m]=h}},7007:(x,E,o)=>{var a=o(3667),_=o(4500),v=o(3898),m=o(2067),h=o(882),c=o(694),u=o(3595),t=o(4746),d=o(8857),f=o(8605),l=o(1675),p=o(6663),y=o(2963),C=o(2143),T=o(1563),N=o(1690),A=o(4444),O=o(2e3),k=o(3867),L=o(8855),J=o(9108),Y=o(2970),Z="[object Arguments]",et="[object Function]",W="[object Object]",mt={};mt[Z]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object DataView]"]=mt["[object Boolean]"]=mt["[object Date]"]=mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Map]"]=mt["[object Number]"]=mt[W]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object Symbol]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Error]"]=mt[et]=mt["[object WeakMap]"]=!1,x.exports=function Jt(vt,Xt,Wt,en,ae,Lt){var Nt,ue=1&Xt,le=2&Xt,nn=4&Xt;if(Wt&&(Nt=ae?Wt(vt,en,ae,Lt):Wt(vt)),void 0!==Nt)return Nt;if(!k(vt))return vt;var ce=N(vt);if(ce){if(Nt=y(vt),!ue)return u(vt,Nt)}else{var Vt=p(vt),ne=Vt==et||"[object GeneratorFunction]"==Vt;if(A(vt))return c(vt,ue);if(Vt==W||Vt==Z||ne&&!ae){if(Nt=le||ne?{}:T(vt),!ue)return le?d(vt,h(Nt,vt)):t(vt,m(Nt,vt))}else{if(!mt[Vt])return ae?vt:{};Nt=C(vt,Vt,ue)}}Lt||(Lt=new a);var Le=Lt.get(vt);if(Le)return Le;Lt.set(vt,Nt),L(vt)?vt.forEach(function(Dt){Nt.add(Jt(Dt,Xt,Wt,Dt,vt,Lt))}):O(vt)&&vt.forEach(function(Dt,Yt){Nt.set(Yt,Jt(Dt,Xt,Wt,Yt,vt,Lt))});var De=ce?void 0:(nn?le?l:f:le?Y:J)(vt);return _(De||vt,function(Dt,Yt){De&&(Dt=vt[Yt=Dt]),v(Nt,Yt,Jt(Dt,Xt,Wt,Yt,vt,Lt))}),Nt}},920:(x,E,o)=>{var a=o(3867),_=Object.create,v=function(){function m(){}return function(h){if(!a(h))return{};if(_)return _(h);m.prototype=h;var c=new m;return m.prototype=void 0,c}}();x.exports=v},9026:(x,E,o)=>{var a=o(8022),v=o(9889)(a);x.exports=v},6681:(x,E,o)=>{var a=o(7786);x.exports=function(v,m,h){for(var c=-1,u=v.length;++c<u;){var t=v[c],d=m(t);if(null!=d&&(void 0===f?d==d&&!a(d):h(d,f)))var f=d,l=t}return l}},8711:(x,E,o)=>{var a=o(9026);x.exports=function(v,m){var h=[];return a(v,function(c,u,t){m(c,u,t)&&h.push(c)}),h}},2229:x=>{x.exports=function(o,a,_,v){for(var m=o.length,h=_+(v?1:-1);v?h--:++h<m;)if(a(o[h],h,o))return h;return-1}},6369:(x,E,o)=>{var a=o(4165),_=o(1006);x.exports=function v(m,h,c,u,t){var d=-1,f=m.length;for(c||(c=_),t||(t=[]);++d<f;){var l=m[d];h>0&&c(l)?h>1?v(l,h-1,c,u,t):a(t,l):u||(t[t.length]=l)}return t}},5290:(x,E,o)=>{var _=o(8269)();x.exports=_},8022:(x,E,o)=>{var a=o(5290),_=o(9108);x.exports=function(m,h){return m&&a(m,h,_)}},3436:(x,E,o)=>{var a=o(4667),_=o(2773);x.exports=function(m,h){for(var c=0,u=(h=a(h,m)).length;null!=m&&c<u;)m=m[_(h[c++])];return c&&c==u?m:void 0}},9215:(x,E,o)=>{var a=o(4165),_=o(1690);x.exports=function(m,h,c){var u=h(m);return _(m)?u:a(u,c(m))}},2802:(x,E,o)=>{var a=o(7333),_=o(1613),v=o(1244),c=a?a.toStringTag:void 0;x.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?_(t):v(t)}},8354:x=>{x.exports=function(o,a){return o>a}},731:x=>{var o=Object.prototype.hasOwnProperty;x.exports=function(_,v){return null!=_&&o.call(_,v)}},5333:x=>{x.exports=function(o,a){return null!=o&&a in Object(o)}},2166:(x,E,o)=>{var a=o(2229),_=o(2469),v=o(4299);x.exports=function(h,c,u){return c==c?v(h,c,u):a(h,_,u)}},7090:(x,E,o)=>{var a=o(2802),_=o(7503);x.exports=function(h){return _(h)&&"[object Arguments]"==a(h)}},696:(x,E,o)=>{var a=o(6863),_=o(7503);x.exports=function v(m,h,c,u,t){return m===h||(null==m||null==h||!_(m)&&!_(h)?m!=m&&h!=h:a(m,h,c,u,v,t))}},6863:(x,E,o)=>{var a=o(3667),_=o(7667),v=o(4630),m=o(3040),h=o(6663),c=o(1690),u=o(4444),t=o(7679),f="[object Arguments]",l="[object Array]",p="[object Object]",C=Object.prototype.hasOwnProperty;x.exports=function(N,A,O,k,L,J){var Y=c(N),V=c(A),Q=Y?l:h(N),I=V?l:h(A),Z=(Q=Q==f?p:Q)==p,M=(I=I==f?p:I)==p,P=Q==I;if(P&&u(N)){if(!u(A))return!1;Y=!0,Z=!1}if(P&&!Z)return J||(J=new a),Y||t(N)?_(N,A,O,k,L,J):v(N,A,Q,O,k,L,J);if(!(1&O)){var B=Z&&C.call(N,"__wrapped__"),H=M&&C.call(A,"__wrapped__");if(B||H){var et=B?N.value():N,G=H?A.value():A;return J||(J=new a),L(et,G,O,k,J)}}return!!P&&(J||(J=new a),m(N,A,O,k,L,J))}},3434:(x,E,o)=>{var a=o(6663),_=o(7503);x.exports=function(h){return _(h)&&"[object Map]"==a(h)}},8783:(x,E,o)=>{var a=o(3667),_=o(696);x.exports=function(c,u,t,d){var f=t.length,l=f,p=!d;if(null==c)return!l;for(c=Object(c);f--;){var y=t[f];if(p&&y[2]?y[1]!==c[y[0]]:!(y[0]in c))return!1}for(;++f<l;){var C=(y=t[f])[0],T=c[C],N=y[1];if(p&&y[2]){if(void 0===T&&!(C in c))return!1}else{var A=new a;if(d)var O=d(T,N,C,c,u,A);if(!(void 0===O?_(N,T,3,d,A):O))return!1}}return!0}},2469:x=>{x.exports=function(o){return o!=o}},3540:(x,E,o)=>{var a=o(5836),_=o(8466),v=o(3867),m=o(1217),c=/^\[object .+?Constructor\]$/,l=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");x.exports=function(y){return!(!v(y)||_(y))&&(a(y)?l:c).test(m(y))}},7495:(x,E,o)=>{var a=o(6663),_=o(7503);x.exports=function(h){return _(h)&&"[object Set]"==a(h)}},9390:(x,E,o)=>{var a=o(2802),_=o(8613),v=o(7503),P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1,x.exports=function(H){return v(H)&&_(H.length)&&!!P[a(H)]}},5245:(x,E,o)=>{var a=o(9433),_=o(8608),v=o(290),m=o(1690),h=o(3354);x.exports=function(u){return"function"==typeof u?u:null==u?v:"object"==typeof u?m(u)?_(u[0],u[1]):a(u):h(u)}},2488:(x,E,o)=>{var a=o(8845),_=o(6700),m=Object.prototype.hasOwnProperty;x.exports=function(c){if(!a(c))return _(c);var u=[];for(var t in Object(c))m.call(c,t)&&"constructor"!=t&&u.push(t);return u}},762:(x,E,o)=>{var a=o(3867),_=o(8845),v=o(5618),h=Object.prototype.hasOwnProperty;x.exports=function(u){if(!a(u))return v(u);var t=_(u),d=[];for(var f in u)"constructor"==f&&(t||!h.call(u,f))||d.push(f);return d}},1054:x=>{x.exports=function(o,a){return o<a}},8641:(x,E,o)=>{var a=o(9026),_=o(3406);x.exports=function(m,h){var c=-1,u=_(m)?Array(m.length):[];return a(m,function(t,d,f){u[++c]=h(t,d,f)}),u}},9433:(x,E,o)=>{var a=o(8783),_=o(8834),v=o(3587);x.exports=function(h){var c=_(h);return 1==c.length&&c[0][2]?v(c[0][0],c[0][1]):function(u){return u===h||a(u,h,c)}}},8608:(x,E,o)=>{var a=o(696),_=o(8102),v=o(8303),m=o(9743),h=o(5774),c=o(3587),u=o(2773);x.exports=function(l,p){return m(l)&&h(p)?c(u(l),p):function(y){var C=_(y,l);return void 0===C&&C===p?v(y,l):a(p,C,3)}}},9085:(x,E,o)=>{var a=o(3667),_=o(3530),v=o(5290),m=o(3607),h=o(3867),c=o(2970),u=o(5959);x.exports=function t(d,f,l,p,y){d!==f&&v(f,function(C,T){if(y||(y=new a),h(C))m(d,f,T,l,t,p,y);else{var N=p?p(u(d,T),C,T+"",d,f,y):void 0;void 0===N&&(N=C),_(d,T,N)}},c)}},3607:(x,E,o)=>{var a=o(3530),_=o(694),v=o(6282),m=o(3595),h=o(1563),c=o(2952),u=o(1690),t=o(2027),d=o(4444),f=o(5836),l=o(3867),p=o(2358),y=o(7679),C=o(5959),T=o(1413);x.exports=function(A,O,k,L,J,Y,V){var Q=C(A,k),I=C(O,k),Z=V.get(I);if(Z)a(A,k,Z);else{var M=Y?Y(Q,I,k+"",A,O,V):void 0,P=void 0===M;if(P){var B=u(I),H=!B&&d(I),et=!B&&!H&&y(I);M=I,B||H||et?u(Q)?M=Q:t(Q)?M=m(Q):H?(P=!1,M=_(I,!0)):et?(P=!1,M=v(I,!0)):M=[]:p(I)||c(I)?(M=Q,c(Q)?M=T(Q):(!l(Q)||f(Q))&&(M=h(I))):P=!1}P&&(V.set(I,M),J(M,I,L,Y,V),V.delete(I)),a(A,k,M)}}},7977:(x,E,o)=>{var a=o(4992),_=o(3436),v=o(5245),m=o(8641),h=o(8421),c=o(544),u=o(5379),t=o(290),d=o(1690);x.exports=function(l,p,y){p=p.length?a(p,function(N){return d(N)?function(A){return _(A,1===N.length?N[0]:N)}:N}):[t];var C=-1;p=a(p,c(v));var T=m(l,function(N,A,O){return{criteria:a(p,function(L){return L(N)}),index:++C,value:N}});return h(T,function(N,A){return u(N,A,y)})}},6737:(x,E,o)=>{var a=o(2897),_=o(8303);x.exports=function(m,h){return a(m,h,function(c,u){return _(m,u)})}},2897:(x,E,o)=>{var a=o(3436),_=o(8262),v=o(4667);x.exports=function(h,c,u){for(var t=-1,d=c.length,f={};++t<d;){var l=c[t],p=a(h,l);u(p,l)&&_(f,v(l,h),p)}return f}},8840:x=>{x.exports=function(o){return function(a){return null==a?void 0:a[o]}}},9866:(x,E,o)=>{var a=o(3436);x.exports=function(v){return function(m){return a(m,v)}}},863:x=>{var E=Math.ceil,o=Math.max;x.exports=function(_,v,m,h){for(var c=-1,u=o(E((v-_)/(m||1)),0),t=Array(u);u--;)t[h?u:++c]=_,_+=m;return t}},5105:x=>{x.exports=function(o,a,_,v,m){return m(o,function(h,c,u){_=v?(v=!1,h):a(_,h,c,u)}),_}},4441:(x,E,o)=>{var a=o(290),_=o(5529),v=o(9009);x.exports=function(h,c){return v(_(h,c,a),h+"")}},8262:(x,E,o)=>{var a=o(3898),_=o(4667),v=o(968),m=o(3867),h=o(2773);x.exports=function(u,t,d,f){if(!m(u))return u;for(var l=-1,p=(t=_(t,u)).length,y=p-1,C=u;null!=C&&++l<p;){var T=h(t[l]),N=d;if("__proto__"===T||"constructor"===T||"prototype"===T)return u;if(l!=y){var A=C[T];void 0===(N=f?f(A,T,C):void 0)&&(N=m(A)?A:v(t[l+1])?[]:{})}a(C,T,N),C=C[T]}return u}},9372:(x,E,o)=>{var a=o(5654),_=o(395),v=o(290);x.exports=_?function(h,c){return _(h,"toString",{configurable:!0,enumerable:!1,value:a(c),writable:!0})}:v},8421:x=>{x.exports=function(o,a){var _=o.length;for(o.sort(a);_--;)o[_]=o[_].value;return o}},8282:x=>{x.exports=function(o,a){for(var _=-1,v=Array(o);++_<o;)v[_]=a(_);return v}},8166:(x,E,o)=>{var a=o(7333),_=o(4992),v=o(1690),m=o(7786),c=a?a.prototype:void 0,u=c?c.toString:void 0;x.exports=function t(d){if("string"==typeof d)return d;if(v(d))return _(d,t)+"";if(m(d))return u?u.call(d):"";var f=d+"";return"0"==f&&1/d==-1/0?"-0":f}},3743:(x,E,o)=>{var a=o(7478),_=/^\s+/;x.exports=function(m){return m&&m.slice(0,a(m)+1).replace(_,"")}},544:x=>{x.exports=function(o){return function(a){return o(a)}}},3987:(x,E,o)=>{var a=o(8690),_=o(8588),v=o(679),m=o(3747),h=o(2252),c=o(7673);x.exports=function(d,f,l){var p=-1,y=_,C=d.length,T=!0,N=[],A=N;if(l)T=!1,y=v;else if(C>=200){var O=f?null:h(d);if(O)return c(O);T=!1,y=m,A=new a}else A=f?[]:N;t:for(;++p<C;){var k=d[p],L=f?f(k):k;if(k=l||0!==k?k:0,T&&L==L){for(var J=A.length;J--;)if(A[J]===L)continue t;f&&A.push(L),N.push(k)}else y(A,L,l)||(A!==N&&A.push(L),N.push(k))}return N}},253:(x,E,o)=>{var a=o(4992);x.exports=function(v,m){return a(m,function(h){return v[h]})}},5687:x=>{x.exports=function(o,a,_){for(var v=-1,m=o.length,h=a.length,c={};++v<m;)_(c,o[v],v<h?a[v]:void 0);return c}},3747:x=>{x.exports=function(o,a){return o.has(a)}},8727:(x,E,o)=>{var a=o(290);x.exports=function(v){return"function"==typeof v?v:a}},4667:(x,E,o)=>{var a=o(1690),_=o(9743),v=o(9775),m=o(1233);x.exports=function(c,u){return a(c)?c:_(c,u)?[c]:v(m(c))}},8461:(x,E,o)=>{var a=o(6820);x.exports=function(v){var m=new v.constructor(v.byteLength);return new a(m).set(new a(v)),m}},694:(x,E,o)=>{x=o.nmd(x);var a=o(7038),_=E&&!E.nodeType&&E,v=_&&x&&!x.nodeType&&x,h=v&&v.exports===_?a.Buffer:void 0,c=h?h.allocUnsafe:void 0;x.exports=function(t,d){if(d)return t.slice();var f=t.length,l=c?c(f):new t.constructor(f);return t.copy(l),l}},9757:(x,E,o)=>{var a=o(8461);x.exports=function(v,m){var h=m?a(v.buffer):v.buffer;return new v.constructor(h,v.byteOffset,v.byteLength)}},3615:x=>{var E=/\w*$/;x.exports=function(a){var _=new a.constructor(a.source,E.exec(a));return _.lastIndex=a.lastIndex,_}},2282:(x,E,o)=>{var a=o(7333),_=a?a.prototype:void 0,v=_?_.valueOf:void 0;x.exports=function(h){return v?Object(v.call(h)):{}}},6282:(x,E,o)=>{var a=o(8461);x.exports=function(v,m){var h=m?a(v.buffer):v.buffer;return new v.constructor(h,v.byteOffset,v.length)}},809:(x,E,o)=>{var a=o(7786);x.exports=function(v,m){if(v!==m){var h=void 0!==v,c=null===v,u=v==v,t=a(v),d=void 0!==m,f=null===m,l=m==m,p=a(m);if(!f&&!p&&!t&&v>m||t&&d&&l&&!f&&!p||c&&d&&l||!h&&l||!u)return 1;if(!c&&!t&&!p&&v<m||p&&h&&u&&!c&&!t||f&&h&&u||!d&&u||!l)return-1}return 0}},5379:(x,E,o)=>{var a=o(809);x.exports=function(v,m,h){for(var c=-1,u=v.criteria,t=m.criteria,d=u.length,f=h.length;++c<d;){var l=a(u[c],t[c]);if(l)return c>=f?l:l*("desc"==h[c]?-1:1)}return v.index-m.index}},3595:x=>{x.exports=function(o,a){var _=-1,v=o.length;for(a||(a=Array(v));++_<v;)a[_]=o[_];return a}},1694:(x,E,o)=>{var a=o(3898),_=o(2007);x.exports=function(m,h,c,u){var t=!c;c||(c={});for(var d=-1,f=h.length;++d<f;){var l=h[d],p=u?u(c[l],m[l],l,c,m):void 0;void 0===p&&(p=m[l]),t?_(c,l,p):a(c,l,p)}return c}},4746:(x,E,o)=>{var a=o(1694),_=o(296);x.exports=function(m,h){return a(m,_(m),h)}},8857:(x,E,o)=>{var a=o(1694),_=o(9572);x.exports=function(m,h){return a(m,_(m),h)}},3412:(x,E,o)=>{var a=o(7038);x.exports=a["__core-js_shared__"]},906:(x,E,o)=>{var a=o(4441),_=o(1100);x.exports=function(m){return a(function(h,c){var u=-1,t=c.length,d=t>1?c[t-1]:void 0,f=t>2?c[2]:void 0;for(d=m.length>3&&"function"==typeof d?(t--,d):void 0,f&&_(c[0],c[1],f)&&(d=t<3?void 0:d,t=1),h=Object(h);++u<t;){var l=c[u];l&&m(h,l,u,d)}return h})}},9889:(x,E,o)=>{var a=o(3406);x.exports=function(v,m){return function(h,c){if(null==h)return h;if(!a(h))return v(h,c);for(var u=h.length,t=m?u:-1,d=Object(h);(m?t--:++t<u)&&!1!==c(d[t],t,d););return h}}},8269:x=>{x.exports=function(o){return function(a,_,v){for(var m=-1,h=Object(a),c=v(a),u=c.length;u--;){var t=c[o?u:++m];if(!1===_(h[t],t,h))break}return a}}},4674:(x,E,o)=>{var a=o(5245),_=o(3406),v=o(9108);x.exports=function(h){return function(c,u,t){var d=Object(c);if(!_(c)){var f=a(u,3);c=v(c),u=function(p){return f(d[p],p,d)}}var l=h(c,u,t);return l>-1?d[f?c[l]:l]:void 0}}},8710:(x,E,o)=>{var a=o(863),_=o(1100),v=o(5152);x.exports=function(h){return function(c,u,t){return t&&"number"!=typeof t&&_(c,u,t)&&(u=t=void 0),c=v(c),void 0===u?(u=c,c=0):u=v(u),t=void 0===t?c<u?1:-1:v(t),a(c,u,t,h)}}},2252:(x,E,o)=>{var a=o(4918),_=o(9122),v=o(7673),h=a&&1/v(new a([,-0]))[1]==1/0?function(c){return new a(c)}:_;x.exports=h},395:(x,E,o)=>{var a=o(4153),_=function(){try{var v=a(Object,"defineProperty");return v({},"",{}),v}catch(m){}}();x.exports=_},7667:(x,E,o)=>{var a=o(8690),_=o(8141),v=o(3747);x.exports=function(u,t,d,f,l,p){var y=1&d,C=u.length,T=t.length;if(C!=T&&!(y&&T>C))return!1;var N=p.get(u),A=p.get(t);if(N&&A)return N==t&&A==u;var O=-1,k=!0,L=2&d?new a:void 0;for(p.set(u,t),p.set(t,u);++O<C;){var J=u[O],Y=t[O];if(f)var V=y?f(Y,J,O,t,u,p):f(J,Y,O,u,t,p);if(void 0!==V){if(V)continue;k=!1;break}if(L){if(!_(t,function(Q,I){if(!v(L,I)&&(J===Q||l(J,Q,d,f,p)))return L.push(I)})){k=!1;break}}else if(J!==Y&&!l(J,Y,d,f,p)){k=!1;break}}return p.delete(u),p.delete(t),k}},4630:(x,E,o)=>{var a=o(7333),_=o(6820),v=o(1166),m=o(7667),h=o(7461),c=o(7673),L=a?a.prototype:void 0,J=L?L.valueOf:void 0;x.exports=function(V,Q,I,Z,M,P,B){switch(I){case"[object DataView]":if(V.byteLength!=Q.byteLength||V.byteOffset!=Q.byteOffset)return!1;V=V.buffer,Q=Q.buffer;case"[object ArrayBuffer]":return!(V.byteLength!=Q.byteLength||!P(new _(V),new _(Q)));case"[object Boolean]":case"[object Date]":case"[object Number]":return v(+V,+Q);case"[object Error]":return V.name==Q.name&&V.message==Q.message;case"[object RegExp]":case"[object String]":return V==Q+"";case"[object Map]":var H=h;case"[object Set]":if(H||(H=c),V.size!=Q.size&&!(1&Z))return!1;var G=B.get(V);if(G)return G==Q;Z|=2,B.set(V,Q);var D=m(H(V),H(Q),Z,M,P,B);return B.delete(V),D;case"[object Symbol]":if(J)return J.call(V)==J.call(Q)}return!1}},3040:(x,E,o)=>{var a=o(8605),m=Object.prototype.hasOwnProperty;x.exports=function(c,u,t,d,f,l){var p=1&t,y=a(c),C=y.length;if(C!=a(u).length&&!p)return!1;for(var A=C;A--;){var O=y[A];if(!(p?O in u:m.call(u,O)))return!1}var k=l.get(c),L=l.get(u);if(k&&L)return k==u&&L==c;var J=!0;l.set(c,u),l.set(u,c);for(var Y=p;++A<C;){var V=c[O=y[A]],Q=u[O];if(d)var I=p?d(Q,V,O,u,c,l):d(V,Q,O,c,u,l);if(!(void 0===I?V===Q||f(V,Q,t,d,l):I)){J=!1;break}Y||(Y="constructor"==O)}if(J&&!Y){var Z=c.constructor,M=u.constructor;Z!=M&&"constructor"in c&&"constructor"in u&&!("function"==typeof Z&&Z instanceof Z&&"function"==typeof M&&M instanceof M)&&(J=!1)}return l.delete(c),l.delete(u),J}},58:(x,E,o)=>{var a=o(4694),_=o(5529),v=o(9009);x.exports=function(h){return v(_(h,void 0,a),h+"")}},1138:x=>{var E="object"==typeof global&&global&&global.Object===Object&&global;x.exports=E},8605:(x,E,o)=>{var a=o(9215),_=o(296),v=o(9108);x.exports=function(h){return a(h,v,_)}},1675:(x,E,o)=>{var a=o(9215),_=o(9572),v=o(2970);x.exports=function(h){return a(h,v,_)}},5556:(x,E,o)=>{var a=o(6586);x.exports=function(v,m){var h=v.__data__;return a(m)?h["string"==typeof m?"string":"hash"]:h.map}},8834:(x,E,o)=>{var a=o(5774),_=o(9108);x.exports=function(m){for(var h=_(m),c=h.length;c--;){var u=h[c],t=m[u];h[c]=[u,t,a(t)]}return h}},4153:(x,E,o)=>{var a=o(3540),_=o(6825);x.exports=function(m,h){var c=_(m,h);return a(c)?c:void 0}},2398:(x,E,o)=>{var _=o(3332)(Object.getPrototypeOf,Object);x.exports=_},1613:(x,E,o)=>{var a=o(7333),_=Object.prototype,v=_.hasOwnProperty,m=_.toString,h=a?a.toStringTag:void 0;x.exports=function(u){var t=v.call(u,h),d=u[h];try{u[h]=void 0;var f=!0}catch(p){}var l=m.call(u);return f&&(t?u[h]=d:delete u[h]),l}},296:(x,E,o)=>{var a=o(1375),_=o(5336),m=Object.prototype.propertyIsEnumerable,h=Object.getOwnPropertySymbols;x.exports=h?function(u){return null==u?[]:(u=Object(u),a(h(u),function(t){return m.call(u,t)}))}:_},9572:(x,E,o)=>{var a=o(4165),_=o(2398),v=o(296),m=o(5336);x.exports=Object.getOwnPropertySymbols?function(u){for(var t=[];u;)a(t,v(u)),u=_(u);return t}:m},6663:(x,E,o)=>{var a=o(1235),_=o(9046),v=o(7129),m=o(4918),h=o(4203),c=o(2802),u=o(1217),t="[object Map]",f="[object Promise]",l="[object Set]",p="[object WeakMap]",y="[object DataView]",C=u(a),T=u(_),N=u(v),A=u(m),O=u(h),k=c;(a&&k(new a(new ArrayBuffer(1)))!=y||_&&k(new _)!=t||v&&k(v.resolve())!=f||m&&k(new m)!=l||h&&k(new h)!=p)&&(k=function(L){var J=c(L),Y="[object Object]"==J?L.constructor:void 0,V=Y?u(Y):"";if(V)switch(V){case C:return y;case T:return t;case N:return f;case A:return l;case O:return p}return J}),x.exports=k},6825:x=>{x.exports=function(o,a){return null==o?void 0:o[a]}},2138:(x,E,o)=>{var a=o(4667),_=o(2952),v=o(1690),m=o(968),h=o(8613),c=o(2773);x.exports=function(t,d,f){for(var l=-1,p=(d=a(d,t)).length,y=!1;++l<p;){var C=c(d[l]);if(!(y=null!=t&&f(t,C)))break;t=t[C]}return y||++l!=p?y:!!(p=null==t?0:t.length)&&h(p)&&m(C,p)&&(v(t)||_(t))}},407:x=>{var c=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");x.exports=function(t){return c.test(t)}},9410:(x,E,o)=>{var a=o(5969);x.exports=function(){this.__data__=a?a(null):{},this.size=0}},1143:x=>{x.exports=function(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}},604:(x,E,o)=>{var a=o(5969),m=Object.prototype.hasOwnProperty;x.exports=function(c){var u=this.__data__;if(a){var t=u[c];return"__lodash_hash_undefined__"===t?void 0:t}return m.call(u,c)?u[c]:void 0}},584:(x,E,o)=>{var a=o(5969),v=Object.prototype.hasOwnProperty;x.exports=function(h){var c=this.__data__;return a?void 0!==c[h]:v.call(c,h)}},7792:(x,E,o)=>{var a=o(5969);x.exports=function(m,h){var c=this.__data__;return this.size+=this.has(m)?0:1,c[m]=a&&void 0===h?"__lodash_hash_undefined__":h,this}},2963:x=>{var o=Object.prototype.hasOwnProperty;x.exports=function(_){var v=_.length,m=new _.constructor(v);return v&&"string"==typeof _[0]&&o.call(_,"index")&&(m.index=_.index,m.input=_.input),m}},2143:(x,E,o)=>{var a=o(8461),_=o(9757),v=o(3615),m=o(2282),h=o(6282);x.exports=function(Z,M,P){var B=Z.constructor;switch(M){case"[object ArrayBuffer]":return a(Z);case"[object Boolean]":case"[object Date]":return new B(+Z);case"[object DataView]":return _(Z,P);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return h(Z,P);case"[object Map]":return new B;case"[object Number]":case"[object String]":return new B(Z);case"[object RegExp]":return v(Z);case"[object Set]":return new B;case"[object Symbol]":return m(Z)}}},1563:(x,E,o)=>{var a=o(920),_=o(2398),v=o(8845);x.exports=function(h){return"function"!=typeof h.constructor||v(h)?{}:a(_(h))}},1006:(x,E,o)=>{var a=o(7333),_=o(2952),v=o(1690),m=a?a.isConcatSpreadable:void 0;x.exports=function(c){return v(c)||_(c)||!!(m&&c&&c[m])}},968:x=>{var o=/^(?:0|[1-9]\d*)$/;x.exports=function(_,v){var m=typeof _;return!!(v=null==v?9007199254740991:v)&&("number"==m||"symbol"!=m&&o.test(_))&&_>-1&&_%1==0&&_<v}},1100:(x,E,o)=>{var a=o(1166),_=o(3406),v=o(968),m=o(3867);x.exports=function(c,u,t){if(!m(t))return!1;var d=typeof u;return!!("number"==d?_(t)&&v(u,t.length):"string"==d&&u in t)&&a(t[u],c)}},9743:(x,E,o)=>{var a=o(1690),_=o(7786),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;x.exports=function(c,u){if(a(c))return!1;var t=typeof c;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=c&&!_(c))||m.test(c)||!v.test(c)||null!=u&&c in Object(u)}},6586:x=>{x.exports=function(o){var a=typeof o;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==o:null===o}},8466:(x,E,o)=>{var m,a=o(3412),_=(m=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";x.exports=function(m){return!!_&&_ in m}},8845:x=>{var E=Object.prototype;x.exports=function(a){var _=a&&a.constructor;return a===("function"==typeof _&&_.prototype||E)}},5774:(x,E,o)=>{var a=o(3867);x.exports=function(v){return v==v&&!a(v)}},3391:x=>{x.exports=function(){this.__data__=[],this.size=0}},8971:(x,E,o)=>{var a=o(5758),v=Array.prototype.splice;x.exports=function(h){var c=this.__data__,u=a(c,h);return!(u<0||(u==c.length-1?c.pop():v.call(c,u,1),--this.size,0))}},8858:(x,E,o)=>{var a=o(5758);x.exports=function(v){var m=this.__data__,h=a(m,v);return h<0?void 0:m[h][1]}},3913:(x,E,o)=>{var a=o(5758);x.exports=function(v){return a(this.__data__,v)>-1}},8944:(x,E,o)=>{var a=o(5758);x.exports=function(v,m){var h=this.__data__,c=a(h,v);return c<0?(++this.size,h.push([v,m])):h[c][1]=m,this}},536:(x,E,o)=>{var a=o(1505),_=o(3545),v=o(9046);x.exports=function(){this.size=0,this.__data__={hash:new a,map:new(v||_),string:new a}}},1502:(x,E,o)=>{var a=o(5556);x.exports=function(v){var m=a(this,v).delete(v);return this.size-=m?1:0,m}},4960:(x,E,o)=>{var a=o(5556);x.exports=function(v){return a(this,v).get(v)}},1539:(x,E,o)=>{var a=o(5556);x.exports=function(v){return a(this,v).has(v)}},4138:(x,E,o)=>{var a=o(5556);x.exports=function(v,m){var h=a(this,v),c=h.size;return h.set(v,m),this.size+=h.size==c?0:1,this}},7461:x=>{x.exports=function(o){var a=-1,_=Array(o.size);return o.forEach(function(v,m){_[++a]=[m,v]}),_}},3587:x=>{x.exports=function(o,a){return function(_){return null!=_&&_[o]===a&&(void 0!==a||o in Object(_))}}},3911:(x,E,o)=>{var a=o(7425);x.exports=function(m){var h=a(m,function(u){return 500===c.size&&c.clear(),u}),c=h.cache;return h}},5969:(x,E,o)=>{var _=o(4153)(Object,"create");x.exports=_},6700:(x,E,o)=>{var _=o(3332)(Object.keys,Object);x.exports=_},5618:x=>{x.exports=function(o){var a=[];if(null!=o)for(var _ in Object(o))a.push(_);return a}},938:(x,E,o)=>{x=o.nmd(x);var a=o(1138),_=E&&!E.nodeType&&E,v=_&&x&&!x.nodeType&&x,h=v&&v.exports===_&&a.process,c=function(){try{return v&&v.require&&v.require("util").types||h&&h.binding&&h.binding("util")}catch(t){}}();x.exports=c},1244:x=>{var o=Object.prototype.toString;x.exports=function(_){return o.call(_)}},3332:x=>{x.exports=function(o,a){return function(_){return o(a(_))}}},5529:(x,E,o)=>{var a=o(1638),_=Math.max;x.exports=function(m,h,c){return h=_(void 0===h?m.length-1:h,0),function(){for(var u=arguments,t=-1,d=_(u.length-h,0),f=Array(d);++t<d;)f[t]=u[h+t];t=-1;for(var l=Array(h+1);++t<h;)l[t]=u[t];return l[h]=c(f),a(m,this,l)}}},7038:(x,E,o)=>{var a=o(1138),_="object"==typeof self&&self&&self.Object===Object&&self,v=a||_||Function("return this")();x.exports=v},5959:x=>{x.exports=function(o,a){if(("constructor"!==a||"function"!=typeof o[a])&&"__proto__"!=a)return o[a]}},365:x=>{x.exports=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this}},8235:x=>{x.exports=function(o){return this.__data__.has(o)}},7673:x=>{x.exports=function(o){var a=-1,_=Array(o.size);return o.forEach(function(v){_[++a]=v}),_}},9009:(x,E,o)=>{var a=o(9372),v=o(4094)(a);x.exports=v},4094:x=>{var a=Date.now;x.exports=function(v){var m=0,h=0;return function(){var c=a(),u=16-(c-h);if(h=c,u>0){if(++m>=800)return arguments[0]}else m=0;return v.apply(void 0,arguments)}}},8034:(x,E,o)=>{var a=o(3545);x.exports=function(){this.__data__=new a,this.size=0}},9223:x=>{x.exports=function(o){var a=this.__data__,_=a.delete(o);return this.size=a.size,_}},5887:x=>{x.exports=function(o){return this.__data__.get(o)}},1450:x=>{x.exports=function(o){return this.__data__.has(o)}},1386:(x,E,o)=>{var a=o(3545),_=o(9046),v=o(3177);x.exports=function(c,u){var t=this.__data__;if(t instanceof a){var d=t.__data__;if(!_||d.length<199)return d.push([c,u]),this.size=++t.size,this;t=this.__data__=new v(d)}return t.set(c,u),this.size=t.size,this}},4299:x=>{x.exports=function(o,a,_){for(var v=_-1,m=o.length;++v<m;)if(o[v]===a)return v;return-1}},122:(x,E,o)=>{var a=o(8956),_=o(407),v=o(5154);x.exports=function(h){return _(h)?v(h):a(h)}},9775:(x,E,o)=>{var a=o(3911),_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,m=a(function(h){var c=[];return 46===h.charCodeAt(0)&&c.push(""),h.replace(_,function(u,t,d,f){c.push(d?f.replace(v,"$1"):t||u)}),c});x.exports=m},2773:(x,E,o)=>{var a=o(7786);x.exports=function(m){if("string"==typeof m||a(m))return m;var h=m+"";return"0"==h&&1/m==-1/0?"-0":h}},1217:x=>{var o=Function.prototype.toString;x.exports=function(_){if(null!=_){try{return o.call(_)}catch(v){}try{return _+""}catch(v){}}return""}},7478:x=>{var E=/\s/;x.exports=function(a){for(var _=a.length;_--&&E.test(a.charAt(_)););return _}},5154:x=>{var E="\\ud800-\\udfff",h="["+E+"]",c="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",u="\\ud83c[\\udffb-\\udfff]",d="[^"+E+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",y="(?:"+c+"|"+u+")?",C="[\\ufe0e\\ufe0f]?",N=C+y+"(?:\\u200d(?:"+[d,f,l].join("|")+")"+C+y+")*",A="(?:"+[d+c+"?",c,f,l,h].join("|")+")",O=RegExp(u+"(?="+u+")|"+A+N,"g");x.exports=function(L){for(var J=O.lastIndex=0;O.test(L);)++J;return J}},3742:(x,E,o)=>{var a=o(7007);x.exports=function(m){return a(m,4)}},7524:(x,E,o)=>{var a=o(7007);x.exports=function(h){return a(h,5)}},5654:x=>{x.exports=function(o){return function(){return o}}},6726:(x,E,o)=>{var a=o(4441),_=o(1166),v=o(1100),m=o(2970),h=Object.prototype,c=h.hasOwnProperty,u=a(function(t,d){t=Object(t);var f=-1,l=d.length,p=l>2?d[2]:void 0;for(p&&v(d[0],d[1],p)&&(l=1);++f<l;)for(var y=d[f],C=m(y),T=-1,N=C.length;++T<N;){var A=C[T],O=t[A];(void 0===O||_(O,h[A])&&!c.call(t,A))&&(t[A]=y[A])}return t});x.exports=u},3718:(x,E,o)=>{x.exports=o(4733)},1166:x=>{x.exports=function(o,a){return o===a||o!=o&&a!=a}},3834:(x,E,o)=>{var a=o(1375),_=o(8711),v=o(5245),m=o(1690);x.exports=function(c,u){return(m(c)?a:_)(c,v(u,3))}},8990:(x,E,o)=>{var v=o(4674)(o(4857));x.exports=v},4857:(x,E,o)=>{var a=o(2229),_=o(5245),v=o(2781),m=Math.max;x.exports=function(c,u,t){var d=null==c?0:c.length;if(!d)return-1;var f=null==t?0:v(t);return f<0&&(f=m(d+f,0)),a(c,_(u,3),f)}},4694:(x,E,o)=>{var a=o(6369);x.exports=function(v){return null!=v&&v.length?a(v,1):[]}},4733:(x,E,o)=>{var a=o(4500),_=o(9026),v=o(8727),m=o(1690);x.exports=function(c,u){return(m(c)?a:_)(c,v(u))}},8577:(x,E,o)=>{var a=o(5290),_=o(8727),v=o(2970);x.exports=function(h,c){return null==h?h:a(h,_(c),v)}},8102:(x,E,o)=>{var a=o(3436);x.exports=function(v,m,h){var c=null==v?void 0:a(v,m);return void 0===c?h:c}},2335:(x,E,o)=>{var a=o(731),_=o(2138);x.exports=function(m,h){return null!=m&&_(m,h,a)}},8303:(x,E,o)=>{var a=o(5333),_=o(2138);x.exports=function(m,h){return null!=m&&_(m,h,a)}},290:x=>{x.exports=function(o){return o}},2952:(x,E,o)=>{var a=o(7090),_=o(7503),v=Object.prototype,m=v.hasOwnProperty,h=v.propertyIsEnumerable,c=a(function(){return arguments}())?a:function(u){return _(u)&&m.call(u,"callee")&&!h.call(u,"callee")};x.exports=c},1690:x=>{x.exports=Array.isArray},3406:(x,E,o)=>{var a=o(5836),_=o(8613);x.exports=function(m){return null!=m&&_(m.length)&&!a(m)}},2027:(x,E,o)=>{var a=o(3406),_=o(7503);x.exports=function(m){return _(m)&&a(m)}},4444:(x,E,o)=>{x=o.nmd(x);var a=o(7038),_=o(1711),v=E&&!E.nodeType&&E,m=v&&x&&!x.nodeType&&x,c=m&&m.exports===v?a.Buffer:void 0;x.exports=(c?c.isBuffer:void 0)||_},2232:(x,E,o)=>{var a=o(2488),_=o(6663),v=o(2952),m=o(1690),h=o(3406),c=o(4444),u=o(8845),t=o(7679),p=Object.prototype.hasOwnProperty;x.exports=function(C){if(null==C)return!0;if(h(C)&&(m(C)||"string"==typeof C||"function"==typeof C.splice||c(C)||t(C)||v(C)))return!C.length;var T=_(C);if("[object Map]"==T||"[object Set]"==T)return!C.size;if(u(C))return!a(C).length;for(var N in C)if(p.call(C,N))return!1;return!0}},5836:(x,E,o)=>{var a=o(2802),_=o(3867);x.exports=function(t){if(!_(t))return!1;var d=a(t);return"[object Function]"==d||"[object GeneratorFunction]"==d||"[object AsyncFunction]"==d||"[object Proxy]"==d}},8613:x=>{x.exports=function(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991}},2e3:(x,E,o)=>{var a=o(3434),_=o(544),v=o(938),m=v&&v.isMap,h=m?_(m):a;x.exports=h},3867:x=>{x.exports=function(o){var a=typeof o;return null!=o&&("object"==a||"function"==a)}},7503:x=>{x.exports=function(o){return null!=o&&"object"==typeof o}},2358:(x,E,o)=>{var a=o(2802),_=o(2398),v=o(7503),u=Function.prototype.toString,t=Object.prototype.hasOwnProperty,d=u.call(Object);x.exports=function(l){if(!v(l)||"[object Object]"!=a(l))return!1;var p=_(l);if(null===p)return!0;var y=t.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&u.call(y)==d}},8855:(x,E,o)=>{var a=o(7495),_=o(544),v=o(938),m=v&&v.isSet,h=m?_(m):a;x.exports=h},4871:(x,E,o)=>{var a=o(2802),_=o(1690),v=o(7503);x.exports=function(c){return"string"==typeof c||!_(c)&&v(c)&&"[object String]"==a(c)}},7786:(x,E,o)=>{var a=o(2802),_=o(7503);x.exports=function(h){return"symbol"==typeof h||_(h)&&"[object Symbol]"==a(h)}},7679:(x,E,o)=>{var a=o(9390),_=o(544),v=o(938),m=v&&v.isTypedArray,h=m?_(m):a;x.exports=h},9569:x=>{x.exports=function(o){return void 0===o}},9108:(x,E,o)=>{var a=o(1890),_=o(2488),v=o(3406);x.exports=function(h){return v(h)?a(h):_(h)}},2970:(x,E,o)=>{var a=o(1890),_=o(762),v=o(3406);x.exports=function(h){return v(h)?a(h,!0):_(h)}},7842:x=>{x.exports=function(o){var a=null==o?0:o.length;return a?o[a-1]:void 0}},9718:(x,E,o)=>{var a=o(4992),_=o(5245),v=o(8641),m=o(1690);x.exports=function(c,u){return(m(c)?a:v)(c,_(u,3))}},182:(x,E,o)=>{var a=o(2007),_=o(8022),v=o(5245);x.exports=function(h,c){var u={};return c=v(c,3),_(h,function(t,d,f){a(u,d,c(t,d,f))}),u}},1334:(x,E,o)=>{var a=o(6681),_=o(8354),v=o(290);x.exports=function(h){return h&&h.length?a(h,v,_):void 0}},7425:(x,E,o)=>{var a=o(3177);function v(m,h){if("function"!=typeof m||null!=h&&"function"!=typeof h)throw new TypeError("Expected a function");var c=function(){var u=arguments,t=h?h.apply(this,u):u[0],d=c.cache;if(d.has(t))return d.get(t);var f=m.apply(this,u);return c.cache=d.set(t,f)||d,f};return c.cache=new(v.Cache||a),c}v.Cache=a,x.exports=v},3912:(x,E,o)=>{var a=o(9085),v=o(906)(function(m,h,c){a(m,h,c)});x.exports=v},1518:(x,E,o)=>{var a=o(6681),_=o(1054),v=o(290);x.exports=function(h){return h&&h.length?a(h,v,_):void 0}},5353:(x,E,o)=>{var a=o(6681),_=o(5245),v=o(1054);x.exports=function(h,c){return h&&h.length?a(h,_(c,2),v):void 0}},9122:x=>{x.exports=function(){}},765:(x,E,o)=>{var a=o(7038);x.exports=function(){return a.Date.now()}},1133:(x,E,o)=>{var a=o(6737),v=o(58)(function(m,h){return null==m?{}:a(m,h)});x.exports=v},3354:(x,E,o)=>{var a=o(8840),_=o(9866),v=o(9743),m=o(2773);x.exports=function(c){return v(c)?a(m(c)):_(c)}},1221:(x,E,o)=>{var _=o(8710)();x.exports=_},6101:(x,E,o)=>{var a=o(9731),_=o(9026),v=o(5245),m=o(5105),h=o(1690);x.exports=function(u,t,d){var f=h(u)?a:m,l=arguments.length<3;return f(u,v(t,4),d,l,_)}},4951:(x,E,o)=>{var a=o(2488),_=o(6663),v=o(3406),m=o(4871),h=o(122);x.exports=function(d){if(null==d)return 0;if(v(d))return m(d)?h(d):d.length;var f=_(d);return"[object Map]"==f||"[object Set]"==f?d.size:a(d).length}},280:(x,E,o)=>{var a=o(6369),_=o(7977),v=o(4441),m=o(1100),h=v(function(c,u){if(null==c)return[];var t=u.length;return t>1&&m(c,u[0],u[1])?u=[]:t>2&&m(u[0],u[1],u[2])&&(u=[u[0]]),_(c,a(u,1),[])});x.exports=h},5336:x=>{x.exports=function(){return[]}},1711:x=>{x.exports=function(){return!1}},5152:(x,E,o)=>{var a=o(5038),_=1/0;x.exports=function(h){return h?(h=a(h))===_||h===-_?17976931348623157e292*(h<0?-1:1):h==h?h:0:0===h?h:0}},2781:(x,E,o)=>{var a=o(5152);x.exports=function(v){var m=a(v),h=m%1;return m==m?h?m-h:m:0}},5038:(x,E,o)=>{var a=o(3743),_=o(3867),v=o(7786),h=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,t=parseInt;x.exports=function(f){if("number"==typeof f)return f;if(v(f))return NaN;if(_(f)){var l="function"==typeof f.valueOf?f.valueOf():f;f=_(l)?l+"":l}if("string"!=typeof f)return 0===f?f:+f;f=a(f);var p=c.test(f);return p||u.test(f)?t(f.slice(2),p?2:8):h.test(f)?NaN:+f}},1413:(x,E,o)=>{var a=o(1694),_=o(2970);x.exports=function(m){return a(m,_(m))}},1233:(x,E,o)=>{var a=o(8166);x.exports=function(v){return null==v?"":a(v)}},3593:(x,E,o)=>{var a=o(4500),_=o(920),v=o(8022),m=o(5245),h=o(2398),c=o(1690),u=o(4444),t=o(5836),d=o(3867),f=o(7679);x.exports=function(p,y,C){var T=c(p),N=T||u(p)||f(p);if(y=m(y,4),null==C){var A=p&&p.constructor;C=N?T?new A:[]:d(p)&&t(A)?_(h(p)):{}}return(N?a:v)(p,function(O,k,L){return y(C,O,k,L)}),C}},9728:(x,E,o)=>{var a=o(6369),_=o(4441),v=o(3987),m=o(2027),h=_(function(c){return v(a(c,1,m,!0))});x.exports=h},5927:(x,E,o)=>{var a=o(1233),_=0;x.exports=function(m){var h=++_;return a(m)+h}},3348:(x,E,o)=>{var a=o(253),_=o(9108);x.exports=function(m){return null==m?[]:a(m,_(m))}},1507:(x,E,o)=>{var a=o(3898),_=o(5687);x.exports=function(m,h){return _(m||[],h||[],a)}},6703:(x,E,o)=>{"use strict";function a(_){for(var v in _)E.hasOwnProperty(v)||(E[v]=_[v])}Object.defineProperty(E,"__esModule",{value:!0}),a(o(46)),a(o(9755)),a(o(9737)),a(o(5872)),a(o(6573)),a(o(8833)),a(o(1111)),a(o(9739)),a(o(1468)),a(o(9347)),a(o(9516)),a(o(3294)),a(o(7262)),a(o(5259)),a(o(3535)),a(o(8344))},46:function(x,E,o){"use strict";var h,a=this&&this.__extends||(h=function(c,u){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,d){t.__proto__=d}||function(t,d){for(var f in d)d.hasOwnProperty(f)&&(t[f]=d[f])})(c,u)},function(c,u){function t(){this.constructor=c}h(c,u),c.prototype=null===u?Object.create(u):(t.prototype=u.prototype,new t)});Object.defineProperty(E,"__esModule",{value:!0});var _=o(1111),v=function(h){function c(u){var t=h.call(this)||this,f=u;return f.trigger&&(t.trigger=f.trigger),f.kick&&(t.kick=f.kick),f.drag&&(t.drag=f.drag),f.on&&(t.on=f.on),t.dragstart=t.dragStart=_.Layout.dragStart,t.dragend=t.dragEnd=_.Layout.dragEnd,t}return a(c,h),c.prototype.trigger=function(u){},c.prototype.kick=function(){},c.prototype.drag=function(){},c.prototype.on=function(u,t){return this},c}(_.Layout);E.LayoutAdaptor=v,E.adaptor=function(h){return new v(h)}},8344:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a=o(1111),_=o(6573);E.gridify=function(c,u,t,d){return c.cola.start(0,0,0,10,!1),function(c,u,t,d){c.forEach(function(l){l.routerNode={name:l.name,bounds:l.bounds.inflate(-t)}}),u.forEach(function(l){l.routerNode={bounds:l.bounds.inflate(-d),children:(void 0!==l.groups?l.groups.map(function(p){return c.length+p.id}):[]).concat(void 0!==l.leaves?l.leaves.map(function(p){return p.index}):[])}});var f=c.concat(u).map(function(l,p){return l.routerNode.id=p,l.routerNode});return new _.GridRouter(f,{getChildren:function(l){return l.children},getBounds:function(l){return l.bounds}},t-d)}(c.cola.nodes(),c.cola.groups(),t,d).routeEdges(c.powerGraph.powerEdges,u,function(l){return l.source.routerNode.id},function(l){return l.target.routerNode.id})},E.powerGraphGridLayout=function(c,u,t){var d;c.nodes.forEach(function(y,C){return y.index=C}),(new a.Layout).avoidOverlaps(!1).nodes(c.nodes).links(c.links).powerGraphGroups(function(y){(d=y).groups.forEach(function(C){return C.padding=t})});var f=c.nodes.length,l=[],p=c.nodes.slice(0);return p.forEach(function(y,C){return y.index=C}),d.groups.forEach(function(y){var C=y.index=y.id+f;p.push(y),void 0!==y.leaves&&y.leaves.forEach(function(T){return l.push({source:C,target:T.index})}),void 0!==y.groups&&y.groups.forEach(function(T){return l.push({source:C,target:T.id+f})})}),d.powerEdges.forEach(function(y){l.push({source:y.source.index,target:y.target.index})}),(new a.Layout).size(u).nodes(p).links(l).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new a.Layout).convergenceThreshold(.001).size(u).avoidOverlaps(!0).nodes(c.nodes).links(c.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(y){(d=y).groups.forEach(function(C){C.padding=t})}).start(50,0,100,0,!1),powerGraph:d}}},9755:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a=o(8965),_=o(4910);E.d3adaptor=function(h){return!h||function(h){return h.version&&null!==h.version.match(/^3\./)}(h)?new a.D3StyleLayoutAdaptor:new _.D3StyleLayoutAdaptor(h)}},8965:function(x,E,o){"use strict";var h,a=this&&this.__extends||(h=function(c,u){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,d){t.__proto__=d}||function(t,d){for(var f in d)d.hasOwnProperty(f)&&(t[f]=d[f])})(c,u)},function(c,u){function t(){this.constructor=c}h(c,u),c.prototype=null===u?Object.create(u):(t.prototype=u.prototype,new t)});Object.defineProperty(E,"__esModule",{value:!0});var _=o(1111),v=function(h){function c(){var u=h.call(this)||this;u.event=d3.dispatch(_.EventType[_.EventType.start],_.EventType[_.EventType.tick],_.EventType[_.EventType.end]);var t=u;return u.drag=function(){if(!f)var f=d3.behavior.drag().origin(_.Layout.dragOrigin).on("dragstart.d3adaptor",_.Layout.dragStart).on("drag.d3adaptor",function(l){_.Layout.drag(l,d3.event),t.resume()}).on("dragend.d3adaptor",_.Layout.dragEnd);if(!arguments.length)return f;this.call(f)},u}return a(c,h),c.prototype.trigger=function(u){var t={type:_.EventType[u.type],alpha:u.alpha,stress:u.stress};this.event[t.type](t)},c.prototype.kick=function(){var u=this;d3.timer(function(){return h.prototype.tick.call(u)})},c.prototype.on=function(u,t){return this.event.on("string"==typeof u?u:_.EventType[u],t),this},c}(_.Layout);E.D3StyleLayoutAdaptor=v,E.d3adaptor=function(){return new v}},4910:function(x,E,o){"use strict";var m,a=this&&this.__extends||(m=function(h,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,t){u.__proto__=t}||function(u,t){for(var d in t)t.hasOwnProperty(d)&&(u[d]=t[d])})(h,c)},function(h,c){function u(){this.constructor=h}m(h,c),h.prototype=null===c?Object.create(c):(u.prototype=c.prototype,new u)});Object.defineProperty(E,"__esModule",{value:!0});var _=o(1111),v=function(m){function h(c){var u=m.call(this)||this;u.d3Context=c,u.event=c.dispatch(_.EventType[_.EventType.start],_.EventType[_.EventType.tick],_.EventType[_.EventType.end]);var t=u;return u.drag=function(){if(!f)var f=c.drag().subject(_.Layout.dragOrigin).on("start.d3adaptor",_.Layout.dragStart).on("drag.d3adaptor",function(l){_.Layout.drag(l,c.event),t.resume()}).on("end.d3adaptor",_.Layout.dragEnd);if(!arguments.length)return f;arguments[0].call(f)},u}return a(h,m),h.prototype.trigger=function(c){var u={type:_.EventType[c.type],alpha:c.alpha,stress:c.stress};this.event.call(u.type,u)},h.prototype.kick=function(){var c=this,u=this.d3Context.timer(function(){return m.prototype.tick.call(c)&&u.stop()})},h.prototype.on=function(c,u){return this.event.on("string"==typeof c?c:_.EventType[c],u),this},h}(_.Layout);E.D3StyleLayoutAdaptor=v},9737:(x,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=function(){function v(){this.locks={}}return v.prototype.add=function(m,h){this.locks[m]=h},v.prototype.clear=function(){this.locks={}},v.prototype.isEmpty=function(){for(var m in this.locks)return!1;return!0},v.prototype.apply=function(m){for(var h in this.locks)m(Number(h),this.locks[h])},v}();E.Locks=o;var a=function(){function v(m,h,c){void 0===c&&(c=null),this.D=h,this.G=c,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new _,this.project=null,this.x=m,this.k=m.length;var u=this.n=m[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new o,this.minD=Number.MAX_VALUE;for(var d,t=u;t--;)for(d=u;--d>t;){var f=h[t][d];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),t=this.k;t--;){for(this.g[t]=new Array(u),this.H[t]=new Array(u),d=u;d--;)this.H[t][d]=new Array(u);this.Hd[t]=new Array(u),this.a[t]=new Array(u),this.b[t]=new Array(u),this.c[t]=new Array(u),this.d[t]=new Array(u),this.e[t]=new Array(u),this.ia[t]=new Array(u),this.ib[t]=new Array(u),this.xtmp[t]=new Array(u)}}return v.createSquareMatrix=function(m,h){for(var c=new Array(m),u=0;u<m;++u){c[u]=new Array(m);for(var t=0;t<m;++t)c[u][t]=h(u,t)}return c},v.prototype.offsetDir=function(){for(var m=this,h=new Array(this.k),c=0,u=0;u<this.k;++u){var t=h[u]=this.random.getNextBetween(.01,1)-.5;c+=t*t}return c=Math.sqrt(c),h.map(function(d){return d*(m.minD/c)})},v.prototype.computeDerivatives=function(m){var h=this,c=this.n;if(!(c<1)){for(var u,t=new Array(this.k),d=new Array(this.k),f=new Array(this.k),l=0,p=0;p<c;++p){for(u=0;u<this.k;++u)f[u]=this.g[u][p]=0;for(var y=0;y<c;++y)if(p!==y){for(var C=c;C--;){var T=0;for(u=0;u<this.k;++u){var N=t[u]=m[u][p]-m[u][y];T+=d[u]=N*N}if(T>1e-9)break;var A=this.offsetDir();for(u=0;u<this.k;++u)m[u][y]+=A[u]}var O=Math.sqrt(T),k=this.D[p][y],L=null!=this.G?this.G[p][y]:1;if(L>1&&O>k||!isFinite(k)){for(u=0;u<this.k;++u)this.H[u][p][y]=0;continue}L>1&&(L=1);var J=k*k,Y=2*L*(O-k)/(J*O),V=O*O*O,Q=2*-L/(J*V);for(isFinite(Y)||console.log(Y),u=0;u<this.k;++u)this.g[u][p]+=t[u]*Y,f[u]-=this.H[u][p][y]=Q*(V+k*(d[u]-T)+O*T)}for(u=0;u<this.k;++u)l=Math.max(l,this.H[u][p][p]=f[u])}var I=this.snapGridSize/2,Z=this.snapGridSize,P=this.snapStrength/(I*I),B=this.numGridSnapNodes;for(p=0;p<B;++p)for(u=0;u<this.k;++u){var H=this.x[u][p],et=H/Z,G=et%1,D=et-G;-I<(N=Math.abs(G)<=.5?H-D*Z:H>0?H-(D+1)*Z:H-(D-1)*Z)&&N<=I&&(this.scaleSnapByMaxH?(this.g[u][p]+=l*P*N,this.H[u][p][p]+=l*P):(this.g[u][p]+=P*N,this.H[u][p][p]+=P))}this.locks.isEmpty()||this.locks.apply(function(W,it){for(u=0;u<h.k;++u)h.H[u][W][W]+=l,h.g[u][W]-=l*(it[u]-m[u][W])})}},v.dotProd=function(m,h){for(var c=0,u=m.length;u--;)c+=m[u]*h[u];return c},v.rightMultiply=function(m,h,c){for(var u=m.length;u--;)c[u]=v.dotProd(m[u],h)},v.prototype.computeStepSize=function(m){for(var h=0,c=0,u=0;u<this.k;++u)h+=v.dotProd(this.g[u],m[u]),v.rightMultiply(this.H[u],m[u],this.Hd[u]),c+=v.dotProd(m[u],this.Hd[u]);return 0!==c&&isFinite(c)?1*h/c:0},v.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var m=this.computeStepSize(this.g),h=0;h<this.k;++h)this.takeDescentStep(this.x[h],this.g[h],m);return this.computeStress()},v.copy=function(m,h){for(var c=m.length,u=h[0].length,t=0;t<c;++t)for(var d=0;d<u;++d)h[t][d]=m[t][d]},v.prototype.stepAndProject=function(m,h,c,u){v.copy(m,h),this.takeDescentStep(h[0],c[0],u),this.project&&this.project[0](m[0],m[1],h[0]),this.takeDescentStep(h[1],c[1],u),this.project&&this.project[1](h[0],m[1],h[1]);for(var t=2;t<this.k;t++)this.takeDescentStep(h[t],c[t],u)},v.mApply=function(m,h,c){for(var u=m;u-- >0;)for(var t=h;t-- >0;)c(u,t)},v.prototype.matrixApply=function(m){v.mApply(this.k,this.n,m)},v.prototype.computeNextPosition=function(m,h){var c=this;this.computeDerivatives(m);var u=this.computeStepSize(this.g);if(this.stepAndProject(m,h,this.g,u),this.project){this.matrixApply(function(d,f){return c.e[d][f]=m[d][f]-h[d][f]});var t=this.computeStepSize(this.e);t=Math.max(.2,Math.min(t,1)),this.stepAndProject(m,h,this.e,t)}},v.prototype.run=function(m){for(var h=Number.MAX_VALUE,c=!1;!c&&m-- >0;){var u=this.rungeKutta();c=Math.abs(h/u-1)<this.threshold,h=u}return h},v.prototype.rungeKutta=function(){var m=this;this.computeNextPosition(this.x,this.a),v.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),v.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var h=0;return this.matrixApply(function(c,u){var t=(m.a[c][u]+2*m.b[c][u]+2*m.c[c][u]+m.d[c][u])/6,d=m.x[c][u]-t;h+=d*d,m.x[c][u]=t}),h},v.mid=function(m,h,c){v.mApply(m.length,m[0].length,function(u,t){return c[u][t]=m[u][t]+(h[u][t]-m[u][t])/2})},v.prototype.takeDescentStep=function(m,h,c){for(var u=0;u<this.n;++u)m[u]=m[u]-c*h[u]},v.prototype.computeStress=function(){for(var m=0,h=0,c=this.n-1;h<c;++h)for(var u=h+1,t=this.n;u<t;++u){for(var d=0,f=0;f<this.k;++f){var l=this.x[f][h]-this.x[f][u];d+=l*l}d=Math.sqrt(d);var p=this.D[h][u];if(isFinite(p)){var y=p-d;m+=y*y/(p*p)}}return m},v.zeroDistance=1e-10,v}();E.Descent=a;var _=function(){function v(m){void 0===m&&(m=1),this.seed=m,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return v.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},v.prototype.getNextBetween=function(m,h){return m+this.getNext()*(h-m)},v}();E.PseudoRandom=_},5872:function(x,E,o){"use strict";var G,a=this&&this.__extends||(G=function(D,X){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,it){W.__proto__=it}||function(W,it){for(var q in it)it.hasOwnProperty(q)&&(W[q]=it[q])})(D,X)},function(D,X){function W(){this.constructor=D}G(D,X),D.prototype=null===X?Object.create(X):(W.prototype=X.prototype,new W)});Object.defineProperty(E,"__esModule",{value:!0});var _=o(7262),v=function(){};E.Point=v;var m=function(D,X,W,it){this.x1=D,this.y1=X,this.x2=W,this.y2=it};E.LineSegment=m;var h=function(G){function D(){return null!==G&&G.apply(this,arguments)||this}return a(D,G),D}(v);function c(G,D,X){return(D.x-G.x)*(X.y-G.y)-(X.x-G.x)*(D.y-G.y)}function u(G,D,X){return c(G,D,X)>0}function t(G,D,X){return c(G,D,X)<0}function y(G,D){var X=D.slice(0);return X.push(D[0]),{rtan:C(G,X),ltan:T(G,X)}}function C(G,D){var W,it,q,lt,X=D.length-1;if(t(G,D[1],D[0])&&!u(G,D[X-1],D[0]))return 0;for(W=0,it=X;;){if(it-W==1)return u(G,D[W],D[it])?W:it;if((lt=t(G,D[(q=Math.floor((W+it)/2))+1],D[q]))&&!u(G,D[q-1],D[q]))return q;u(G,D[W+1],D[W])?lt||u(G,D[W],D[q])?it=q:W=q:lt&&t(G,D[W],D[q])?it=q:W=q}}function T(G,D){var W,it,q,lt,X=D.length-1;if(u(G,D[X-1],D[0])&&!t(G,D[1],D[0]))return 0;for(W=0,it=X;;){if(it-W==1)return t(G,D[W],D[it])?W:it;if(lt=t(G,D[(q=Math.floor((W+it)/2))+1],D[q]),u(G,D[q-1],D[q])&&!lt)return q;t(G,D[W+1],D[W])?lt?t(G,D[W],D[q])?it=q:W=q:it=q:lt?W=q:u(G,D[W],D[q])?it=q:W=q}}function N(G,D,X,W,it,q){var st,lt;lt=W(G[st=X(D[0],G)],D);for(var pt=!1;!pt;){for(pt=!0;st===G.length-1&&(st=0),!it(D[lt],G[st],G[st+1]);)++st;for(;0===lt&&(lt=D.length-1),!q(G[st],D[lt],D[lt-1]);)--lt,pt=!1}return{t1:st,t2:lt}}function O(G,D){return N(G,D,C,T,u,t)}E.PolyPoint=h,E.isLeft=c,E.ConvexHull=function(G){var W,D=G.slice(0).sort(function(ut,ft){return ut.x!==ft.x?ft.x-ut.x:ft.y-ut.y}),X=G.length,q=D[0].x;for(W=1;W<X&&D[W].x===q;++W);var st=W-1,lt=[];if(lt.push(D[0]),st===X-1)D[st].y!==D[0].y&&lt.push(D[st]);else{var pt,z=X-1,K=D[X-1].x;for(W=X-2;W>=0&&D[W].x===K;W--);for(pt=W+1,W=st;++W<=pt;)if(!(c(D[0],D[pt],D[W])>=0&&W<pt)){for(;lt.length>1&&!(c(lt[lt.length-2],lt[lt.length-1],D[W])>0);)lt.length-=1;0!=W&&lt.push(D[W])}z!=pt&&lt.push(D[z]);var rt=lt.length;for(W=pt;--W>=st;)if(!(c(D[z],D[st],D[W])>=0&&W>st)){for(;lt.length>rt&&!(c(lt[lt.length-2],lt[lt.length-1],D[W])>0);)lt.length-=1;0!=W&&lt.push(D[W])}}return lt},E.clockwiseRadialSweep=function(G,D,X){D.slice(0).sort(function(W,it){return Math.atan2(W.y-G.y,W.x-G.x)-Math.atan2(it.y-G.y,it.x-G.x)}).forEach(X)},E.tangent_PolyPolyC=N,E.LRtangent_PolyPolyC=function(G,D){var X=O(D,G);return{t1:X.t2,t2:X.t1}},E.RLtangent_PolyPolyC=O,E.LLtangent_PolyPolyC=function(G,D){return N(G,D,T,T,t,t)},E.RRtangent_PolyPolyC=function(G,D){return N(G,D,C,C,u,u)};var J=function(D,X){this.t1=D,this.t2=X};E.BiTangent=J;var Y=function(){};E.BiTangents=Y;var V=function(G){function D(){return null!==G&&G.apply(this,arguments)||this}return a(D,G),D}(v);E.TVGPoint=V;var Q=function(D,X,W,it){this.id=D,this.polyid=X,this.polyvertid=W,this.p=it,it.vv=this};E.VisibilityVertex=Q;var I=function(){function G(D,X){this.source=D,this.target=X}return G.prototype.length=function(){var D=this.source.p.x-this.target.p.x,X=this.source.p.y-this.target.p.y;return Math.sqrt(D*D+X*X)},G}();E.VisibilityEdge=I;var Z=function(){function G(D,X){if(this.P=D,this.V=[],this.E=[],X)this.V=X.V.slice(0),this.E=X.E.slice(0);else{for(var W=D.length,it=0;it<W;it++){for(var q=D[it],st=0;st<q.length;++st){var pt=new Q(this.V.length,it,st,q[st]);this.V.push(pt),st>0&&this.E.push(new I(q[st-1].vv,pt))}q.length>1&&this.E.push(new I(q[0].vv,q[q.length-1].vv))}for(it=0;it<W-1;it++){var z=D[it];for(st=it+1;st<W;st++){var K=D[st],rt=P(z,K);for(var ut in rt){var ft=rt[ut];this.addEdgeIfVisible(z[ft.t1],K[ft.t2],it,st)}}}}}return G.prototype.addEdgeIfVisible=function(D,X,W,it){this.intersectsPolys(new m(D.x,D.y,X.x,X.y),W,it)||this.E.push(new I(D.vv,X.vv))},G.prototype.addPoint=function(D,X){var W=this.P.length;this.V.push(new Q(this.V.length,W,0,D));for(var it=0;it<W;++it)if(it!==X){var q=this.P[it],st=y(D,q);this.addEdgeIfVisible(D,q[st.ltan],X,it),this.addEdgeIfVisible(D,q[st.rtan],X,it)}return D.vv},G.prototype.intersectsPolys=function(D,X,W){for(var it=0,q=this.P.length;it<q;++it)if(it!=X&&it!=W&&M(D,this.P[it]).length>0)return!0;return!1},G}();function M(G,D){for(var X=[],W=1,it=D.length;W<it;++W){var q=_.Rectangle.lineIntersection(G.x1,G.y1,G.x2,G.y2,D[W-1].x,D[W-1].y,D[W].x,D[W].y);q&&X.push(q)}return X}function P(G,D){for(var X=G.length-1,W=D.length-1,it=new Y,q=0;q<X;++q)for(var st=0;st<W;++st){var lt=G[0==q?X-1:q-1],pt=G[q],z=G[q+1],K=D[0==st?W-1:st-1],rt=D[st],ut=D[st+1],ft=c(lt,pt,rt),ht=c(pt,K,rt),gt=c(pt,rt,ut),xt=c(K,rt,pt),Ft=c(rt,lt,pt),bt=c(rt,pt,z);ft>=0&&ht>=0&&gt<0&&xt>=0&&Ft>=0&&bt<0?it.ll=new J(q,st):ft<=0&&ht<=0&&gt>0&&xt<=0&&Ft<=0&&bt>0?it.rr=new J(q,st):ft<=0&&ht>0&&gt<=0&&xt>=0&&Ft<0&&bt>=0?it.rl=new J(q,st):ft>=0&&ht<0&&gt>=0&&xt<=0&&Ft>0&&bt<=0&&(it.lr=new J(q,st))}return it}function H(G,D){return!G.every(function(X){return!function(G,D){for(var X=1,W=D.length;X<W;++X)if(t(D[X-1],D[X],G))return!1;return!0}(X,D)})}E.TangentVisibilityGraph=Z,E.tangents=P,E.polysOverlap=function(G,D){if(H(G,D)||H(D,G))return!0;for(var X=1,W=G.length;X<W;++X){var it=G[X],q=G[X-1];if(M(new m(q.x,q.y,it.x,it.y),D).length>0)return!0}return!1}},6573:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a=o(7262),_=o(3535),v=o(5259),m=function(d,f,l){this.id=d,this.rect=f,this.children=l,this.leaf=void 0===l||0===l.length};E.NodeWrapper=m;var h=function(d,f,l,p,y){void 0===p&&(p=null),void 0===y&&(y=null),this.id=d,this.x=f,this.y=l,this.node=p,this.line=y};E.Vert=h;var c=function(){function t(d,f){this.s=d,this.t=f;var l=t.findMatch(d,f),p=f.slice(0).reverse(),y=t.findMatch(d,p);l.length>=y.length?(this.length=l.length,this.si=l.si,this.ti=l.ti,this.reversed=!1):(this.length=y.length,this.si=y.si,this.ti=f.length-y.ti-y.length,this.reversed=!0)}return t.findMatch=function(d,f){for(var l=d.length,p=f.length,y={length:0,si:-1,ti:-1},C=new Array(l),T=0;T<l;T++){C[T]=new Array(p);for(var N=0;N<p;N++)if(d[T]===f[N]){var A=C[T][N]=0===T||0===N?1:C[T-1][N-1]+1;A>y.length&&(y.length=A,y.si=T-A+1,y.ti=N-A+1)}else C[T][N]=0}return y},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();E.LongestCommonSubsequence=c;var u=function(){function t(d,f,l){var p=this;void 0===l&&(l=12),this.originalnodes=d,this.groupPadding=l,this.leaves=null,this.nodes=d.map(function(V,Q){return new m(Q,f.getBounds(V),f.getChildren(V))}),this.leaves=this.nodes.filter(function(V){return V.leaf}),this.groups=this.nodes.filter(function(V){return!V.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(V){return V.children.forEach(function(Q){return p.nodes[Q].parent=V})}),this.root={children:[]},this.nodes.forEach(function(V){void 0===V.parent&&(V.parent=p.root,p.root.children.push(V.id)),V.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(V,Q){return p.getDepth(V)-p.getDepth(Q)}),this.backToFront.slice(0).reverse().filter(function(V){return!V.leaf}).forEach(function(V){var Q=a.Rectangle.empty();V.children.forEach(function(I){return Q=Q.union(p.nodes[I].rect)}),V.rect=Q.inflate(p.groupPadding)});var C=this.midPoints(this.cols.map(function(V){return V.pos})),T=this.midPoints(this.rows.map(function(V){return V.pos})),N=C[0],A=C[C.length-1],O=T[0],k=T[T.length-1],L=this.rows.map(function(V){return{x1:N,x2:A,y1:V.pos,y2:V.pos}}).concat(T.map(function(V){return{x1:N,x2:A,y1:V,y2:V}})),J=this.cols.map(function(V){return{x1:V.pos,x2:V.pos,y1:O,y2:k}}).concat(C.map(function(V){return{x1:V,x2:V,y1:O,y2:k}})),Y=L.concat(J);Y.forEach(function(V){return V.verts=[]}),this.verts=[],this.edges=[],L.forEach(function(V){return J.forEach(function(Q){var I=new h(p.verts.length,Q.x1,V.y1);V.verts.push(I),Q.verts.push(I),p.verts.push(I);for(var Z=p.backToFront.length;Z-- >0;){var M=p.backToFront[Z],P=M.rect,B=Math.abs(I.x-P.cx()),H=Math.abs(I.y-P.cy());if(B<P.width()/2&&H<P.height()/2){I.node=M;break}}})}),Y.forEach(function(V,Q){p.nodes.forEach(function(H,et){H.rect.lineIntersections(V.x1,V.y1,V.x2,V.y2).forEach(function(G,D){var X=new h(p.verts.length,G.x,G.y,H,V);p.verts.push(X),V.verts.push(X),H.ports.push(X)})});var I=Math.abs(V.y1-V.y2)<.1,Z=function(H,et){return I?et.x-H.x:et.y-H.y};V.verts.sort(Z);for(var M=1;M<V.verts.length;M++){var P=V.verts[M-1],B=V.verts[M];P.node&&P.node===B.node&&P.node.leaf||p.edges.push({source:P.id,target:B.id,length:Math.abs(Z(P,B))})}})}return t.prototype.avg=function(d){return d.reduce(function(f,l){return f+l})/d.length},t.prototype.getGridLines=function(d){for(var f=[],l=this.leaves.slice(0,this.leaves.length);l.length>0;){var p=l.filter(function(C){return C.rect["overlap"+d.toUpperCase()](l[0].rect)}),y={nodes:p,pos:this.avg(p.map(function(C){return C.rect["c"+d]()}))};f.push(y),y.nodes.forEach(function(C){return l.splice(l.indexOf(C),1)})}return f.sort(function(C,T){return C.pos-T.pos}),f},t.prototype.getDepth=function(d){for(var f=0;d.parent!==this.root;)f++,d=d.parent;return f},t.prototype.midPoints=function(d){for(var f=d[1]-d[0],l=[d[0]-f/2],p=1;p<d.length;p++)l.push((d[p]+d[p-1])/2);return l.push(d[d.length-1]+f/2),l},t.prototype.findLineage=function(d){var f=[d];do{f.push(d=d.parent)}while(d!==this.root);return f.reverse()},t.prototype.findAncestorPathBetween=function(d,f){for(var l=this.findLineage(d),p=this.findLineage(f),y=0;l[y]===p[y];)y++;return{commonAncestor:l[y-1],lineages:l.slice(y).concat(p.slice(y))}},t.prototype.siblingObstacles=function(d,f){var l=this,p=this.findAncestorPathBetween(d,f),y={};p.lineages.forEach(function(T){return y[T.id]={}});var C=p.commonAncestor.children.filter(function(T){return!(T in y)});return p.lineages.filter(function(T){return T.parent!==p.commonAncestor}).forEach(function(T){return C=C.concat(T.parent.children.filter(function(N){return N!==T.id}))}),C.map(function(T){return l.nodes[T]})},t.getSegmentSets=function(d,f,l){for(var p=[],y=0;y<d.length;y++)for(var C=d[y],T=0;T<C.length;T++)(N=C[T]).edgeid=y,N.i=T,Math.abs(N[1][f]-N[0][f])<.1&&p.push(N);p.sort(function(J,Y){return J[0][f]-Y[0][f]});for(var O=[],k=null,L=0;L<p.length;L++){var N=p[L];(!k||Math.abs(N[0][f]-k.pos)>.1)&&O.push(k={pos:N[0][f],segments:[]}),k.segments.push(N)}return O},t.nudgeSegs=function(d,f,l,p,y,C){var T=p.length;if(!(T<=1)){for(var N=p.map(function(M){return new _.Variable(M[0][d])}),A=[],O=0;O<T;O++)for(var k=0;k<T;k++)if(O!==k){var L=p[O],Y=L.edgeid,V=p[k].edgeid,Q=-1,I=-1;"x"==d?y(Y,V)&&(L[0][f]<L[1][f]?(Q=k,I=O):(Q=O,I=k)):y(Y,V)&&(L[0][f]<L[1][f]?(Q=O,I=k):(Q=k,I=O)),Q>=0&&A.push(new _.Constraint(N[Q],N[I],C))}new _.Solver(N,A).solve(),N.forEach(function(M,P){var B=p[P],H=M.position();B[0][d]=B[1][d]=H;var et=l[B.edgeid];B.i>0&&(et[B.i-1][1][d]=H),B.i<et.length-1&&(et[B.i+1][0][d]=H)})}},t.nudgeSegments=function(d,f,l,p,y){for(var C=t.getSegmentSets(d,f,l),T=0;T<C.length;T++){for(var N=C[T],A=[],O=0;O<N.segments.length;O++){var k=N.segments[O];A.push({type:0,s:k,pos:Math.min(k[0][l],k[1][l])}),A.push({type:1,s:k,pos:Math.max(k[0][l],k[1][l])})}A.sort(function(Y,V){return Y.pos-V.pos+Y.type-V.type});var L=[],J=0;A.forEach(function(Y){0===Y.type?(L.push(Y.s),J++):J--,0==J&&(t.nudgeSegs(f,l,d,L,p,y),L=[])})}},t.prototype.routeEdges=function(d,f,l,p){var y=this,C=d.map(function(A){return y.route(l(A),p(A))}),T=t.orderEdges(C),N=C.map(function(A){return t.makeSegments(A)});return t.nudgeSegments(N,"x","y",T,f),t.nudgeSegments(N,"y","x",T,f),t.unreverseEdges(N,C),N},t.unreverseEdges=function(d,f){d.forEach(function(l,p){f[p].reversed&&(l.reverse(),l.forEach(function(C){C.reverse()}))})},t.angleBetween2Lines=function(d,f){var l=Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x),p=Math.atan2(f[0].y-f[1].y,f[0].x-f[1].x),y=l-p;return(y>Math.PI||y<-Math.PI)&&(y=p-l),y},t.isLeft=function(d,f,l){return(f.x-d.x)*(l.y-d.y)-(f.y-d.y)*(l.x-d.x)<=0},t.getOrder=function(d){for(var f={},l=0;l<d.length;l++){var p=d[l];void 0===f[p.l]&&(f[p.l]={}),f[p.l][p.r]=!0}return function(y,C){return void 0!==f[y]&&f[y][C]}},t.orderEdges=function(d){for(var f=[],l=0;l<d.length-1;l++)for(var p=l+1;p<d.length;p++){var N,A,O,y=d[l],C=d[p],T=new c(y,C);if(0!==T.length){if(T.reversed&&(C.reverse(),C.reversed=!0,T=new c(y,C)),(T.si<=0||T.ti<=0)&&(T.si+T.length>=y.length||T.ti+T.length>=C.length)){f.push({l,r:p});continue}T.si+T.length>=y.length||T.ti+T.length>=C.length?(N=y[T.si+1],O=y[T.si-1],A=C[T.ti-1]):(N=y[T.si+T.length-2],A=y[T.si+T.length],O=C[T.ti+T.length]),t.isLeft(N,A,O)?f.push({l:p,r:l}):f.push({l,r:p})}}return t.getOrder(f)},t.makeSegments=function(d){function f(A){return{x:A.x,y:A.y}}for(var p=[],y=f(d[0]),C=1;C<d.length;C++){var T=f(d[C]),N=C<d.length-1?d[C+1]:null;(!N||(A=y,O=T,k=N,!(Math.abs((O.x-A.x)*(k.y-A.y)-(O.y-A.y)*(k.x-A.x))<.001)))&&(p.push([y,T]),y=T)}var A,O,k;return p},t.prototype.route=function(d,f){var l=this,p=this.nodes[d],y=this.nodes[f];this.obstacles=this.siblingObstacles(p,y);var C={};this.obstacles.forEach(function(I){return C[I.id]=I}),this.passableEdges=this.edges.filter(function(I){var Z=l.verts[I.source],M=l.verts[I.target];return!(Z.node&&Z.node.id in C||M.node&&M.node.id in C)});for(var T=1;T<p.ports.length;T++)this.passableEdges.push({source:p.ports[0].id,target:p.ports[T].id,length:0});for(T=1;T<y.ports.length;T++)this.passableEdges.push({source:y.ports[0].id,target:y.ports[T].id,length:0});var Q=new v.Calculator(this.verts.length,this.passableEdges,function(I){return I.source},function(I){return I.target},function(I){return I.length}).PathFromNodeToNodeWithPrevCost(p.ports[0].id,y.ports[0].id,function(I,Z,M){var P=l.verts[I],B=l.verts[Z],H=l.verts[M],et=Math.abs(H.x-P.x),G=Math.abs(H.y-P.y);return P.node===p&&P.node===B.node||B.node===y&&B.node===H.node?0:et>1&&G>1?1e3:0}).reverse().map(function(I){return l.verts[I]});return Q.push(this.nodes[y.id].ports[0]),Q.filter(function(I,Z){return!(Z<Q.length-1&&Q[Z+1].node===p&&I.node===p||Z>0&&I.node===y&&Q[Z-1].node===y)})},t.getRoutePath=function(d,f,l,p){var T,N,A,et,G,y={routepath:"M "+d[0][0].x+" "+d[0][0].y+" ",arrowpath:""};if(d.length>1)for(var C=0;C<d.length;C++){var O=(N=(T=d[C])[1].x)-T[0].x,k=(A=T[1].y)-T[0].y;if(C<d.length-1){Math.abs(O)>0?N-=O/Math.abs(O)*f:A-=k/Math.abs(k)*f,y.routepath+="L "+N+" "+A+" ";var L=d[C+1],J=L[0].x,Y=L[0].y;O=L[1].x-J,k=L[1].y-Y;var Z,M,I=t.angleBetween2Lines(T,L)<0?1:0;Math.abs(O)>0?(Z=J+O/Math.abs(O)*f,M=Y):(Z=J,M=Y+k/Math.abs(k)*f);var P=Math.abs(Z-N),B=Math.abs(M-A);y.routepath+="A "+P+" "+B+" 0 0 "+I+" "+Z+" "+M+" "}else{var H=[N,A];Math.abs(O)>0?(et=[N-=O/Math.abs(O)*p,A+l],G=[N,A-l]):(et=[N+l,A-=k/Math.abs(k)*p],G=[N-l,A]),y.routepath+="L "+N+" "+A+" ",p>0&&(y.arrowpath="M "+H[0]+" "+H[1]+" L "+et[0]+" "+et[1]+" L "+G[0]+" "+G[1])}}else O=(N=(T=d[0])[1].x)-T[0].x,k=(A=T[1].y)-T[0].y,H=[N,A],Math.abs(O)>0?(et=[N-=O/Math.abs(O)*p,A+l],G=[N,A-l]):(et=[N+l,A-=k/Math.abs(k)*p],G=[N-l,A]),y.routepath+="L "+N+" "+A+" ",p>0&&(y.arrowpath="M "+H[0]+" "+H[1]+" L "+et[0]+" "+et[1]+" L "+G[0]+" "+G[1]);return y},t}();E.GridRouter=u},8833:(x,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o_GOLDEN_SECTION=(1+Math.sqrt(5))/2;E.applyPacking=function(v,m,h,c,u,t){void 0===u&&(u=1),void 0===t&&(t=!0);var l=m,p=h,y=(u=void 0!==u?u:1,c=void 0!==c?c:0,0),C=0,T=0,N=0,A=[];function J(I,Z){A=[],y=0,C=0,N=0;for(var M=0;M<I.length;M++)Y(I[M],Z);return Math.abs(y/C-u)}function Y(I,Z){for(var M=void 0,P=0;P<A.length;P++)if(A[P].space_left>=I.height&&A[P].x+A[P].width+I.width+10-Z<=1e-4){M=A[P];break}A.push(I),void 0!==M?(I.x=M.x+M.width+10,I.y=M.bottom,I.space_left=I.height,I.bottom=I.y,M.space_left-=I.height+10,M.bottom+=I.height+10):(I.y=N,N+=I.height+10,I.x=0,I.bottom=I.y,I.space_left=I.height),I.y+I.height-C>-1e-4&&(C=I.y+I.height-0),I.x+I.width-y>-1e-4&&(y=I.x+I.width-0)}0!=v.length&&(v.forEach(function(M){!function(M){var P=Number.MAX_VALUE,B=Number.MAX_VALUE,H=0,et=0;M.array.forEach(function(G){var D=void 0!==G.width?G.width:c,X=void 0!==G.height?G.height:c;D/=2,X/=2,H=Math.max(G.x+D,H),P=Math.min(G.x-D,P),et=Math.max(G.y+X,et),B=Math.min(G.y-X,B)}),M.width=H-P,M.height=et-B}(M)}),function(I,Z){var M=Number.POSITIVE_INFINITY,P=0;I.sort(function(lt,pt){return pt.height-lt.height});for(var B=q=T=I.reduce(function(lt,pt){return lt.width<pt.width?lt.width:pt.width}),H=st=function(I){var Z=0;return I.forEach(function(M){return Z+=M.width+10}),Z}(I),et=0,G=Number.MAX_VALUE,D=Number.MAX_VALUE,X=-1,W=Number.MAX_VALUE,it=Number.MAX_VALUE;W>T||it>1e-4;){if(1!=X){var q=H-(H-B)/o_GOLDEN_SECTION;G=J(I,q)}if(0!=X){var st=B+(H-B)/o_GOLDEN_SECTION;D=J(I,st)}if(W=Math.abs(q-st),it=Math.abs(G-D),G<M&&(M=G,P=q),D<M&&(M=D,P=st),G>D?(B=q,q=st,G=D,X=1):(H=st,st=q,D=G,X=0),et++>100)break}J(I,P)}(v),t&&v.forEach(function(Z){var M={x:0,y:0};Z.array.forEach(function(H){M.x+=H.x,M.y+=H.y}),M.x/=Z.array.length,M.y/=Z.array.length;var B_x=Z.x-(M.x-Z.width/2)+l/2-y/2,B_y=Z.y-(M.y-Z.height/2)+p/2-C/2;Z.array.forEach(function(H){H.x+=B_x,H.y+=B_y})}))},E.separateGraphs=function(v,m){for(var h={},c={},u=[],t=0,d=0;d<m.length;d++){var f=m[d],l=f.source,p=f.target;c[l.index]?c[l.index].push(p):c[l.index]=[p],c[p.index]?c[p.index].push(l):c[p.index]=[l]}for(d=0;d<v.length;d++){var y=v[d];h[y.index]||C(y,!0)}function C(T,N){if(void 0===h[T.index]){N&&(t++,u.push({array:[]})),h[T.index]=t,u[t-1].array.push(T);var A=c[T.index];if(A)for(var O=0;O<A.length;O++)C(A[O],!1)}}return u}},1111:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var t,l,a=o(9347),_=o(1468),v=o(9737),m=o(7262),h=o(5259),c=o(5872),u=o(8833);function d(l){return void 0!==l.leaves||void 0!==l.groups}(l=t=E.EventType||(E.EventType={}))[l.start=0]="start",l[l.tick=1]="tick",l[l.end=2]="end";var f=function(){function l(){var p=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:l.getSourceIndex,getTargetIndex:l.getTargetIndex,setLength:l.setLinkLength,getType:function(y){return"function"==typeof p._linkType?p._linkType(y):0}}}return l.prototype.on=function(p,y){return this.event||(this.event={}),"string"==typeof p?this.event[t[p]]=y:this.event[p]=y,this},l.prototype.trigger=function(p){this.event&&void 0!==this.event[p.type]&&this.event[p.type](p)},l.prototype.kick=function(){for(;!this.tick(););},l.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:t.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var C,T,p=this._nodes.length;for(this._descent.locks.clear(),T=0;T<p;++T)(C=this._nodes[T]).fixed&&((void 0===C.px||void 0===C.py)&&(C.px=C.x,C.py=C.y),this._descent.locks.add(T,[C.px,C.py]));var A=this._descent.rungeKutta();return 0===A?this._alpha=0:void 0!==this._lastStress&&(this._alpha=A),this._lastStress=A,this.updateNodePositions(),this.trigger({type:t.tick,alpha:this._alpha,stress:this._lastStress}),!1},l.prototype.updateNodePositions=function(){for(var C,p=this._descent.x[0],y=this._descent.x[1],T=this._nodes.length;T--;)(C=this._nodes[T]).x=p[T],C.y=y[T]},l.prototype.nodes=function(p){if(!p){if(0===this._nodes.length&&this._links.length>0){var y=0;this._links.forEach(function(T){y=Math.max(y,T.source,T.target)}),this._nodes=new Array(++y);for(var C=0;C<y;++C)this._nodes[C]={}}return this._nodes}return this._nodes=p,this},l.prototype.groups=function(p){var y=this;return p?(this._groups=p,this._rootGroup={},this._groups.forEach(function(C){void 0===C.padding&&(C.padding=1),void 0!==C.leaves&&C.leaves.forEach(function(T,N){"number"==typeof T&&((C.leaves[N]=y._nodes[T]).parent=C)}),void 0!==C.groups&&C.groups.forEach(function(T,N){"number"==typeof T&&((C.groups[N]=y._groups[T]).parent=C)})}),this._rootGroup.leaves=this._nodes.filter(function(C){return void 0===C.parent}),this._rootGroup.groups=this._groups.filter(function(C){return void 0===C.parent}),this):this._groups},l.prototype.powerGraphGroups=function(p){var y=a.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(y.groups),p(y),this},l.prototype.avoidOverlaps=function(p){return arguments.length?(this._avoidOverlaps=p,this):this._avoidOverlaps},l.prototype.handleDisconnected=function(p){return arguments.length?(this._handleDisconnected=p,this):this._handleDisconnected},l.prototype.flowLayout=function(p,y){return arguments.length||(p="y"),this._directedLinkConstraints={axis:p,getMinSeparation:"number"==typeof y?function(){return y}:y},this},l.prototype.links=function(p){return arguments.length?(this._links=p,this):this._links},l.prototype.constraints=function(p){return arguments.length?(this._constraints=p,this):this._constraints},l.prototype.distanceMatrix=function(p){return arguments.length?(this._distanceMatrix=p,this):this._distanceMatrix},l.prototype.size=function(p){return p?(this._canvasSize=p,this):this._canvasSize},l.prototype.defaultNodeSize=function(p){return p?(this._defaultNodeSize=p,this):this._defaultNodeSize},l.prototype.groupCompactness=function(p){return p?(this._groupCompactness=p,this):this._groupCompactness},l.prototype.linkDistance=function(p){return p?(this._linkDistance="function"==typeof p?p:+p,this._linkLengthCalculator=null,this):this._linkDistance},l.prototype.linkType=function(p){return this._linkType=p,this},l.prototype.convergenceThreshold=function(p){return p?(this._threshold="function"==typeof p?p:+p,this):this._threshold},l.prototype.alpha=function(p){return arguments.length?(p=+p,this._alpha?this._alpha=p>0?p:0:p>0&&(this._running||(this._running=!0,this.trigger({type:t.start,alpha:this._alpha=p}),this.kick())),this):this._alpha},l.prototype.getLinkLength=function(p){return"function"==typeof this._linkDistance?+this._linkDistance(p):this._linkDistance},l.setLinkLength=function(p,y){p.length=y},l.prototype.getLinkType=function(p){return"function"==typeof this._linkType?this._linkType(p):0},l.prototype.symmetricDiffLinkLengths=function(p,y){var C=this;return void 0===y&&(y=1),this.linkDistance(function(T){return p*T.length}),this._linkLengthCalculator=function(){return _.symmetricDiffLinkLengths(C._links,C.linkAccessor,y)},this},l.prototype.jaccardLinkLengths=function(p,y){var C=this;return void 0===y&&(y=1),this.linkDistance(function(T){return p*T.length}),this._linkLengthCalculator=function(){return _.jaccardLinkLengths(C._links,C.linkAccessor,y)},this},l.prototype.start=function(p,y,C,T,N,A){var O=this;void 0===p&&(p=0),void 0===y&&(y=0),void 0===C&&(C=0),void 0===T&&(T=0),void 0===N&&(N=!0),void 0===A&&(A=!0);var H,J=this.nodes().length,Y=J+2*this._groups.length,Q=this._canvasSize[0],I=this._canvasSize[1],Z=new Array(Y),M=new Array(Y),P=null,B=this._avoidOverlaps;this._nodes.forEach(function(q,st){q.index=st,void 0===q.x&&(q.x=Q/2,q.y=I/2),Z[st]=q.x,M[st]=q.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?H=this._distanceMatrix:(H=new h.Calculator(Y,this._links,l.getSourceIndex,l.getTargetIndex,function(q){return O.getLinkLength(q)}).DistanceMatrix(),P=v.Descent.createSquareMatrix(Y,function(){return 2}),this._links.forEach(function(q){"number"==typeof q.source&&(q.source=O._nodes[q.source]),"number"==typeof q.target&&(q.target=O._nodes[q.target])}),this._links.forEach(function(q){var st=l.getSourceIndex(q),lt=l.getTargetIndex(q);P[st][lt]=P[lt][st]=q.weight||1}));var et=v.Descent.createSquareMatrix(Y,function(q,st){return H[q][st]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var k=J;this._groups.forEach(function(st){(function(st,lt,pt,z){P[st][lt]=P[lt][st]=pt,et[st][lt]=et[lt][st]=.1})(k,k+1,O._groupCompactness),Z[k]=0,M[k++]=0,Z[k]=0,M[k++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var D=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,D=D.concat(_.generateDirectedEdgeConstraints(J,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new v.Descent([Z,M],et),this._descent.locks.clear(),k=0;k<J;++k){var X=this._nodes[k];X.fixed&&(X.px=X.x,X.py=X.y,this._descent.locks.add(k,[X.x,X.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(p,Z,M),D.length>0&&(this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,D).projectFunctions()),this._descent.run(y),this.separateOverlappingComponents(Q,I,A),this.avoidOverlaps(B),B&&(this._nodes.forEach(function(q,st){q.x=Z[st],q.y=M[st]}),this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,D,!0).projectFunctions(),this._nodes.forEach(function(q,st){Z[st]=q.x,M[st]=q.y})),this._descent.G=P,this._descent.run(C),T){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=J,this._descent.scaleSnapByMaxH=J!=Y;var it=v.Descent.createSquareMatrix(Y,function(q,st){return q>=J||st>=J?P[q][st]:0});this._descent.G=it,this._descent.run(T)}return this.updateNodePositions(),this.separateOverlappingComponents(Q,I,A),N?this.resume():this},l.prototype.initialLayout=function(p,y,C){if(this._groups.length>0&&p>0){var T=this._nodes.length,N=this._links.map(function(O){return{source:O.source.index,target:O.target.index}}),A=this._nodes.map(function(O){return{index:O.index}});this._groups.forEach(function(O,k){A.push({index:O.index=T+k})}),this._groups.forEach(function(O,k){void 0!==O.leaves&&O.leaves.forEach(function(L){return N.push({source:O.index,target:L.index})}),void 0!==O.groups&&O.groups.forEach(function(L){return N.push({source:O.index,target:L.index})})}),(new l).size(this.size()).nodes(A).links(N).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(p,0,0,0,!1),this._nodes.forEach(function(O){y[O.index]=A[O.index].x,C[O.index]=A[O.index].y})}else this._descent.run(p)},l.prototype.separateOverlappingComponents=function(p,y,C){var T=this;if(void 0===C&&(C=!0),!this._distanceMatrix&&this._handleDisconnected){var N=this._descent.x[0],A=this._descent.x[1];this._nodes.forEach(function(k,L){k.x=N[L],k.y=A[L]});var O=u.separateGraphs(this._nodes,this._links);u.applyPacking(O,p,y,this._defaultNodeSize,1,C),this._nodes.forEach(function(k,L){T._descent.x[0][L]=k.x,T._descent.x[1][L]=k.y,k.bounds&&(k.bounds.setXCentre(k.x),k.bounds.setYCentre(k.y))})}},l.prototype.resume=function(){return this.alpha(.1)},l.prototype.stop=function(){return this.alpha(0)},l.prototype.prepareEdgeRouting=function(p){void 0===p&&(p=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(y){return y.bounds.inflate(-p).vertices()}))},l.prototype.routeEdge=function(p,y,C){void 0===y&&(y=5);var T=[],N=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),A={x:p.source.x,y:p.source.y},O={x:p.target.x,y:p.target.y},k=N.addPoint(A,p.source.index),L=N.addPoint(O,p.target.index);N.addEdgeIfVisible(A,O,p.source.index,p.target.index),void 0!==C&&C(N);var I=new h.Calculator(N.V.length,N.E,function(et){return et.source.id},function(et){return et.target.id},function(et){return et.length()}).PathFromNodeToNode(k.id,L.id);if(1===I.length||I.length===N.V.length){var Z=m.makeEdgeBetween(p.source.innerBounds,p.target.innerBounds,y);T=[Z.sourceIntersection,Z.arrowStart]}else{for(var M=I.length-2,P=N.V[I[M]].p,B=N.V[I[0]].p,H=(T=[p.source.innerBounds.rayIntersection(P.x,P.y)],M);H>=0;--H)T.push(N.V[I[H]].p);T.push(m.makeEdgeTo(B,p.target.innerBounds,y))}return T},l.getSourceIndex=function(p){return"number"==typeof p.source?p.source:p.source.index},l.getTargetIndex=function(p){return"number"==typeof p.target?p.target:p.target.index},l.linkId=function(p){return l.getSourceIndex(p)+"-"+l.getTargetIndex(p)},l.dragStart=function(p){d(p)?l.storeOffset(p,l.dragOrigin(p)):(l.stopNode(p),p.fixed|=2)},l.stopNode=function(p){p.px=p.x,p.py=p.y},l.storeOffset=function(p,y){void 0!==p.leaves&&p.leaves.forEach(function(C){C.fixed|=2,l.stopNode(C),C._dragGroupOffsetX=C.x-y.x,C._dragGroupOffsetY=C.y-y.y}),void 0!==p.groups&&p.groups.forEach(function(C){return l.storeOffset(C,y)})},l.dragOrigin=function(p){return d(p)?{x:p.bounds.cx(),y:p.bounds.cy()}:p},l.drag=function(p,y){d(p)?(void 0!==p.leaves&&p.leaves.forEach(function(C){p.bounds.setXCentre(y.x),p.bounds.setYCentre(y.y),C.px=C._dragGroupOffsetX+y.x,C.py=C._dragGroupOffsetY+y.y}),void 0!==p.groups&&p.groups.forEach(function(C){return l.drag(C,y)})):(p.px=y.x,p.py=y.y)},l.dragEnd=function(p){d(p)?(void 0!==p.leaves&&p.leaves.forEach(function(y){l.dragEnd(y),delete y._dragGroupOffsetX,delete y._dragGroupOffsetY}),void 0!==p.groups&&p.groups.forEach(l.dragEnd)):p.fixed&=-7},l.mouseOver=function(p){p.fixed|=4,p.px=p.x,p.py=p.y},l.mouseOut=function(p){p.fixed&=-5},l}();E.Layout=f},9739:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a=o(5259),_=o(9737),v=o(7262),m=o(1468),h=function(){function d(f,l){this.source=f,this.target=l}return d.prototype.actualLength=function(f){var l=this;return Math.sqrt(f.reduce(function(p,y){var C=y[l.target]-y[l.source];return p+C*C},0))},d}();E.Link3D=h,E.Node3D=function(f,l,p){void 0===f&&(f=0),void 0===l&&(l=0),void 0===p&&(p=0),this.x=f,this.y=l,this.z=p};var u=function(){function d(f,l,p){var y=this;void 0===p&&(p=1),this.nodes=f,this.links=l,this.idealLinkLength=p,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(d.k);for(var C=0;C<d.k;++C)this.result[C]=new Array(f.length);f.forEach(function(T,N){for(var A=0,O=d.dims;A<O.length;A++){var k=O[A];void 0===T[k]&&(T[k]=Math.random())}y.result[0][N]=T.x,y.result[1][N]=T.y,y.result[2][N]=T.z})}return d.prototype.linkLength=function(f){return f.actualLength(this.result)},d.prototype.start=function(f){var l=this;void 0===f&&(f=100);var p=this.nodes.length,y=new t;this.useJaccardLinkLengths&&m.jaccardLinkLengths(this.links,y,1.5),this.links.forEach(function(k){return k.length*=l.idealLinkLength});var C=new a.Calculator(p,this.links,function(k){return k.source},function(k){return k.target},function(k){return k.length}).DistanceMatrix(),T=_.Descent.createSquareMatrix(p,function(k,L){return C[k][L]}),N=_.Descent.createSquareMatrix(p,function(){return 2});this.links.forEach(function(k){var L=k.source,J=k.target;return N[L][J]=N[J][L]=1}),this.descent=new _.Descent(this.result,T),this.descent.threshold=.001,this.descent.G=N,this.constraints&&(this.descent.project=new v.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var A=0;A<this.nodes.length;A++){var O=this.nodes[A];O.fixed&&this.descent.locks.add(A,[O.x,O.y,O.z])}return this.descent.run(f),this},d.prototype.tick=function(){this.descent.locks.clear();for(var f=0;f<this.nodes.length;f++){var l=this.nodes[f];l.fixed&&this.descent.locks.add(f,[l.x,l.y,l.z])}return this.descent.rungeKutta()},d.k=(d.dims=["x","y","z"]).length,d}();E.Layout3D=u;var t=function(){function d(){}return d.prototype.getSourceIndex=function(f){return f.source},d.prototype.getTargetIndex=function(f){return f.target},d.prototype.getLength=function(f){return f.length},d.prototype.setLength=function(f,l){f.length=l},d}()},1468:(x,E)=>{"use strict";function o(t,d){var f={};for(var l in t)f[l]={};for(var l in d)f[l]={};return Object.keys(f).length}function a(t,d){var f=0;for(var l in t)void 0!==d[l]&&++f;return f}function v(t,d,f,l){var p=function(t,d){var f={},l=function(p,y){void 0===f[p]&&(f[p]={}),f[p][y]={}};return t.forEach(function(p){var y=d.getSourceIndex(p),C=d.getTargetIndex(p);l(y,C),l(C,y)}),f}(t,l);t.forEach(function(y){var C=p[l.getSourceIndex(y)],T=p[l.getTargetIndex(y)];l.setLength(y,1+d*f(C,T))})}function u(t,d,f){var l=[],p=0,y=[],C=[];function T(I){I.index=I.lowlink=p++,y.push(I),I.onStack=!0;for(var Z=0,M=I.out;Z<M.length;Z++){var P=M[Z];void 0===P.index?(T(P),I.lowlink=Math.min(I.lowlink,P.lowlink)):P.onStack&&(I.lowlink=Math.min(I.lowlink,P.index))}if(I.lowlink===I.index){for(var B=[];y.length&&((P=y.pop()).onStack=!1,B.push(P),P!==I););C.push(B.map(function(H){return H.id}))}}for(var N=0;N<t;N++)l.push({id:N,out:[]});for(var A=0,O=d;A<O.length;A++){var k=O[A],L=l[f.getSourceIndex(k)],J=l[f.getTargetIndex(k)];L.out.push(J)}for(var Y=0,V=l;Y<V.length;Y++){var Q=V[Y];void 0===Q.index&&T(Q)}return C}Object.defineProperty(E,"__esModule",{value:!0}),E.symmetricDiffLinkLengths=function(t,d,f){void 0===f&&(f=1),v(t,f,function(l,p){return Math.sqrt(o(l,p)-a(l,p))},d)},E.jaccardLinkLengths=function(t,d,f){void 0===f&&(f=1),v(t,f,function(l,p){return Math.min(Object.keys(l).length,Object.keys(p).length)<1.1?0:a(l,p)/o(l,p)},d)},E.generateDirectedEdgeConstraints=function(t,d,f,l){var p=u(t,d,l),y={};p.forEach(function(T,N){return T.forEach(function(A){return y[A]=N})});var C=[];return d.forEach(function(T){var N=l.getSourceIndex(T),A=l.getTargetIndex(T);y[N]!==y[A]&&C.push({axis:f,left:N,right:A,gap:l.getMinSeparation(T)})}),C},E.stronglyConnectedComponents=u},9347:(x,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=function(f,l,p){this.source=f,this.target=l,this.type=p};E.PowerEdge=o;var a=function(){function d(f,l,p,y){var C=this;if(this.linkAccessor=p,this.modules=new Array(f),this.roots=[],y)this.initModulesFromGroup(y);else{this.roots.push(new h);for(var T=0;T<f;++T)this.roots[0].add(this.modules[T]=new v(T))}this.R=l.length,l.forEach(function(N){var A=C.modules[p.getSourceIndex(N)],O=C.modules[p.getTargetIndex(N)],k=p.getType(N);A.outgoing.add(k,O),O.incoming.add(k,A)})}return d.prototype.initModulesFromGroup=function(f){var l=new h;this.roots.push(l);for(var p=0;p<f.leaves.length;++p){var y=f.leaves[p],C=new v(y.id);this.modules[y.id]=C,l.add(C)}if(f.groups)for(var T=0;T<f.groups.length;++T){var N=f.groups[T],A={};for(var O in N)"leaves"!==O&&"groups"!==O&&N.hasOwnProperty(O)&&(A[O]=N[O]);l.add(new v(-1-T,new c,new c,this.initModulesFromGroup(N),A))}return l},d.prototype.merge=function(f,l,p){void 0===p&&(p=0);var y=f.incoming.intersection(l.incoming),C=f.outgoing.intersection(l.outgoing),T=new h;T.add(f),T.add(l);var N=new v(this.modules.length,C,y,T);this.modules.push(N);var A=function(O,k,L){O.forAll(function(J,Y){J.forAll(function(V){var Q=V[k];Q.add(Y,N),Q.remove(Y,f),Q.remove(Y,l),f[L].remove(Y,V),l[L].remove(Y,V)})})};return A(C,"incoming","outgoing"),A(y,"outgoing","incoming"),this.R-=y.count()+C.count(),this.roots[p].remove(f),this.roots[p].remove(l),this.roots[p].add(N),N},d.prototype.rootMerges=function(f){void 0===f&&(f=0);for(var l=this.roots[f].modules(),p=l.length,y=new Array(p*(p-1)),C=0,T=0,N=p-1;T<N;++T)for(var A=T+1;A<p;++A){var O=l[T],k=l[A];y[C]={id:C,nEdges:this.nEdges(O,k),a:O,b:k},C++}return y},d.prototype.greedyMerge=function(){for(var f=0;f<this.roots.length;++f)if(!(this.roots[f].modules().length<2)){var p=this.rootMerges(f).sort(function(y,C){return y.nEdges==C.nEdges?y.id-C.id:y.nEdges-C.nEdges})[0];if(!(p.nEdges>=this.R))return this.merge(p.a,p.b,f),!0}},d.prototype.nEdges=function(f,l){var p=f.incoming.intersection(l.incoming),y=f.outgoing.intersection(l.outgoing);return this.R-p.count()-y.count()},d.prototype.getGroupHierarchy=function(f){var l=this,p=[];return _(this.roots[0],{},p),this.allEdges().forEach(function(T){var N=l.modules[T.source],A=l.modules[T.target];f.push(new o(void 0===N.gid?T.source:p[N.gid],void 0===A.gid?T.target:p[A.gid],T.type))}),p},d.prototype.allEdges=function(){var f=[];return d.getEdges(this.roots[0],f),f},d.getEdges=function(f,l){f.forAll(function(p){p.getEdges(l),d.getEdges(p.children,l)})},d}();function _(d,f,l){d.forAll(function(p){if(p.isLeaf())f.leaves||(f.leaves=[]),f.leaves.push(p.id);else{var y=f;if(p.gid=l.length,!p.isIsland()||p.isPredefined()){if(y={id:p.gid},p.isPredefined())for(var C in p.definition)y[C]=p.definition[C];f.groups||(f.groups=[]),f.groups.push(p.gid),l.push(y)}_(p.children,y,l)}})}E.Configuration=a;var v=function(){function d(f,l,p,y,C){void 0===l&&(l=new c),void 0===p&&(p=new c),void 0===y&&(y=new h),this.id=f,this.outgoing=l,this.incoming=p,this.children=y,this.definition=C}return d.prototype.getEdges=function(f){var l=this;this.outgoing.forAll(function(p,y){p.forAll(function(C){f.push(new o(l.id,C.id,y))})})},d.prototype.isLeaf=function(){return 0===this.children.count()},d.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},d.prototype.isPredefined=function(){return void 0!==this.definition},d}();E.Module=v;var h=function(){function d(){this.table={}}return d.prototype.count=function(){return Object.keys(this.table).length},d.prototype.intersection=function(f){var l=new d;return l.table=function(d,f){var l={};for(var p in d)p in f&&(l[p]=d[p]);return l}(this.table,f.table),l},d.prototype.intersectionCount=function(f){return this.intersection(f).count()},d.prototype.contains=function(f){return f in this.table},d.prototype.add=function(f){this.table[f.id]=f},d.prototype.remove=function(f){delete this.table[f.id]},d.prototype.forAll=function(f){for(var l in this.table)f(this.table[l])},d.prototype.modules=function(){var f=[];return this.forAll(function(l){l.isPredefined()||f.push(l)}),f},d}();E.ModuleSet=h;var c=function(){function d(){this.sets={},this.n=0}return d.prototype.count=function(){return this.n},d.prototype.contains=function(f){var l=!1;return this.forAllModules(function(p){!l&&p.id==f&&(l=!0)}),l},d.prototype.add=function(f,l){(f in this.sets?this.sets[f]:this.sets[f]=new h).add(l),++this.n},d.prototype.remove=function(f,l){var p=this.sets[f];p.remove(l),0===p.count()&&delete this.sets[f],--this.n},d.prototype.forAll=function(f){for(var l in this.sets)f(this.sets[l],Number(l))},d.prototype.forAllModules=function(f){this.forAll(function(l,p){return l.forAll(f)})},d.prototype.intersection=function(f){var l=new d;return this.forAll(function(p,y){if(y in f.sets){var C=p.intersection(f.sets[y]),T=C.count();T>0&&(l.sets[y]=C,l.n+=T)}}),l},d}();E.LinkSets=c,E.getGroups=function(d,f,l,p){for(var C=new a(d.length,f,l,p);C.greedyMerge(););var T=[],N=C.getGroupHierarchy(T);return T.forEach(function(A){var O=function(k){var L=A[k];"number"==typeof L&&(A[k]=d[L])};O("source"),O("target")}),{groups:N,powerEdges:T}}},9516:(x,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=function(){function _(v){this.elem=v,this.subheaps=[]}return _.prototype.toString=function(v){for(var m="",h=!1,c=0;c<this.subheaps.length;++c){var u=this.subheaps[c];u.elem?(h&&(m+=","),m+=u.toString(v),h=!0):h=!1}return""!==m&&(m="("+m+")"),(this.elem?v(this.elem):"")+m},_.prototype.forEach=function(v){this.empty()||(v(this.elem,this),this.subheaps.forEach(function(m){return m.forEach(v)}))},_.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(v,m){return v+m.count()},0)},_.prototype.min=function(){return this.elem},_.prototype.empty=function(){return null==this.elem},_.prototype.contains=function(v){if(this===v)return!0;for(var m=0;m<this.subheaps.length;m++)if(this.subheaps[m].contains(v))return!0;return!1},_.prototype.isHeap=function(v){var m=this;return this.subheaps.every(function(h){return v(m.elem,h.elem)&&h.isHeap(v)})},_.prototype.insert=function(v,m){return this.merge(new _(v),m)},_.prototype.merge=function(v,m){return this.empty()?v:v.empty()?this:m(this.elem,v.elem)?(this.subheaps.push(v),this):(v.subheaps.push(this),v)},_.prototype.removeMin=function(v){return this.empty()?null:this.mergePairs(v)},_.prototype.mergePairs=function(v){if(0==this.subheaps.length)return new _(null);if(1==this.subheaps.length)return this.subheaps[0];var m=this.subheaps.pop().merge(this.subheaps.pop(),v),h=this.mergePairs(v);return m.merge(h,v)},_.prototype.decreaseKey=function(v,m,h,c){var u=v.removeMin(c);v.elem=u.elem,v.subheaps=u.subheaps,null!==h&&null!==u.elem&&h(v.elem,v);var t=new _(m);return null!==h&&h(m,t),this.merge(t,c)},_}();E.PairingHeap=o;var a=function(){function _(v){this.lessThan=v}return _.prototype.top=function(){return this.empty()?null:this.root.elem},_.prototype.push=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];for(var h,u,c=0;u=v[c];++c)h=new o(u),this.root=this.empty()?h:this.root.merge(h,this.lessThan);return h},_.prototype.empty=function(){return!this.root||!this.root.elem},_.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},_.prototype.forEach=function(v){this.root.forEach(v)},_.prototype.pop=function(){if(this.empty())return null;var v=this.root.min();return this.root=this.root.removeMin(this.lessThan),v},_.prototype.reduceKey=function(v,m,h){void 0===h&&(h=null),this.root=this.root.decreaseKey(v,m,h,this.lessThan)},_.prototype.toString=function(v){return this.root.toString(v)},_.prototype.count=function(){return this.root.count()},_}();E.PriorityQueue=a},3294:function(x,E){"use strict";var h,o=this&&this.__extends||(h=function(c,u){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,d){t.__proto__=d}||function(t,d){for(var f in d)d.hasOwnProperty(f)&&(t[f]=d[f])})(c,u)},function(c,u){function t(){this.constructor=c}h(c,u),c.prototype=null===u?Object.create(u):(t.prototype=u.prototype,new t)});Object.defineProperty(E,"__esModule",{value:!0});var a=function(){function h(){this.findIter=function(c){for(var u=this._root,t=this.iterator();null!==u;){var d=this._comparator(c,u.data);if(0===d)return t._cursor=u,t;t._ancestors.push(u),u=u.get_child(d>0)}return null}}return h.prototype.clear=function(){this._root=null,this.size=0},h.prototype.find=function(c){for(var u=this._root;null!==u;){var t=this._comparator(c,u.data);if(0===t)return u.data;u=u.get_child(t>0)}return null},h.prototype.lowerBound=function(c){return this._bound(c,this._comparator)},h.prototype.upperBound=function(c){var u=this._comparator;return this._bound(c,function(d,f){return u(f,d)})},h.prototype.min=function(){var c=this._root;if(null===c)return null;for(;null!==c.left;)c=c.left;return c.data},h.prototype.max=function(){var c=this._root;if(null===c)return null;for(;null!==c.right;)c=c.right;return c.data},h.prototype.iterator=function(){return new _(this)},h.prototype.each=function(c){for(var t,u=this.iterator();null!==(t=u.next());)c(t)},h.prototype.reach=function(c){for(var t,u=this.iterator();null!==(t=u.prev());)c(t)},h.prototype._bound=function(c,u){for(var t=this._root,d=this.iterator();null!==t;){var f=this._comparator(c,t.data);if(0===f)return d._cursor=t,d;d._ancestors.push(t),t=t.get_child(f>0)}for(var l=d._ancestors.length-1;l>=0;--l)if(u(c,(t=d._ancestors[l]).data)>0)return d._cursor=t,d._ancestors.length=l,d;return d._ancestors.length=0,d},h}();E.TreeBase=a;var _=function(){function h(c){this._tree=c,this._ancestors=[],this._cursor=null}return h.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},h.prototype.next=function(){if(null===this._cursor){var c=this._tree._root;null!==c&&this._minNode(c)}else if(null===this._cursor.right){var u;do{if(u=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===u)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},h.prototype.prev=function(){if(null===this._cursor){var c=this._tree._root;null!==c&&this._maxNode(c)}else if(null===this._cursor.left){var u;do{if(u=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===u)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},h.prototype._minNode=function(c){for(;null!==c.left;)this._ancestors.push(c),c=c.left;this._cursor=c},h.prototype._maxNode=function(c){for(;null!==c.right;)this._ancestors.push(c),c=c.right;this._cursor=c},h}();E.Iterator=_;var v=function(){function h(c){this.data=c,this.left=null,this.right=null,this.red=!0}return h.prototype.get_child=function(c){return c?this.right:this.left},h.prototype.set_child=function(c,u){c?this.right=u:this.left=u},h}(),m=function(h){function c(u){var t=h.call(this)||this;return t._root=null,t._comparator=u,t.size=0,t}return o(c,h),c.prototype.insert=function(u){var t=!1;if(null===this._root)this._root=new v(u),t=!0,this.size++;else{var d=new v(void 0),f=!1,l=!1,p=null,y=d,C=null,T=this._root;for(y.right=this._root;;){if(null===T?(T=new v(u),C.set_child(f,T),t=!0,this.size++):c.is_red(T.left)&&c.is_red(T.right)&&(T.red=!0,T.left.red=!1,T.right.red=!1),c.is_red(T)&&c.is_red(C)){var N=y.right===p;T===C.get_child(l)?y.set_child(N,c.single_rotate(p,!l)):y.set_child(N,c.double_rotate(p,!l))}var A=this._comparator(T.data,u);if(0===A)break;l=f,null!==p&&(y=p),p=C,C=T,T=T.get_child(f=A<0)}this._root=d.right}return this._root.red=!1,t},c.prototype.remove=function(u){if(null===this._root)return!1;var t=new v(void 0),d=t;d.right=this._root;for(var f=null,l=null,p=null,y=!0;null!==d.get_child(y);){var C=y;l=f,f=d,d=d.get_child(y);var T=this._comparator(u,d.data);if(y=T>0,0===T&&(p=d),!c.is_red(d)&&!c.is_red(d.get_child(y)))if(c.is_red(d.get_child(!y))){var N=c.single_rotate(d,y);f.set_child(C,N),f=N}else if(!c.is_red(d.get_child(!y))){var A=f.get_child(!C);if(null!==A)if(c.is_red(A.get_child(!C))||c.is_red(A.get_child(C))){var O=l.right===f;c.is_red(A.get_child(C))?l.set_child(O,c.double_rotate(f,C)):c.is_red(A.get_child(!C))&&l.set_child(O,c.single_rotate(f,C));var k=l.get_child(O);k.red=!0,d.red=!0,k.left.red=!1,k.right.red=!1}else f.red=!1,A.red=!0,d.red=!0}}return null!==p&&(p.data=d.data,f.set_child(f.right===d,d.get_child(null===d.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==p},c.is_red=function(u){return null!==u&&u.red},c.single_rotate=function(u,t){var d=u.get_child(!t);return u.set_child(!t,d.get_child(t)),d.set_child(t,u),u.red=!0,d.red=!1,d},c.double_rotate=function(u,t){return u.set_child(!t,c.single_rotate(u.get_child(!t),!t)),c.single_rotate(u,t)},c}(a);E.RBTree=m},7262:function(x,E,o){"use strict";var I,a=this&&this.__extends||(I=function(Z,M){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,B){P.__proto__=B}||function(P,B){for(var H in B)B.hasOwnProperty(H)&&(P[H]=B[H])})(Z,M)},function(Z,M){function P(){this.constructor=Z}I(Z,M),Z.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(E,"__esModule",{value:!0});var _=o(3535),v=o(3294);function m(I){return I.bounds=void 0!==I.leaves?I.leaves.reduce(function(Z,M){return M.bounds.union(Z)},h.empty()):h.empty(),void 0!==I.groups&&(I.bounds=I.groups.reduce(function(Z,M){return m(M).union(Z)},I.bounds)),I.bounds=I.bounds.inflate(I.padding),I.bounds}E.computeGroupBounds=m;var h=function(){function I(Z,M,P,B){this.x=Z,this.X=M,this.y=P,this.Y=B}return I.empty=function(){return new I(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},I.prototype.cx=function(){return(this.x+this.X)/2},I.prototype.cy=function(){return(this.y+this.Y)/2},I.prototype.overlapX=function(Z){var M=this.cx(),P=Z.cx();return M<=P&&Z.x<this.X?this.X-Z.x:P<=M&&this.x<Z.X?Z.X-this.x:0},I.prototype.overlapY=function(Z){var M=this.cy(),P=Z.cy();return M<=P&&Z.y<this.Y?this.Y-Z.y:P<=M&&this.y<Z.Y?Z.Y-this.y:0},I.prototype.setXCentre=function(Z){var M=Z-this.cx();this.x+=M,this.X+=M},I.prototype.setYCentre=function(Z){var M=Z-this.cy();this.y+=M,this.Y+=M},I.prototype.width=function(){return this.X-this.x},I.prototype.height=function(){return this.Y-this.y},I.prototype.union=function(Z){return new I(Math.min(this.x,Z.x),Math.max(this.X,Z.X),Math.min(this.y,Z.y),Math.max(this.Y,Z.Y))},I.prototype.lineIntersections=function(Z,M,P,B){for(var H=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],et=[],G=0;G<4;++G){var D=I.lineIntersection(Z,M,P,B,H[G][0],H[G][1],H[G][2],H[G][3]);null!==D&&et.push({x:D.x,y:D.y})}return et},I.prototype.rayIntersection=function(Z,M){var P=this.lineIntersections(this.cx(),this.cy(),Z,M);return P.length>0?P[0]:null},I.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},I.lineIntersection=function(Z,M,P,B,H,et,G,D){var X=P-Z,W=G-H,it=B-M,q=D-et,st=q*X-W*it;if(0==st)return null;var lt=Z-H,pt=M-et,K=(W*pt-q*lt)/st,ut=(X*pt-it*lt)/st;return K>=0&&K<=1&&ut>=0&&ut<=1?{x:Z+K*X,y:M+K*it}:null},I.prototype.inflate=function(Z){return new I(this.x-Z,this.X+Z,this.y-Z,this.Y+Z)},I}();E.Rectangle=h,E.makeEdgeBetween=function(I,Z,M){var P=I.rayIntersection(Z.cx(),Z.cy())||{x:I.cx(),y:I.cy()},B=Z.rayIntersection(I.cx(),I.cy())||{x:Z.cx(),y:Z.cy()},H=B.x-P.x,et=B.y-P.y,G=Math.sqrt(H*H+et*et),D=G-M;return{sourceIntersection:P,targetIntersection:B,arrowStart:{x:P.x+D*H/G,y:P.y+D*et/G}}},E.makeEdgeTo=function(I,Z,M){var P=Z.rayIntersection(I.x,I.y);P||(P={x:Z.cx(),y:Z.cy()});var B=P.x-I.x,H=P.y-I.y,et=Math.sqrt(B*B+H*H);return{x:P.x-M*B/et,y:P.y-M*H/et}};var t=function(Z,M,P){this.v=Z,this.r=M,this.pos=P,this.prev=l(),this.next=l()},d=function(Z,M,P){this.isOpen=Z,this.v=M,this.pos=P};function f(I,Z){return I.pos>Z.pos?1:I.pos<Z.pos||I.isOpen?-1:Z.isOpen?1:0}function l(){return new v.RBTree(function(I,Z){return I.pos-Z.pos})}var p={getCentre:function(I){return I.cx()},getOpen:function(I){return I.y},getClose:function(I){return I.Y},getSize:function(I){return I.width()},makeRect:function(I,Z,M,P){return new h(M-P/2,M+P/2,I,Z)},findNeighbours:function(I,Z){var M=function(P,B){for(var et,H=Z.findIter(I);null!==(et=H[P]());){var G=et.r.overlapX(I.r);if((G<=0||G<=et.r.overlapY(I.r))&&(I[P].insert(et),et[B].insert(I)),G<=0)break}};M("next","prev"),M("prev","next")}},y={getCentre:function(I){return I.cy()},getOpen:function(I){return I.x},getClose:function(I){return I.X},getSize:function(I){return I.height()},makeRect:function(I,Z,M,P){return new h(I,Z,M-P/2,M+P/2)},findNeighbours:function(I,Z){var M=function(P,B){var H=Z.findIter(I)[P]();null!==H&&H.r.overlapX(I.r)>0&&(I[P].insert(H),H[B].insert(I))};M("next","prev"),M("prev","next")}};function C(I,Z,M,P){void 0===P&&(P=!1);var B=I.padding,H=void 0!==I.groups?I.groups.length:0,et=void 0!==I.leaves?I.leaves.length:0,G=H?I.groups.reduce(function(ht,gt){return ht.concat(C(gt,Z,M,!0))},[]):[],D=(P?2:0)+et+H,X=new Array(D),W=new Array(D),it=0,q=function(ht,gt){W[it]=ht,X[it++]=gt};if(P){var st=I.bounds,lt=Z.getCentre(st),pt=Z.getSize(st)/2,z=Z.getOpen(st),K=Z.getClose(st),rt=lt-pt+B/2,ut=lt+pt-B/2;I.minVar.desiredPosition=rt,q(Z.makeRect(z,K,rt,B),I.minVar),I.maxVar.desiredPosition=ut,q(Z.makeRect(z,K,ut,B),I.maxVar)}et&&I.leaves.forEach(function(ht){return q(ht.bounds,ht.variable)}),H&&I.groups.forEach(function(ht){var gt=ht.bounds;q(Z.makeRect(Z.getOpen(gt),Z.getClose(gt),Z.getCentre(gt),Z.getSize(gt)),ht.minVar)});var ft=T(W,X,Z,M);return H&&(X.forEach(function(ht){ht.cOut=[],ht.cIn=[]}),ft.forEach(function(ht){ht.left.cOut.push(ht),ht.right.cIn.push(ht)}),I.groups.forEach(function(ht){var gt=(ht.padding-Z.getSize(ht.bounds))/2;ht.minVar.cIn.forEach(function(xt){return xt.gap+=gt}),ht.minVar.cOut.forEach(function(xt){xt.left=ht.maxVar,xt.gap+=gt})})),G.concat(ft)}function T(I,Z,M,P){var B,H=I.length,et=2*H;console.assert(Z.length>=H);var G=new Array(et);for(B=0;B<H;++B){var D=I[B],X=new t(Z[B],D,M.getCentre(D));G[B]=new d(!0,X,M.getOpen(D)),G[B+H]=new d(!1,X,M.getClose(D))}G.sort(f);var W=new Array,it=l();for(B=0;B<et;++B){var q=G[B];if(X=q.v,q.isOpen)it.insert(X),M.findNeighbours(X,it);else{it.remove(X);var st=function(z,K){var rt=(M.getSize(z.r)+M.getSize(K.r))/2+P;W.push(new _.Constraint(z.v,K.v,rt))},lt=function(z,K,rt){for(var ut,ft=X[z].iterator();null!==(ut=ft[z]());)rt(ut,X),ut[K].remove(X)};lt("prev","next",function(z,K){return st(z,K)}),lt("next","prev",function(z,K){return st(K,z)})}}return console.assert(0===it.size),W}function O(I,Z){return T(I,Z,p,1e-6)}function k(I,Z){return T(I,Z,y,1e-6)}function L(I){return C(I,p,1e-6)}function J(I){return C(I,y,1e-6)}E.generateXConstraints=O,E.generateYConstraints=k,E.generateXGroupConstraints=L,E.generateYGroupConstraints=J,E.removeOverlaps=function(I){var Z=I.map(function(B){return new _.Variable(B.cx())}),M=O(I,Z),P=new _.Solver(Z,M);P.solve(),Z.forEach(function(B,H){return I[H].setXCentre(B.position())}),Z=I.map(function(B){return new _.Variable(B.cy())}),M=k(I,Z),(P=new _.Solver(Z,M)).solve(),Z.forEach(function(B,H){return I[H].setYCentre(B.position())})};var V=function(I){function Z(M,P){var B=I.call(this,0,P)||this;return B.index=M,B}return a(Z,I),Z}(_.Variable);E.IndexedVariable=V;var Q=function(){function I(Z,M,P,B,H){var et=this;if(void 0===P&&(P=null),void 0===B&&(B=null),void 0===H&&(H=!1),this.nodes=Z,this.groups=M,this.rootGroup=P,this.avoidOverlaps=H,this.variables=Z.map(function(D,X){return D.variable=new V(X,1)}),B&&this.createConstraints(B),H&&P&&void 0!==P.groups){Z.forEach(function(D){if(D.width&&D.height){var X=D.width/2,W=D.height/2;D.bounds=new h(D.x-X,D.x+X,D.y-W,D.y+W)}else D.bounds=new h(D.x,D.x,D.y,D.y)}),m(P);var G=Z.length;M.forEach(function(D){et.variables[G]=D.minVar=new V(G++,void 0!==D.stiffness?D.stiffness:.01),et.variables[G]=D.maxVar=new V(G++,void 0!==D.stiffness?D.stiffness:.01)})}}return I.prototype.createSeparation=function(Z){return new _.Constraint(this.nodes[Z.left].variable,this.nodes[Z.right].variable,Z.gap,void 0!==Z.equality&&Z.equality)},I.prototype.makeFeasible=function(Z){var M=this;if(this.avoidOverlaps){var P="x",B="width";"x"===Z.axis&&(P="y",B="height");var H=Z.offsets.map(function(G){return M.nodes[G.node]}).sort(function(G,D){return G[P]-D[P]}),et=null;H.forEach(function(G){if(et){var D=et[P]+et[B];D>G[P]&&(G[P]=D)}et=G})}},I.prototype.createAlignment=function(Z){var M=this,P=this.nodes[Z.offsets[0].node].variable;this.makeFeasible(Z);var B="x"===Z.axis?this.xConstraints:this.yConstraints;Z.offsets.slice(1).forEach(function(H){B.push(new _.Constraint(P,M.nodes[H.node].variable,H.offset,!0))})},I.prototype.createConstraints=function(Z){var M=this,P=function(B){return void 0===B.type||"separation"===B.type};this.xConstraints=Z.filter(function(B){return"x"===B.axis&&P(B)}).map(function(B){return M.createSeparation(B)}),this.yConstraints=Z.filter(function(B){return"y"===B.axis&&P(B)}).map(function(B){return M.createSeparation(B)}),Z.filter(function(B){return"alignment"===B.type}).forEach(function(B){return M.createAlignment(B)})},I.prototype.setupVariablesAndBounds=function(Z,M,P,B){this.nodes.forEach(function(H,et){H.fixed?(H.variable.weight=H.fixedWeight?H.fixedWeight:1e3,P[et]=B(H)):H.variable.weight=1;var G=(H.width||0)/2,D=(H.height||0)/2,X=Z[et],W=M[et];H.bounds=new h(X-G,X+G,W-D,W+D)})},I.prototype.xProject=function(Z,M,P){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(Z,M,Z,P,function(B){return B.px},this.xConstraints,L,function(B){return B.bounds.setXCentre(P[B.variable.index]=B.variable.position())},function(B){var H=P[B.minVar.index]=B.minVar.position(),et=P[B.maxVar.index]=B.maxVar.position(),G=B.padding/2;B.bounds.x=H-G,B.bounds.X=et+G})},I.prototype.yProject=function(Z,M,P){!this.rootGroup&&!this.yConstraints||this.project(Z,M,M,P,function(B){return B.py},this.yConstraints,J,function(B){return B.bounds.setYCentre(P[B.variable.index]=B.variable.position())},function(B){var H=P[B.minVar.index]=B.minVar.position(),et=P[B.maxVar.index]=B.maxVar.position(),G=B.padding/2;B.bounds.y=H-G,B.bounds.Y=et+G})},I.prototype.projectFunctions=function(){var Z=this;return[function(M,P,B){return Z.xProject(M,P,B)},function(M,P,B){return Z.yProject(M,P,B)}]},I.prototype.project=function(Z,M,P,B,H,et,G,D,X){this.setupVariablesAndBounds(Z,M,B,H),this.rootGroup&&this.avoidOverlaps&&(m(this.rootGroup),et=et.concat(G(this.rootGroup))),this.solve(this.variables,et,P,B),this.nodes.forEach(D),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(X),m(this.rootGroup))},I.prototype.solve=function(Z,M,P,B){var H=new _.Solver(Z,M);H.setStartingPositions(P),H.setDesiredPositions(B),H.solve()},I}();E.Projection=Q},5259:(x,E,o)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a=o(9516),_=function(u,t){this.id=u,this.distance=t},v=function(u){this.id=u,this.neighbours=[]},m=function(u,t,d){this.node=u,this.prev=t,this.d=d},h=function(){function c(u,t,d,f,l){this.n=u,this.es=t,this.neighbours=new Array(this.n);for(var p=this.n;p--;)this.neighbours[p]=new v(p);for(p=this.es.length;p--;){var y=this.es[p],C=d(y),T=f(y),N=l(y);this.neighbours[C].neighbours.push(new _(T,N)),this.neighbours[T].neighbours.push(new _(C,N))}}return c.prototype.DistanceMatrix=function(){for(var u=new Array(this.n),t=0;t<this.n;++t)u[t]=this.dijkstraNeighbours(t);return u},c.prototype.DistancesFromNode=function(u){return this.dijkstraNeighbours(u)},c.prototype.PathFromNodeToNode=function(u,t){return this.dijkstraNeighbours(u,t)},c.prototype.PathFromNodeToNodeWithPrevCost=function(u,t,d){var f=new a.PriorityQueue(function(J,Y){return J.d<=Y.d}),l=this.neighbours[u],p=new m(l,null,0),y={};for(f.push(p);!f.empty()&&(l=(p=f.pop()).node).id!==t;)for(var C=l.neighbours.length;C--;){var T=l.neighbours[C],N=this.neighbours[T.id];if(!p.prev||N.id!==p.prev.node.id){var A=N.id+","+l.id;if(!(A in y&&y[A]<=p.d)){var O=p.prev?d(p.prev.node.id,l.id,N.id):0,k=p.d+T.distance+O;y[A]=k,f.push(new m(N,p,k))}}}for(var L=[];p.prev;)L.push((p=p.prev).node.id);return L},c.prototype.dijkstraNeighbours=function(u,t){void 0===t&&(t=-1);for(var d=new a.PriorityQueue(function(O,k){return O.d<=k.d}),f=this.neighbours.length,l=new Array(f);f--;){var p=this.neighbours[f];p.d=f===u?0:Number.POSITIVE_INFINITY,p.q=d.push(p)}for(;!d.empty();){var y=d.pop();if(l[y.id]=y.d,y.id===t){for(var C=[],T=y;void 0!==T.prev;)C.push(T.prev.id),T=T.prev;return C}for(f=y.neighbours.length;f--;){var N=y.neighbours[f],A=(T=this.neighbours[N.id],y.d+N.distance);y.d!==Number.MAX_VALUE&&T.d>A&&(T.d=A,T.prev=y,d.reduceKey(T.q,T,function(k,L){return k.q=L}))}}return l},c}();E.Calculator=h},3535:(x,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=function(){function u(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return u.prototype.addVariable=function(t){var d=this.scale/t.scale,l=t.weight;this.AB+=l*d*(t.offset/t.scale),this.AD+=l*d*t.desiredPosition,this.A2+=l*d*d},u.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},u}();E.PositionStats=o;var a=function(){function u(t,d,f,l){void 0===l&&(l=!1),this.left=t,this.right=d,this.gap=f,this.equality=l,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=d,this.gap=f,this.equality=l}return u.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},u}();E.Constraint=a;var _=function(){function u(t,d,f){void 0===d&&(d=1),void 0===f&&(f=1),this.desiredPosition=t,this.weight=d,this.scale=f,this.offset=0}return u.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},u.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},u.prototype.visitNeighbours=function(t,d){var f=function(l,p){return l.active&&t!==p&&d(l,p)};this.cOut.forEach(function(l){return f(l,l.right)}),this.cIn.forEach(function(l){return f(l,l.left)})},u}();E.Variable=_;var v=function(){function u(t){this.vars=[],t.offset=0,this.ps=new o(t.scale),this.addVariable(t)}return u.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},u.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,d=this.vars.length;t<d;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},u.prototype.compute_lm=function(t,d,f){var l=this,p=t.dfdv();return t.visitNeighbours(d,function(y,C){var T=l.compute_lm(C,t,f);C===y.right?(p+=T*y.left.scale,y.lm=T):(p+=T*y.right.scale,y.lm=-T),f(y)}),p/t.scale},u.prototype.populateSplitBlock=function(t,d){var f=this;t.visitNeighbours(d,function(l,p){p.offset=t.offset+(p===l.right?l.gap:-l.gap),f.addVariable(p),f.populateSplitBlock(p,t)})},u.prototype.traverse=function(t,d,f,l){var p=this;void 0===f&&(f=this.vars[0]),void 0===l&&(l=null),f.visitNeighbours(l,function(y,C){d.push(t(y)),p.traverse(t,d,C,f)})},u.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(d){!d.equality&&(null===t||d.lm<t.lm)&&(t=d)}),t},u.prototype.findMinLMBetween=function(t,d){this.compute_lm(t,null,function(){});var f=null;return this.findPath(t,null,d,function(l,p){!l.equality&&l.right===p&&(null===f||l.lm<f.lm)&&(f=l)}),f},u.prototype.findPath=function(t,d,f,l){var p=this,y=!1;return t.visitNeighbours(d,function(C,T){!y&&(T===f||p.findPath(T,t,f,l))&&(y=!0,l(C,T))}),y},u.prototype.isActiveDirectedPathBetween=function(t,d){if(t===d)return!0;for(var f=t.cOut.length;f--;){var l=t.cOut[f];if(l.active&&this.isActiveDirectedPathBetween(l.right,d))return!0}return!1},u.split=function(t){return t.active=!1,[u.createSplitBlock(t.left),u.createSplitBlock(t.right)]},u.createSplitBlock=function(t){var d=new u(t);return d.populateSplitBlock(t,null),d},u.prototype.splitBetween=function(t,d){var f=this.findMinLMBetween(t,d);if(null!==f){var l=u.split(f);return{constraint:f,lb:l[0],rb:l[1]}}return null},u.prototype.mergeAcross=function(t,d,f){d.active=!0;for(var l=0,p=t.vars.length;l<p;++l){var y=t.vars[l];y.offset+=f,this.addVariable(y)}this.posn=this.ps.getPosn()},u.prototype.cost=function(){for(var t=0,d=this.vars.length;d--;){var f=this.vars[d],l=f.position()-f.desiredPosition;t+=l*l*f.weight}return t},u}();E.Block=v;var m=function(){function u(t){this.vs=t;var d=t.length;for(this.list=new Array(d);d--;){var f=new v(t[d]);this.list[d]=f,f.blockInd=d}}return u.prototype.cost=function(){for(var t=0,d=this.list.length;d--;)t+=this.list[d].cost();return t},u.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},u.prototype.remove=function(t){var d=this.list.length-1,f=this.list[d];this.list.length=d,t!==f&&(this.list[t.blockInd]=f,f.blockInd=t.blockInd)},u.prototype.merge=function(t){var d=t.left.block,f=t.right.block,l=t.right.offset-t.left.offset-t.gap;d.vars.length<f.vars.length?(f.mergeAcross(d,t,l),this.remove(d)):(d.mergeAcross(f,t,-l),this.remove(f))},u.prototype.forEach=function(t){this.list.forEach(t)},u.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},u.prototype.split=function(t){var d=this;this.updateBlockPositions(),this.list.forEach(function(f){var l=f.findMinLM();null!==l&&l.lm<h.LAGRANGIAN_TOLERANCE&&(f=l.left.block,v.split(l).forEach(function(p){return d.insert(p)}),d.remove(f),t.push(l))})},u}();E.Blocks=m;var h=function(){function u(t,d){this.vs=t,this.cs=d,this.vs=t,t.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=d,d.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=d.map(function(f){return f.active=!1,f}),this.bs=null}return u.prototype.cost=function(){return this.bs.cost()},u.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(d){return d.active=!1,d}),this.bs=new m(this.vs),this.bs.forEach(function(d,f){return d.posn=t[f]})},u.prototype.setDesiredPositions=function(t){this.vs.forEach(function(d,f){return d.desiredPosition=t[f]})},u.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,d=null,f=this.inactive,l=f.length,p=l,y=0;y<l;++y){var C=f[y];if(!C.unsatisfiable){var T=C.slack();if((C.equality||T<t)&&(t=T,d=C,p=y,C.equality))break}}return p!==l&&(t<u.ZERO_UPPERBOUND&&!d.active||d.equality)&&(f[p]=f[l-1],f.length=l-1),d},u.prototype.satisfy=function(){null==this.bs&&(this.bs=new m(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<u.ZERO_UPPERBOUND&&!t.active);){var d=t.left.block;if(d!==t.right.block)this.bs.merge(t);else{if(d.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var l=d.splitBetween(t.left,t.right);if(null===l){t.unsatisfiable=!0;continue}this.bs.insert(l.lb),this.bs.insert(l.rb),this.bs.remove(d),this.inactive.push(l.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},u.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,d=this.bs.cost();Math.abs(t-d)>1e-4;)this.satisfy(),t=d,d=this.bs.cost();return d},u.LAGRANGIAN_TOLERANCE=-1e-4,u.ZERO_UPPERBOUND=-1e-10,u}();E.Solver=h,E.removeOverlapInOneDimension=function(u,t,d){for(var f=u.map(function(V){return new _(V.desiredCenter)}),l=[],p=u.length,y=0;y<p-1;y++)l.push(new a(f[y],f[y+1],(u[y].size+u[y+1].size)/2));var N=f[0],A=f[p-1],O=u[0].size/2,k=u[p-1].size/2,L=null,J=null;return t&&(L=new _(t,1e3*N.weight),f.push(L),l.push(new a(L,N,O))),d&&(J=new _(d,1e3*A.weight),f.push(J),l.push(new a(A,J,k))),new h(f,l).solve(),{newCenters:f.slice(0,u.length).map(function(V){return V.position()}),lowerBound:L?L.position():N.position()-O,upperBound:J?J.position():A.position()+k}}},971:(x,E,o)=>{"use strict";o.r(E),o.d(E,{LayoutModule:()=>fd});var a={};o.r(a),o.d(a,{forceCenter:()=>oa,forceCollide:()=>Jr,forceLink:()=>Hr,forceManyBody:()=>zr,forceRadial:()=>Za,forceSimulation:()=>Qr,forceX:()=>Fa,forceY:()=>Ma});var _={};o.r(_),o.d(_,{dispatch:()=>ln});var v={};o.r(v),o.d(v,{interval:()=>La,now:()=>fe,timeout:()=>dn,timer:()=>Re,timerFlush:()=>er});var m=o(665),h=o(1470),c=o(8583),u=o(7902),t=o(7716),W=o(7238);function it(){}function q(n){return null==n?it:function(){return this.querySelector(n)}}function lt(){return[]}function pt(n){return null==n?lt:function(){return this.querySelectorAll(n)}}function K(n){return function(){return this.matches(n)}}function ut(n){return new Array(n.length)}function ht(n,i){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=i}function Ft(n,i,e,r,s,g){for(var w,b=0,S=i.length,F=g.length;b<F;++b)(w=i[b])?(w.__data__=g[b],r[b]=w):e[b]=new ht(n,g[b]);for(;b<S;++b)(w=i[b])&&(s[b]=w)}function bt(n,i,e,r,s,g,b){var w,S,j,F={},U=i.length,$=g.length,R=new Array(U);for(w=0;w<U;++w)(S=i[w])&&(R[w]=j="$"+b.call(S,S.__data__,w,i),j in F?s[w]=S:F[j]=S);for(w=0;w<$;++w)(S=F[j="$"+b.call(n,g[w],w,g)])?(r[w]=S,S.__data__=g[w],F[j]=null):e[w]=new ht(n,g[w]);for(w=0;w<U;++w)(S=i[w])&&F[R[w]]===S&&(s[w]=S)}function en(n,i){return n<i?-1:n>i?1:n>=i?0:NaN}ht.prototype={constructor:ht,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,i){return this._parent.insertBefore(n,i)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var ce="http://www.w3.org/1999/xhtml";const Vt={svg:"http://www.w3.org/2000/svg",xhtml:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ne(n){var i=n+="",e=i.indexOf(":");return e>=0&&"xmlns"!==(i=n.slice(0,e))&&(n=n.slice(e+1)),Vt.hasOwnProperty(i)?{space:Vt[i],local:n}:n}function Le(n){return function(){this.removeAttribute(n)}}function rn(n){return function(){this.removeAttributeNS(n.space,n.local)}}function De(n,i){return function(){this.setAttribute(n,i)}}function Dt(n,i){return function(){this.setAttributeNS(n.space,n.local,i)}}function Yt(n,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function ni(n,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Zn(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function ii(n){return function(){this.style.removeProperty(n)}}function oi(n,i,e){return function(){this.style.setProperty(n,i,e)}}function si(n,i,e){return function(){var r=i.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function de(n,i){return n.style.getPropertyValue(i)||Zn(n).getComputedStyle(n,null).getPropertyValue(i)}function ui(n){return function(){delete this[n]}}function li(n,i){return function(){this[n]=i}}function ci(n,i){return function(){var e=i.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Fn(n){return n.trim().split(/^|\s+/)}function on(n){return n.classList||new Mn(n)}function Mn(n){this._node=n,this._names=Fn(n.getAttribute("class")||"")}function Pn(n,i){for(var e=on(n),r=-1,s=i.length;++r<s;)e.add(i[r])}function Ln(n,i){for(var e=on(n),r=-1,s=i.length;++r<s;)e.remove(i[r])}function hi(n){return function(){Pn(this,n)}}function fi(n){return function(){Ln(this,n)}}function pi(n,i){return function(){(i.apply(this,arguments)?Pn:Ln)(this,n)}}function mi(){this.textContent=""}function vi(n){return function(){this.textContent=n}}function _i(n){return function(){var i=n.apply(this,arguments);this.textContent=null==i?"":i}}function yi(){this.innerHTML=""}function bi(n){return function(){this.innerHTML=n}}function wi(n){return function(){var i=n.apply(this,arguments);this.innerHTML=null==i?"":i}}function Ei(){this.nextSibling&&this.parentNode.appendChild(this)}function Ni(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Si(n){return function(){var i=this.ownerDocument,e=this.namespaceURI;return e===ce&&i.documentElement.namespaceURI===ce?i.createElement(n):i.createElementNS(e,n)}}function Ii(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Dn(n){var i=ne(n);return(i.local?Ii:Si)(i)}function Oi(){return null}function Fi(){var n=this.parentNode;n&&n.removeChild(this)}function Pi(){var n=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}function Li(){var n=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(n,this.nextSibling):n}Mn.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var i=this._names.indexOf(n);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Gn={},re=null;function Bi(n,i,e){return n=Un(n,i,e),function(r){var s=r.relatedTarget;(!s||s!==this&&!(8&s.compareDocumentPosition(this)))&&n.call(this,r)}}function Un(n,i,e){return function(r){var s=re;re=r;try{n.call(this,this.__data__,i,e)}finally{re=s}}}function Ji(n){return n.trim().split(/^|\s+/).map(function(i){var e="",r=i.indexOf(".");return r>=0&&(e=i.slice(r+1),i=i.slice(0,r)),{type:i,name:e}})}function Vi(n){return function(){var i=this.__on;if(i){for(var g,e=0,r=-1,s=i.length;e<s;++e)g=i[e],n.type&&g.type!==n.type||g.name!==n.name?i[++r]=g:this.removeEventListener(g.type,g.listener,g.capture);++r?i.length=r:delete this.__on}}}function Yi(n,i,e){var r=Gn.hasOwnProperty(n.type)?Bi:Un;return function(s,g,b){var S,w=this.__on,F=r(i,g,b);if(w)for(var U=0,$=w.length;U<$;++U)if((S=w[U]).type===n.type&&S.name===n.name)return this.removeEventListener(S.type,S.listener,S.capture),this.addEventListener(S.type,S.listener=F,S.capture=e),void(S.value=i);this.addEventListener(n.type,F,e),S={type:n.type,name:n.name,value:i,listener:F,capture:e},w?w.push(S):this.__on=[S]}}function Bn(n,i,e){var r=Zn(n),s=r.CustomEvent;"function"==typeof s?s=new s(i,e):(s=r.document.createEvent("Event"),e?(s.initEvent(i,e.bubbles,e.cancelable),s.detail=e.detail):s.initEvent(i,!1,!1)),n.dispatchEvent(s)}function $i(n,i){return function(){return Bn(this,n,i)}}function Hi(n,i){return function(){return Bn(this,n,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Gn={mouseenter:"mouseover",mouseleave:"mouseout"}));var Jn=[null];function kt(n,i){this._groups=n,this._parents=i}function Vn(){return new kt([[document.documentElement]],Jn)}kt.prototype=Vn.prototype={constructor:kt,select:function(n){"function"!=typeof n&&(n=q(n));for(var i=this._groups,e=i.length,r=new Array(e),s=0;s<e;++s)for(var S,F,g=i[s],b=g.length,w=r[s]=new Array(b),U=0;U<b;++U)(S=g[U])&&(F=n.call(S,S.__data__,U,g))&&("__data__"in S&&(F.__data__=S.__data__),w[U]=F);return new kt(r,this._parents)},selectAll:function(n){"function"!=typeof n&&(n=pt(n));for(var i=this._groups,e=i.length,r=[],s=[],g=0;g<e;++g)for(var S,b=i[g],w=b.length,F=0;F<w;++F)(S=b[F])&&(r.push(n.call(S,S.__data__,F,b)),s.push(S));return new kt(r,s)},filter:function(n){"function"!=typeof n&&(n=K(n));for(var i=this._groups,e=i.length,r=new Array(e),s=0;s<e;++s)for(var S,g=i[s],b=g.length,w=r[s]=[],F=0;F<b;++F)(S=g[F])&&n.call(S,S.__data__,F,g)&&w.push(S);return new kt(r,this._parents)},data:function(n,i){if(!n)return j=new Array(this.size()),F=-1,this.each(function(It){j[++F]=It}),j;var e=i?bt:Ft,r=this._parents,s=this._groups;"function"!=typeof n&&(n=function(n){return function(){return n}}(n));for(var g=s.length,b=new Array(g),w=new Array(g),S=new Array(g),F=0;F<g;++F){var U=r[F],$=s[F],R=$.length,j=n.call(U,U&&U.__data__,F,r),nt=j.length,tt=w[F]=new Array(nt),at=b[F]=new Array(nt);e(U,$,tt,at,S[F]=new Array(R),j,i);for(var _t,yt,dt=0,ct=0;dt<nt;++dt)if(_t=tt[dt]){for(dt>=ct&&(ct=dt+1);!(yt=at[ct])&&++ct<nt;);_t._next=yt||null}}return(b=new kt(b,r))._enter=w,b._exit=S,b},enter:function(){return new kt(this._enter||this._groups.map(ut),this._parents)},exit:function(){return new kt(this._exit||this._groups.map(ut),this._parents)},join:function(n,i,e){var r=this.enter(),s=this,g=this.exit();return r="function"==typeof n?n(r):r.append(n+""),null!=i&&(s=i(s)),null==e?g.remove():e(g),r&&s?r.merge(s).order():s},merge:function(n){for(var i=this._groups,e=n._groups,r=i.length,g=Math.min(r,e.length),b=new Array(r),w=0;w<g;++w)for(var R,S=i[w],F=e[w],U=S.length,$=b[w]=new Array(U),j=0;j<U;++j)(R=S[j]||F[j])&&($[j]=R);for(;w<r;++w)b[w]=i[w];return new kt(b,this._parents)},order:function(){for(var n=this._groups,i=-1,e=n.length;++i<e;)for(var b,r=n[i],s=r.length-1,g=r[s];--s>=0;)(b=r[s])&&(g&&4^b.compareDocumentPosition(g)&&g.parentNode.insertBefore(b,g),g=b);return this},sort:function(n){function i($,R){return $&&R?n($.__data__,R.__data__):!$-!R}n||(n=en);for(var e=this._groups,r=e.length,s=new Array(r),g=0;g<r;++g){for(var F,b=e[g],w=b.length,S=s[g]=new Array(w),U=0;U<w;++U)(F=b[U])&&(S[U]=F);S.sort(i)}return new kt(s,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){var n=new Array(this.size()),i=-1;return this.each(function(){n[++i]=this}),n},node:function(){for(var n=this._groups,i=0,e=n.length;i<e;++i)for(var r=n[i],s=0,g=r.length;s<g;++s){var b=r[s];if(b)return b}return null},size:function(){var n=0;return this.each(function(){++n}),n},empty:function(){return!this.node()},each:function(n){for(var i=this._groups,e=0,r=i.length;e<r;++e)for(var w,s=i[e],g=0,b=s.length;g<b;++g)(w=s[g])&&n.call(w,w.__data__,g,s);return this},attr:function(n,i){var e=ne(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==i?e.local?rn:Le:"function"==typeof i?e.local?ni:Yt:e.local?Dt:De)(e,i))},style:function(n,i,e){return arguments.length>1?this.each((null==i?ii:"function"==typeof i?si:oi)(n,i,null==e?"":e)):de(this.node(),n)},property:function(n,i){return arguments.length>1?this.each((null==i?ui:"function"==typeof i?ci:li)(n,i)):this.node()[n]},classed:function(n,i){var e=Fn(n+"");if(arguments.length<2){for(var r=on(this.node()),s=-1,g=e.length;++s<g;)if(!r.contains(e[s]))return!1;return!0}return this.each(("function"==typeof i?pi:i?hi:fi)(e,i))},text:function(n){return arguments.length?this.each(null==n?mi:("function"==typeof n?_i:vi)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?yi:("function"==typeof n?wi:bi)(n)):this.node().innerHTML},raise:function(){return this.each(Ei)},lower:function(){return this.each(Ni)},append:function(n){var i="function"==typeof n?n:Dn(n);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function(n,i){var e="function"==typeof n?n:Dn(n),r=null==i?Oi:"function"==typeof i?i:q(i);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Fi)},clone:function(n){return this.select(n?Li:Pi)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,i,e){var s,b,r=Ji(n+""),g=r.length;if(!(arguments.length<2)){for(w=i?Yi:Vi,null==e&&(e=!1),s=0;s<g;++s)this.each(w(r[s],i,e));return this}var w=this.node().__on;if(w)for(var U,S=0,F=w.length;S<F;++S)for(s=0,U=w[S];s<g;++s)if((b=r[s]).type===U.type&&b.name===U.name)return U.value},dispatch:function(n,i){return this.each(("function"==typeof i?Hi:$i)(n,i))}};const Ce=Vn;function Yn(n){return"string"==typeof n?new kt([[document.querySelector(n)]],[document.documentElement]):new kt([[n]],Jn)}function Rn(n,i,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+i)/6,(n._y0+4*n._y1+e)/6)}function Ge(n){this._context=n}function $n(n,i){this._basis=new Ge(n),this._beta=i}Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,i){switch(n=+n,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rn(this,n,i)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=i}},$n.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,i=this._y,e=n.length-1;if(e>0)for(var S,r=n[0],s=i[0],g=n[e]-r,b=i[e]-s,w=-1;++w<=e;)this._basis.point(this._beta*n[w]+(1-this._beta)*(r+(S=w/e)*g),this._beta*i[w]+(1-this._beta)*(s+S*b));this._x=this._y=null,this._basis.lineEnd()},point:function(n,i){this._x.push(+n),this._y.push(+i)}};const zi=function n(i){function e(r){return 1===i?new Ge(r):new $n(r,i)}return e.beta=function(r){return n(+r)},e}(.85);var sn=Math.PI,an=2*sn,ie=1e-6,ji=an-ie;function un(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hn(){return new un}un.prototype=Hn.prototype={constructor:un,moveTo:function(n,i){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,i){this._+="L"+(this._x1=+n)+","+(this._y1=+i)},quadraticCurveTo:function(n,i,e,r){this._+="Q"+ +n+","+ +i+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(n,i,e,r,s,g){this._+="C"+ +n+","+ +i+","+ +e+","+ +r+","+(this._x1=+s)+","+(this._y1=+g)},arcTo:function(n,i,e,r,s){var g=this._x1,b=this._y1,w=(e=+e)-(n=+n),S=(r=+r)-(i=+i),F=g-n,U=b-i,$=F*F+U*U;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=i);else if($>ie)if(Math.abs(U*w-S*F)>ie&&s){var R=e-g,j=r-b,nt=w*w+S*S,tt=R*R+j*j,at=Math.sqrt(nt),ot=Math.sqrt($),dt=s*Math.tan((sn-Math.acos((nt+$-tt)/(2*at*ot)))/2),ct=dt/ot,_t=dt/at;Math.abs(ct-1)>ie&&(this._+="L"+(n+ct*F)+","+(i+ct*U)),this._+="A"+s+","+s+",0,0,"+ +(U*R>F*j)+","+(this._x1=n+_t*w)+","+(this._y1=i+_t*S)}else this._+="L"+(this._x1=n)+","+(this._y1=i)},arc:function(n,i,e,r,s,g){n=+n,i=+i,g=!!g;var b=(e=+e)*Math.cos(r),w=e*Math.sin(r),S=n+b,F=i+w,U=1^g,$=g?r-s:s-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+S+","+F:(Math.abs(this._x1-S)>ie||Math.abs(this._y1-F)>ie)&&(this._+="L"+S+","+F),e&&($<0&&($=$%an+an),$>ji?this._+="A"+e+","+e+",0,1,"+U+","+(n-b)+","+(i-w)+"A"+e+","+e+",0,1,"+U+","+(this._x1=S)+","+(this._y1=F):$>ie&&(this._+="A"+e+","+e+",0,"+ +($>=sn)+","+U+","+(this._x1=n+e*Math.cos(s))+","+(this._y1=i+e*Math.sin(s))))},rect:function(n,i,e,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+i)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};const Xi=Hn;function Ue(n){return function(){return n}}function Qn(n){this._context=n}function Wi(n){return new Qn(n)}function Ki(n){return n[0]}function qi(n){return n[1]}Qn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,i){switch(n=+n,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 1:this._point=2;default:this._context.lineTo(n,i)}}};var zn=Math.PI;function Xn(n){return(1-Math.cos(zn*n))/2}var eo={value:function(){}};function Wn(){for(var r,n=0,i=arguments.length,e={};n<i;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Be(e)}function Be(n){this._=n}function no(n,i){return n.trim().split(/^|\s+/).map(function(e){var r="",s=e.indexOf(".");if(s>=0&&(r=e.slice(s+1),e=e.slice(0,s)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function ro(n,i){for(var s,e=0,r=n.length;e<r;++e)if((s=n[e]).name===i)return s.value}function Kn(n,i,e){for(var r=0,s=n.length;r<s;++r)if(n[r].name===i){n[r]=eo,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:i,value:e}),n}Be.prototype=Wn.prototype={constructor:Be,on:function(n,i){var s,e=this._,r=no(n+"",e),g=-1,b=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++g<b;)if(s=(n=r[g]).type)e[s]=Kn(e[s],n.name,i);else if(null==i)for(s in e)e[s]=Kn(e[s],n.name,null);return this}for(;++g<b;)if((s=(n=r[g]).type)&&(s=ro(e[s],n.name)))return s},copy:function(){var n={},i=this._;for(var e in i)n[e]=i[e].slice();return new Be(n)},call:function(n,i){if((s=arguments.length-2)>0)for(var s,g,e=new Array(s),r=0;r<s;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=0,s=(g=this._[n]).length;r<s;++r)g[r].value.apply(i,e)},apply:function(n,i,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],s=0,g=r.length;s<g;++s)r[s].value.apply(i,e)}};const ln=Wn;var Je,Ne,he=0,Ee=0,Te=0,Ve=0,oe=0,Ye=0,Ae="object"==typeof performance&&performance.now?performance:Date,tr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function fe(){return oe||(tr(io),oe=Ae.now()+Ye)}function io(){oe=0}function Se(){this._call=this._time=this._next=null}function Re(n,i,e){var r=new Se;return r.restart(n,i,e),r}function er(){fe(),++he;for(var i,n=Je;n;)(i=oe-n._time)>=0&&n._call.call(null,i),n=n._next;--he}function nr(){oe=(Ve=Ae.now())+Ye,he=Ee=0;try{er()}finally{he=0,function(){for(var n,e,i=Je,r=1/0;i;)i._call?(r>i._time&&(r=i._time),n=i,i=i._next):(e=i._next,i._next=null,i=n?n._next=e:Je=e);Ne=n,cn(r)}(),oe=0}}function oo(){var n=Ae.now(),i=n-Ve;i>1e3&&(Ye-=i,Ve=n)}function cn(n){he||(Ee&&(Ee=clearTimeout(Ee)),n-oe>24?(n<1/0&&(Ee=setTimeout(nr,n-Ae.now()-Ye)),Te&&(Te=clearInterval(Te))):(Te||(Ve=Ae.now(),Te=setInterval(oo,1e3)),he=1,tr(nr)))}function dn(n,i,e){var r=new Se;return r.restart(function(s){r.stop(),n(s+i)},i=null==i?0:+i,e),r}Se.prototype=Re.prototype={constructor:Se,restart:function(n,i,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?fe():+e)+(null==i?0:+i),!this._next&&Ne!==this&&(Ne?Ne._next=this:Je=this,Ne=this),this._call=n,this._time=e,cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,cn())}};var ao=ln("start","end","cancel","interrupt"),uo=[];function Qe(n,i,e,r,s,g){var b=n.__transition;if(b){if(e in b)return}else n.__transition={};!function(n,i,e){var s,r=n.__transition;function b(F){var U,$,R,j;if(1!==e.state)return S();for(U in r)if((j=r[U]).name===e.name){if(3===j.state)return dn(b);4===j.state?(j.state=6,j.timer.stop(),j.on.call("interrupt",n,n.__data__,j.index,j.group),delete r[U]):+U<i&&(j.state=6,j.timer.stop(),j.on.call("cancel",n,n.__data__,j.index,j.group),delete r[U])}if(dn(function(){3===e.state&&(e.state=4,e.timer.restart(w,e.delay,e.time),w(F))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,s=new Array(R=e.tween.length),U=0,$=-1;U<R;++U)(j=e.tween[U].value.call(n,n.__data__,e.index,e.group))&&(s[++$]=j);s.length=$+1}}function w(F){for(var U=F<e.duration?e.ease.call(null,F/e.duration):(e.timer.restart(S),e.state=5,1),$=-1,R=s.length;++$<R;)s[$].call(n,U);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),S())}function S(){for(var F in e.state=6,e.timer.stop(),delete r[i],r)return;delete n.__transition}r[i]=e,e.timer=Re(function(F){e.state=1,e.timer.restart(b,e.delay,e.time),e.delay<=F&&b(F-e.delay)},0,e.time)}(n,e,{name:i,index:r,group:s,on:ao,tween:uo,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:0})}function pn(n,i){var e=Mt(n,i);if(e.state>0)throw new Error("too late; already scheduled");return e}function Rt(n,i){var e=Mt(n,i);if(e.state>3)throw new Error("too late; already running");return e}function Mt(n,i){var e=n.__transition;if(!e||!(e=e[i]))throw new Error("transition not found");return e}function Kt(n,i){return n=+n,i=+i,function(e){return n*(1-e)+i*e}}var Ie,mn,ur,ze,sr=180/Math.PI,gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ar(n,i,e,r,s,g){var b,w,S;return(b=Math.sqrt(n*n+i*i))&&(n/=b,i/=b),(S=n*e+i*r)&&(e-=n*S,r-=i*S),(w=Math.sqrt(e*e+r*r))&&(e/=w,r/=w,S/=w),n*r<i*e&&(n=-n,i=-i,S=-S,b=-b),{translateX:s,translateY:g,rotate:Math.atan2(i,n)*sr,skewX:Math.atan(S)*sr,scaleX:b,scaleY:w}}function lr(n,i,e,r){function s(F){return F.length?F.pop()+" ":""}return function(F,U){var $=[],R=[];return F=n(F),U=n(U),function(F,U,$,R,j,nt){if(F!==$||U!==R){var tt=j.push("translate(",null,i,null,e);nt.push({i:tt-4,x:Kt(F,$)},{i:tt-2,x:Kt(U,R)})}else($||R)&&j.push("translate("+$+i+R+e)}(F.translateX,F.translateY,U.translateX,U.translateY,$,R),function(F,U,$,R){F!==U?(F-U>180?U+=360:U-F>180&&(F+=360),R.push({i:$.push(s($)+"rotate(",null,r)-2,x:Kt(F,U)})):U&&$.push(s($)+"rotate("+U+r)}(F.rotate,U.rotate,$,R),function(F,U,$,R){F!==U?R.push({i:$.push(s($)+"skewX(",null,r)-2,x:Kt(F,U)}):U&&$.push(s($)+"skewX("+U+r)}(F.skewX,U.skewX,$,R),function(F,U,$,R,j,nt){if(F!==$||U!==R){var tt=j.push(s(j)+"scale(",null,",",null,")");nt.push({i:tt-4,x:Kt(F,$)},{i:tt-2,x:Kt(U,R)})}else(1!==$||1!==R)&&j.push(s(j)+"scale("+$+","+R+")")}(F.scaleX,F.scaleY,U.scaleX,U.scaleY,$,R),F=U=null,function(j){for(var at,nt=-1,tt=R.length;++nt<tt;)$[(at=R[nt]).i]=at.x(j);return $.join("")}}}var go=lr(function(n){return"none"===n?gn:(Ie||(Ie=document.createElement("DIV"),mn=document.documentElement,ur=document.defaultView),Ie.style.transform=n,n=ur.getComputedStyle(mn.appendChild(Ie),null).getPropertyValue("transform"),mn.removeChild(Ie),ar(+(n=n.slice(7,-1).split(","))[0],+n[1],+n[2],+n[3],+n[4],+n[5]))},"px, ","px)","deg)"),mo=lr(function(n){return null!=n&&(ze||(ze=document.createElementNS("http://www.w3.org/2000/svg","g")),ze.setAttribute("transform",n),n=ze.transform.baseVal.consolidate())?ar((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):gn},", ",")",")");function vo(n,i){var e,r;return function(){var s=Rt(this,n),g=s.tween;if(g!==e)for(var b=0,w=(r=e=g).length;b<w;++b)if(r[b].name===i){(r=r.slice()).splice(b,1);break}s.tween=r}}function _o(n,i,e){var r,s;if("function"!=typeof e)throw new Error;return function(){var g=Rt(this,n),b=g.tween;if(b!==r){s=(r=b).slice();for(var w={name:i,value:e},S=0,F=s.length;S<F;++S)if(s[S].name===i){s[S]=w;break}S===F&&s.push(w)}g.tween=s}}function vn(n,i,e){var r=n._id;return n.each(function(){var s=Rt(this,r);(s.value||(s.value={}))[i]=e.apply(this,arguments)}),function(s){return Mt(s,r).value[i]}}function _n(n,i,e){n.prototype=i.prototype=e,e.constructor=n}function cr(n,i){var e=Object.create(n.prototype);for(var r in i)e[r]=i[r];return e}function ke(){}var je=1/.7,pe="\\s*([+-]?\\d+)\\s*",Ze="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yo=/^#([0-9a-f]{3,8})$/,bo=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),wo=new RegExp("^rgb\\("+[Gt,Gt,Gt]+"\\)$"),Co=new RegExp("^rgba\\("+[pe,pe,pe,Ze]+"\\)$"),Eo=new RegExp("^rgba\\("+[Gt,Gt,Gt,Ze]+"\\)$"),To=new RegExp("^hsl\\("+[Ze,Gt,Gt]+"\\)$"),No=new RegExp("^hsla\\("+[Ze,Gt,Gt,Ze]+"\\)$"),dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function Fe(n){var i,e;return n=(n+"").trim().toLowerCase(),(i=yo.exec(n))?(e=i[1].length,i=parseInt(i[1],16),6===e?pr(i):3===e?new Ot(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===e?Xe(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===e?Xe(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=bo.exec(n))?new Ot(i[1],i[2],i[3],1):(i=wo.exec(n))?new Ot(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Co.exec(n))?Xe(i[1],i[2],i[3],i[4]):(i=Eo.exec(n))?Xe(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=To.exec(n))?vr(i[1],i[2]/100,i[3]/100,1):(i=No.exec(n))?vr(i[1],i[2]/100,i[3]/100,i[4]):dr.hasOwnProperty(n)?pr(dr[n]):"transparent"===n?new Ot(NaN,NaN,NaN,0):null}function pr(n){return new Ot(n>>16&255,n>>8&255,255&n,1)}function Xe(n,i,e,r){return r<=0&&(n=i=e=NaN),new Ot(n,i,e,r)}function So(n){return n instanceof ke||(n=Fe(n)),n?new Ot((n=n.rgb()).r,n.g,n.b,n.opacity):new Ot}function We(n,i,e,r){return 1===arguments.length?So(n):new Ot(n,i,e,null==r?1:r)}function Ot(n,i,e,r){this.r=+n,this.g=+i,this.b=+e,this.opacity=+r}function gr(){return"#"+xn(this.r)+xn(this.g)+xn(this.b)}function mr(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function xn(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function vr(n,i,e,r){return r<=0?n=i=e=NaN:e<=0||e>=1?n=i=NaN:i<=0&&(n=NaN),new Ut(n,i,e,r)}function _r(n){if(n instanceof Ut)return new Ut(n.h,n.s,n.l,n.opacity);if(n instanceof ke||(n=Fe(n)),!n)return new Ut;if(n instanceof Ut)return n;var i=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,s=Math.min(i,e,r),g=Math.max(i,e,r),b=NaN,w=g-s,S=(g+s)/2;return w?(b=i===g?(e-r)/w+6*(e<r):e===g?(r-i)/w+2:(i-e)/w+4,w/=S<.5?g+s:2-g-s,b*=60):w=S>0&&S<1?0:b,new Ut(b,w,S,n.opacity)}function Ut(n,i,e,r){this.h=+n,this.s=+i,this.l=+e,this.opacity=+r}function yn(n,i,e){return 255*(n<60?i+(e-i)*n/60:n<180?e:n<240?i+(e-i)*(240-n)/60:i)}function xr(n,i,e,r,s){var g=n*n,b=g*n;return((1-3*n+3*g-b)*i+(4-6*g+3*b)*e+(1+3*n+3*g-3*b)*r+b*s)/6}function yr(n){return function(){return n}}function wr(n,i){var e=i-n;return e?function(n,i){return function(e){return n+e*i}}(n,e):yr(isNaN(n)?i:n)}_n(ke,Fe,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:hr,formatHex:hr,formatHsl:function(){return _r(this).formatHsl()},formatRgb:fr,toString:fr}),_n(Ot,We,cr(ke,{brighter:function(n){return n=null==n?je:Math.pow(je,n),new Ot(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Ot(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gr,formatHex:gr,formatRgb:mr,toString:mr})),_n(Ut,function(n,i,e,r){return 1===arguments.length?_r(n):new Ut(n,i,e,null==r?1:r)},cr(ke,{brighter:function(n){return n=null==n?je:Math.pow(je,n),new Ut(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Ut(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),i=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*i,s=2*e-r;return new Ot(yn(n>=240?n-240:n+120,s,r),yn(n,s,r),yn(n<120?n+240:n-120,s,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const Cr=function n(i){var e=function(n){return 1==(n=+n)?wr:function(i,e){return e-i?function(n,i,e){return n=Math.pow(n,e),i=Math.pow(i,e)-n,e=1/e,function(r){return Math.pow(n+r*i,e)}}(i,e,n):yr(isNaN(i)?e:i)}}(i);function r(s,g){var b=e((s=We(s)).r,(g=We(g)).r),w=e(s.g,g.g),S=e(s.b,g.b),F=wr(s.opacity,g.opacity);return function(U){return s.r=b(U),s.g=w(U),s.b=S(U),s.opacity=F(U),s+""}}return r.gamma=n,r}(1);function Er(n){return function(i){var b,w,e=i.length,r=new Array(e),s=new Array(e),g=new Array(e);for(b=0;b<e;++b)w=We(i[b]),r[b]=w.r||0,s[b]=w.g||0,g[b]=w.b||0;return r=n(r),s=n(s),g=n(g),w.opacity=1,function(S){return w.r=r(S),w.g=s(S),w.b=g(S),w+""}}}Er(function(n){var i=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,i-1):Math.floor(e*i),s=n[r],g=n[r+1];return xr((e-r/i)*i,r>0?n[r-1]:2*s-g,s,g,r<i-1?n[r+2]:2*g-s)}}),Er(function(n){var i=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*i);return xr((e-r/i)*i,n[(r+i-1)%i],n[r%i],n[(r+1)%i],n[(r+2)%i])}});var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(bn.source,"g");function Lo(n,i){var r,s,g,e=bn.lastIndex=wn.lastIndex=0,b=-1,w=[],S=[];for(n+="",i+="";(r=bn.exec(n))&&(s=wn.exec(i));)(g=s.index)>e&&(g=i.slice(e,g),w[b]?w[b]+=g:w[++b]=g),(r=r[0])===(s=s[0])?w[b]?w[b]+=s:w[++b]=s:(w[++b]=null,S.push({i:b,x:Kt(r,s)})),e=wn.lastIndex;return e<i.length&&(g=i.slice(e),w[b]?w[b]+=g:w[++b]=g),w.length<2?S[0]?function(n){return function(i){return n(i)+""}}(S[0].x):function(n){return function(){return n}}(i):(i=S.length,function(F){for(var $,U=0;U<i;++U)w[($=S[U]).i]=$.x(F);return w.join("")})}function Tr(n,i){var e;return("number"==typeof i?Kt:i instanceof Fe?Cr:(e=Fe(i))?(i=e,Cr):Lo)(n,i)}function Do(n){return function(){this.removeAttribute(n)}}function Go(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Uo(n,i,e){var r,g,s=e+"";return function(){var b=this.getAttribute(n);return b===s?null:b===r?g:g=i(r=b,e)}}function Bo(n,i,e){var r,g,s=e+"";return function(){var b=this.getAttributeNS(n.space,n.local);return b===s?null:b===r?g:g=i(r=b,e)}}function Jo(n,i,e){var r,s,g;return function(){var b,S,w=e(this);return null==w?void this.removeAttribute(n):(b=this.getAttribute(n))===(S=w+"")?null:b===r&&S===s?g:(s=S,g=i(r=b,w))}}function Vo(n,i,e){var r,s,g;return function(){var b,S,w=e(this);return null==w?void this.removeAttributeNS(n.space,n.local):(b=this.getAttributeNS(n.space,n.local))===(S=w+"")?null:b===r&&S===s?g:(s=S,g=i(r=b,w))}}function Ro(n,i){return function(e){this.setAttribute(n,i.call(this,e))}}function $o(n,i){return function(e){this.setAttributeNS(n.space,n.local,i.call(this,e))}}function Ho(n,i){var e,r;function s(){var g=i.apply(this,arguments);return g!==r&&(e=(r=g)&&$o(n,g)),e}return s._value=i,s}function Qo(n,i){var e,r;function s(){var g=i.apply(this,arguments);return g!==r&&(e=(r=g)&&Ro(n,g)),e}return s._value=i,s}function jo(n,i){return function(){pn(this,n).delay=+i.apply(this,arguments)}}function Xo(n,i){return i=+i,function(){pn(this,n).delay=i}}function Ko(n,i){return function(){Rt(this,n).duration=+i.apply(this,arguments)}}function qo(n,i){return i=+i,function(){Rt(this,n).duration=i}}function es(n,i){if("function"!=typeof i)throw new Error;return function(){Rt(this,n).ease=i}}function ss(n,i,e){var r,s,g=function(n){return(n+"").trim().split(/^|\s+/).every(function(i){var e=i.indexOf(".");return e>=0&&(i=i.slice(0,e)),!i||"start"===i})}(i)?pn:Rt;return function(){var b=g(this,n),w=b.on;w!==r&&(s=(r=w).copy()).on(i,e),b.on=s}}var hs=Ce.prototype.constructor;function Nr(n){return function(){this.style.removeProperty(n)}}function xs(n,i,e){return function(r){this.style.setProperty(n,i.call(this,r),e)}}function ys(n,i,e){var r,s;function g(){var b=i.apply(this,arguments);return b!==s&&(r=(s=b)&&xs(n,b,e)),r}return g._value=i,g}function Ts(n){return function(i){this.textContent=n.call(this,i)}}function Ns(n){var i,e;function r(){var s=n.apply(this,arguments);return s!==e&&(i=(e=s)&&Ts(s)),i}return r._value=n,r}var ks=0;function $t(n,i,e,r){this._groups=n,this._parents=i,this._name=e,this._id=r}function Ar(){return++ks}var ge=Ce.prototype;$t.prototype=function(n){return Ce().transition(n)}.prototype={constructor:$t,select:function(n){var i=this._name,e=this._id;"function"!=typeof n&&(n=q(n));for(var r=this._groups,s=r.length,g=new Array(s),b=0;b<s;++b)for(var U,$,w=r[b],S=w.length,F=g[b]=new Array(S),R=0;R<S;++R)(U=w[R])&&($=n.call(U,U.__data__,R,w))&&("__data__"in U&&($.__data__=U.__data__),F[R]=$,Qe(F[R],i,e,R,F,Mt(U,e)));return new $t(g,this._parents,i,e)},selectAll:function(n){var i=this._name,e=this._id;"function"!=typeof n&&(n=pt(n));for(var r=this._groups,s=r.length,g=[],b=[],w=0;w<s;++w)for(var U,S=r[w],F=S.length,$=0;$<F;++$)if(U=S[$]){for(var j,R=n.call(U,U.__data__,$,S),nt=Mt(U,e),tt=0,at=R.length;tt<at;++tt)(j=R[tt])&&Qe(j,i,e,tt,R,nt);g.push(R),b.push(U)}return new $t(g,b,i,e)},filter:function(n){"function"!=typeof n&&(n=K(n));for(var i=this._groups,e=i.length,r=new Array(e),s=0;s<e;++s)for(var S,g=i[s],b=g.length,w=r[s]=[],F=0;F<b;++F)(S=g[F])&&n.call(S,S.__data__,F,g)&&w.push(S);return new $t(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var i=this._groups,e=n._groups,r=i.length,g=Math.min(r,e.length),b=new Array(r),w=0;w<g;++w)for(var R,S=i[w],F=e[w],U=S.length,$=b[w]=new Array(U),j=0;j<U;++j)(R=S[j]||F[j])&&($[j]=R);for(;w<r;++w)b[w]=i[w];return new $t(b,this._parents,this._name,this._id)},selection:function(){return new hs(this._groups,this._parents)},transition:function(){for(var n=this._name,i=this._id,e=Ar(),r=this._groups,s=r.length,g=0;g<s;++g)for(var S,b=r[g],w=b.length,F=0;F<w;++F)if(S=b[F]){var U=Mt(S,i);Qe(S,n,e,F,b,{time:U.time+U.delay+U.duration,delay:0,duration:U.duration,ease:U.ease})}return new $t(r,this._parents,n,e)},call:ge.call,nodes:ge.nodes,node:ge.node,size:ge.size,empty:ge.empty,each:ge.each,on:function(n,i){var e=this._id;return arguments.length<2?Mt(this.node(),e).on.on(n):this.each(ss(e,n,i))},attr:function(n,i){var e=ne(n),r="transform"===e?mo:Tr;return this.attrTween(n,"function"==typeof i?(e.local?Vo:Jo)(e,r,vn(this,"attr."+n,i)):null==i?(e.local?Go:Do)(e):(e.local?Bo:Uo)(e,r,i))},attrTween:function(n,i){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==i)return this.tween(e,null);if("function"!=typeof i)throw new Error;var r=ne(n);return this.tween(e,(r.local?Ho:Qo)(r,i))},style:function(n,i,e){var r="transform"==(n+="")?go:Tr;return null==i?this.styleTween(n,function(n,i){var e,r,s;return function(){var g=de(this,n),b=(this.style.removeProperty(n),de(this,n));return g===b?null:g===e&&b===r?s:s=i(e=g,r=b)}}(n,r)).on("end.style."+n,Nr(n)):"function"==typeof i?this.styleTween(n,function(n,i,e){var r,s,g;return function(){var b=de(this,n),w=e(this),S=w+"";return null==w&&(this.style.removeProperty(n),S=w=de(this,n)),b===S?null:b===r&&S===s?g:(s=S,g=i(r=b,w))}}(n,r,vn(this,"style."+n,i))).each(function(n,i){var e,r,s,w,g="style."+i,b="end."+g;return function(){var S=Rt(this,n),F=S.on,U=null==S.value[g]?w||(w=Nr(i)):void 0;(F!==e||s!==U)&&(r=(e=F).copy()).on(b,s=U),S.on=r}}(this._id,n)):this.styleTween(n,function(n,i,e){var r,g,s=e+"";return function(){var b=de(this,n);return b===s?null:b===r?g:g=i(r=b,e)}}(n,r,i),e).on("end.style."+n,null)},styleTween:function(n,i,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==i)return this.tween(r,null);if("function"!=typeof i)throw new Error;return this.tween(r,ys(n,i,null==e?"":e))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var i=n(this);this.textContent=null==i?"":i}}(vn(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function(n){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw new Error;return this.tween(i,Ns(n))},remove:function(){return this.on("end.remove",(n=this._id,function(){var i=this.parentNode;for(var e in this.__transition)if(+e!==n)return;i&&i.removeChild(this)}));var n},tween:function(n,i){var e=this._id;if(n+="",arguments.length<2){for(var b,r=Mt(this.node(),e).tween,s=0,g=r.length;s<g;++s)if((b=r[s]).name===n)return b.value;return null}return this.each((null==i?vo:_o)(e,n,i))},delay:function(n){var i=this._id;return arguments.length?this.each(("function"==typeof n?jo:Xo)(i,n)):Mt(this.node(),i).delay},duration:function(n){var i=this._id;return arguments.length?this.each(("function"==typeof n?Ko:qo)(i,n)):Mt(this.node(),i).duration},ease:function(n){var i=this._id;return arguments.length?this.each(es(i,n)):Mt(this.node(),i).ease},end:function(){var n,i,e=this,r=e._id,s=e.size();return new Promise(function(g,b){var w={value:b},S={value:function(){0==--s&&g()}};e.each(function(){var F=Rt(this,r),U=F.on;U!==n&&((i=(n=U).copy())._.cancel.push(w),i._.interrupt.push(w),i._.end.push(S)),F.on=i})})}};var Cn={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function Fs(n,i){for(var e;!(e=n.__transition)||!(e=e[i]);)if(!(n=n.parentNode))return Cn.time=fe(),Cn;return e}Ce.prototype.interrupt=function(n){return this.each(function(){!function(n,i){var r,s,b,e=n.__transition,g=!0;if(e){for(b in i=null==i?null:i+"",e)(r=e[b]).name===i?(s=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(s?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[b]):g=!1;g&&delete n.__transition}}(this,n)})},Ce.prototype.transition=function(n){var i,e;n instanceof $t?(i=n._id,n=n._name):(i=Ar(),(e=Cn).time=fe(),n=null==n?null:n+"");for(var r=this._groups,s=r.length,g=0;g<s;++g)for(var S,b=r[g],w=b.length,F=0;F<w;++F)(S=b[F])&&Qe(S,n,i,F,b,e||Fs(S,i));return new $t(r,this._parents,n,i)};var Ht=o(7709),Sr=o(5319),Ir=o(7574),En=o(5917),Ls=o(2759),Ds=o(8049),Gs=o(7393),Us=o(1456);class Js{constructor(i,e){this.dueTime=i,this.scheduler=e}call(i,e){return e.subscribe(new Vs(i,this.dueTime,this.scheduler))}}class Vs extends Gs.L{constructor(i,e,r){super(i),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(i){this.clearDebounce(),this.lastValue=i,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ys,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:i}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(i)}}clearDebounce(){const i=this.debouncedSubscription;null!==i&&(this.remove(i),i.unsubscribe(),this.debouncedSubscription=null)}}function Ys(n){n.debouncedNext()}function Ws(n){return void 0===n}function ea(n){if(Array.isArray(n)){for(var i=0,e=Array(n.length);i<n.length;i++)e[i]=n[i];return e}return Array.from(n)}function na(n){return Array.isArray(n)?n:Array.from(n)}function Me(){for(var n=arguments.length,i=Array(n),e=0;e<n;e++)i[e]=arguments[e];var r=function($,R){return{a:$.a*R.a+$.c*R.b,c:$.a*R.c+$.c*R.d,e:$.a*R.e+$.c*R.f+$.e,b:$.b*R.a+$.d*R.b,d:$.b*R.c+$.d*R.d,f:$.b*R.e+$.d*R.f+$.f}};switch((i=Array.isArray(i[0])?i[0]:i).length){case 0:throw new Error("no matrices provided");case 1:return i[0];case 2:return r(i[0],i[1]);default:var s=i,g=na(s),b=g[0],w=g[1],S=g.slice(2),F=r(b,w);return Me.apply(void 0,[F].concat(ea(S)))}}function Zr(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:n,b:0,d:1,f:i}}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;class Fr extends Map{constructor(i,e=Lr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=i)for(const[r,s]of i)this.set(r,s)}get(i){return super.get(Tn(this,i))}has(i){return super.has(Tn(this,i))}set(i,e){return super.set(function({_intern:n,_key:i},e){const r=i(e);return n.has(r)?n.get(r):(n.set(r,e),e)}(this,i),e)}delete(i){return super.delete(function({_intern:n,_key:i},e){const r=i(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}(this,i))}}function Tn({_intern:n,_key:i},e){const r=i(e);return n.has(r)?n.get(r):e}function Lr(n){return null!==n&&"object"==typeof n?n.valueOf():n}function ia(n,i){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(i).domain(n)}return this}Set;const Dr=Symbol("implicit");function Gr(){var n=new Fr,i=[],e=[],r=Dr;function s(g){let b=n.get(g);if(void 0===b){if(r!==Dr)return r;n.set(g,b=i.push(g)-1)}return e[b%e.length]}return s.domain=function(g){if(!arguments.length)return i.slice();i=[],n=new Fr;for(const b of g)n.has(b)||n.set(b,i.push(b)-1);return s},s.range=function(g){return arguments.length?(e=Array.from(g),s):e.slice()},s.unknown=function(g){return arguments.length?(r=g,s):r},s.copy=function(){return Gr(i,e).unknown(r)},ia.apply(s,arguments),s}var ve=o(218);function oa(n,i){var e;function r(){var s,b,g=e.length,w=0,S=0;for(s=0;s<g;++s)w+=(b=e[s]).x,S+=b.y;for(w=w/g-n,S=S/g-i,s=0;s<g;++s)(b=e[s]).x-=w,b.y-=S}return null==n&&(n=0),null==i&&(i=0),r.initialize=function(s){e=s},r.x=function(s){return arguments.length?(n=+s,r):n},r.y=function(s){return arguments.length?(i=+s,r):i},r}function wt(n){return function(){return n}}function qt(){return 1e-6*(Math.random()-.5)}function Ur(n,i,e,r){if(isNaN(i)||isNaN(e))return n;var s,$,R,j,nt,tt,at,ot,dt,g=n._root,b={data:r},w=n._x0,S=n._y0,F=n._x1,U=n._y1;if(!g)return n._root=b,n;for(;g.length;)if((tt=i>=($=(w+F)/2))?w=$:F=$,(at=e>=(R=(S+U)/2))?S=R:U=R,s=g,!(g=g[ot=at<<1|tt]))return s[ot]=b,n;if(j=+n._x.call(null,g.data),nt=+n._y.call(null,g.data),i===j&&e===nt)return b.next=g,s?s[ot]=b:n._root=b,n;do{s=s?s[ot]=new Array(4):n._root=new Array(4),(tt=i>=($=(w+F)/2))?w=$:F=$,(at=e>=(R=(S+U)/2))?S=R:U=R}while((ot=at<<1|tt)==(dt=(nt>=R)<<1|j>=$));return s[dt]=g,s[ot]=b,n}function At(n,i,e,r,s){this.node=n,this.x0=i,this.y0=e,this.x1=r,this.y1=s}function _a(n){return n[0]}function ya(n){return n[1]}function Nn(n,i,e){var r=new An(null==i?_a:i,null==e?ya:e,NaN,NaN,NaN,NaN);return null==n?r:r.addAll(n)}function An(n,i,e,r,s,g){this._x=n,this._y=i,this._x0=e,this._y0=r,this._x1=s,this._y1=g,this._root=void 0}function Br(n){for(var i={data:n.data},e=i;n=n.next;)e=e.next={data:n.data};return i}var St=Nn.prototype=An.prototype;function wa(n){return n.x+n.vx}function Ca(n){return n.y+n.vy}function Jr(n){var i,e,r=1,s=1;function g(){for(var S,U,$,R,j,nt,tt,F=i.length,at=0;at<s;++at)for(U=Nn(i,wa,Ca).visitAfter(b),S=0;S<F;++S)tt=(nt=e[($=i[S]).index])*nt,R=$.x+$.vx,j=$.y+$.vy,U.visit(ot);function ot(dt,ct,_t,yt,It){var Et=dt.data,Pt=dt.r,Tt=nt+Pt;if(!Et)return ct>R+Tt||yt<R-Tt||_t>j+Tt||It<j-Tt;if(Et.index>$.index){var te=R-Et.x-Et.vx,ee=j-Et.y-Et.vy,jt=te*te+ee*ee;jt<Tt*Tt&&(0===te&&(jt+=(te=qt())*te),0===ee&&(jt+=(ee=qt())*ee),jt=(Tt-(jt=Math.sqrt(jt)))/jt*r,$.vx+=(te*=jt)*(Tt=(Pt*=Pt)/(tt+Pt)),$.vy+=(ee*=jt)*Tt,Et.vx-=te*(Tt=1-Tt),Et.vy-=ee*Tt)}}}function b(S){if(S.data)return S.r=e[S.data.index];for(var F=S.r=0;F<4;++F)S[F]&&S[F].r>S.r&&(S.r=S[F].r)}function w(){if(i){var S,U,F=i.length;for(e=new Array(F),S=0;S<F;++S)e[(U=i[S]).index]=+n(U,S,i)}}return"function"!=typeof n&&(n=wt(null==n?1:+n)),g.initialize=function(S){i=S,w()},g.iterations=function(S){return arguments.length?(s=+S,g):s},g.strength=function(S){return arguments.length?(r=+S,g):r},g.radius=function(S){return arguments.length?(n="function"==typeof S?S:wt(+S),w(),g):n},g}St.copy=function(){var e,r,n=new An(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Br(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var s=0;s<4;++s)(r=i.source[s])&&(r.length?e.push({source:r,target:i.target[s]=new Array(4)}):i.target[s]=Br(r));return n},St.add=function(n){var i=+this._x.call(null,n),e=+this._y.call(null,n);return Ur(this.cover(i,e),i,e,n)},St.addAll=function(n){var i,e,s,g,r=n.length,b=new Array(r),w=new Array(r),S=1/0,F=1/0,U=-1/0,$=-1/0;for(e=0;e<r;++e)isNaN(s=+this._x.call(null,i=n[e]))||isNaN(g=+this._y.call(null,i))||(b[e]=s,w[e]=g,s<S&&(S=s),s>U&&(U=s),g<F&&(F=g),g>$&&($=g));if(S>U||F>$)return this;for(this.cover(S,F).cover(U,$),e=0;e<r;++e)Ur(this,b[e],w[e],n[e]);return this},St.cover=function(n,i){if(isNaN(n=+n)||isNaN(i=+i))return this;var e=this._x0,r=this._y0,s=this._x1,g=this._y1;if(isNaN(e))s=(e=Math.floor(n))+1,g=(r=Math.floor(i))+1;else{for(var S,F,b=s-e,w=this._root;e>n||n>=s||r>i||i>=g;)switch(F=(i<r)<<1|n<e,S=new Array(4),S[F]=w,w=S,b*=2,F){case 0:s=e+b,g=r+b;break;case 1:e=s-b,g=r+b;break;case 2:s=e+b,r=g-b;break;case 3:e=s-b,r=g-b}this._root&&this._root.length&&(this._root=w)}return this._x0=e,this._y0=r,this._x1=s,this._y1=g,this},St.data=function(){var n=[];return this.visit(function(i){if(!i.length)do{n.push(i.data)}while(i=i.next)}),n},St.extent=function(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},St.find=function(n,i,e){var r,b,w,S,F,nt,tt,s=this._x0,g=this._y0,U=this._x1,$=this._y1,R=[],j=this._root;for(j&&R.push(new At(j,s,g,U,$)),null==e?e=1/0:(s=n-e,g=i-e,U=n+e,$=i+e,e*=e);nt=R.pop();)if(!(!(j=nt.node)||(b=nt.x0)>U||(w=nt.y0)>$||(S=nt.x1)<s||(F=nt.y1)<g))if(j.length){var at=(b+S)/2,ot=(w+F)/2;R.push(new At(j[3],at,ot,S,F),new At(j[2],b,ot,at,F),new At(j[1],at,w,S,ot),new At(j[0],b,w,at,ot)),(tt=(i>=ot)<<1|n>=at)&&(nt=R[R.length-1],R[R.length-1]=R[R.length-1-tt],R[R.length-1-tt]=nt)}else{var dt=n-+this._x.call(null,j.data),ct=i-+this._y.call(null,j.data),_t=dt*dt+ct*ct;if(_t<e){var yt=Math.sqrt(e=_t);s=n-yt,g=i-yt,U=n+yt,$=i+yt,r=j.data}}return r},St.remove=function(n){if(isNaN(U=+this._x.call(null,n))||isNaN($=+this._y.call(null,n)))return this;var i,r,s,g,U,$,R,j,nt,tt,at,ot,e=this._root,b=this._x0,w=this._y0,S=this._x1,F=this._y1;if(!e)return this;if(e.length)for(;;){if((nt=U>=(R=(b+S)/2))?b=R:S=R,(tt=$>=(j=(w+F)/2))?w=j:F=j,i=e,!(e=e[at=tt<<1|nt]))return this;if(!e.length)break;(i[at+1&3]||i[at+2&3]||i[at+3&3])&&(r=i,ot=at)}for(;e.data!==n;)if(s=e,!(e=e.next))return this;return(g=e.next)&&delete e.next,s?(g?s.next=g:delete s.next,this):i?(g?i[at]=g:delete i[at],(e=i[0]||i[1]||i[2]||i[3])&&e===(i[3]||i[2]||i[1]||i[0])&&!e.length&&(r?r[ot]=e:this._root=e),this):(this._root=g,this)},St.removeAll=function(n){for(var i=0,e=n.length;i<e;++i)this.remove(n[i]);return this},St.root=function(){return this._root},St.size=function(){var n=0;return this.visit(function(i){if(!i.length)do{++n}while(i=i.next)}),n},St.visit=function(n){var e,s,g,b,w,S,i=[],r=this._root;for(r&&i.push(new At(r,this._x0,this._y0,this._x1,this._y1));e=i.pop();)if(!n(r=e.node,g=e.x0,b=e.y0,w=e.x1,S=e.y1)&&r.length){var F=(g+w)/2,U=(b+S)/2;(s=r[3])&&i.push(new At(s,F,U,w,S)),(s=r[2])&&i.push(new At(s,g,U,F,S)),(s=r[1])&&i.push(new At(s,F,b,w,U)),(s=r[0])&&i.push(new At(s,g,b,F,U))}return this},St.visitAfter=function(n){var r,i=[],e=[];for(this._root&&i.push(new At(this._root,this._x0,this._y0,this._x1,this._y1));r=i.pop();){var s=r.node;if(s.length){var g,b=r.x0,w=r.y0,S=r.x1,F=r.y1,U=(b+S)/2,$=(w+F)/2;(g=s[0])&&i.push(new At(g,b,w,U,$)),(g=s[1])&&i.push(new At(g,U,w,S,$)),(g=s[2])&&i.push(new At(g,b,$,U,F)),(g=s[3])&&i.push(new At(g,U,$,S,F))}e.push(r)}for(;r=e.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this},St.x=function(n){return arguments.length?(this._x=n,this):this._x},St.y=function(n){return arguments.length?(this._y=n,this):this._y};var Zt="$";function Ke(){}function Vr(n,i){var e=new Ke;if(n instanceof Ke)n.each(function(w,S){e.set(S,w)});else if(Array.isArray(n)){var g,r=-1,s=n.length;if(null==i)for(;++r<s;)e.set(r,n[r]);else for(;++r<s;)e.set(i(g=n[r],r,n),g)}else if(n)for(var b in n)e.set(b,n[b]);return e}Ke.prototype=Vr.prototype={constructor:Ke,has:function(n){return Zt+n in this},get:function(n){return this[Zt+n]},set:function(n,i){return this[Zt+n]=i,this},remove:function(n){var i=Zt+n;return i in this&&delete this[i]},clear:function(){for(var n in this)n[0]===Zt&&delete this[n]},keys:function(){var n=[];for(var i in this)i[0]===Zt&&n.push(i.slice(1));return n},values:function(){var n=[];for(var i in this)i[0]===Zt&&n.push(this[i]);return n},entries:function(){var n=[];for(var i in this)i[0]===Zt&&n.push({key:i.slice(1),value:this[i]});return n},size:function(){var n=0;for(var i in this)i[0]===Zt&&++n;return n},empty:function(){for(var n in this)if(n[0]===Zt)return!1;return!0},each:function(n){for(var i in this)i[0]===Zt&&n(this[i],i.slice(1),this)}};const Sn=Vr;function qe(){}var se=Sn.prototype;function Aa(n){return n.index}function $r(n,i){var e=n.get(i);if(!e)throw new Error("missing: "+i);return e}function Hr(n){var r,g,b,w,S,i=Aa,e=function(tt){return 1/Math.min(w[tt.source.index],w[tt.target.index])},s=wt(30),F=1;function $(tt){for(var at=0,ot=n.length;at<F;++at)for(var ct,_t,yt,It,Et,Pt,Tt,dt=0;dt<ot;++dt)It=(yt=(ct=n[dt]).target).x+yt.vx-(_t=ct.source).x-_t.vx||qt(),Et=yt.y+yt.vy-_t.y-_t.vy||qt(),Et*=Pt=((Pt=Math.sqrt(It*It+Et*Et))-g[dt])/Pt*tt*r[dt],yt.vx-=(It*=Pt)*(Tt=S[dt]),yt.vy-=Et*Tt,_t.vx+=It*(Tt=1-Tt),_t.vy+=Et*Tt}function R(){if(b){var tt,ct,at=b.length,ot=n.length,dt=Sn(b,i);for(tt=0,w=new Array(at);tt<ot;++tt)(ct=n[tt]).index=tt,"object"!=typeof ct.source&&(ct.source=$r(dt,ct.source)),"object"!=typeof ct.target&&(ct.target=$r(dt,ct.target)),w[ct.source.index]=(w[ct.source.index]||0)+1,w[ct.target.index]=(w[ct.target.index]||0)+1;for(tt=0,S=new Array(ot);tt<ot;++tt)S[tt]=w[(ct=n[tt]).source.index]/(w[ct.source.index]+w[ct.target.index]);r=new Array(ot),j(),g=new Array(ot),nt()}}function j(){if(b)for(var tt=0,at=n.length;tt<at;++tt)r[tt]=+e(n[tt],tt,n)}function nt(){if(b)for(var tt=0,at=n.length;tt<at;++tt)g[tt]=+s(n[tt],tt,n)}return null==n&&(n=[]),$.initialize=function(tt){b=tt,R()},$.links=function(tt){return arguments.length?(n=tt,R(),$):n},$.id=function(tt){return arguments.length?(i=tt,$):i},$.iterations=function(tt){return arguments.length?(F=+tt,$):F},$.strength=function(tt){return arguments.length?(e="function"==typeof tt?tt:wt(+tt),j(),$):e},$.distance=function(tt){return arguments.length?(s="function"==typeof tt?tt:wt(+tt),nt(),$):s},$}function Sa(n){return n.x}function Ia(n){return n.y}qe.prototype=function(n,i){var e=new qe;if(n instanceof qe)n.each(function(g){e.add(g)});else if(n){var r=-1,s=n.length;if(null==i)for(;++r<s;)e.add(n[r]);else for(;++r<s;)e.add(i(n[r],r,n))}return e}.prototype={constructor:qe,has:se.has,add:function(n){return this[Zt+(n+="")]=n,this},remove:se.remove,clear:se.clear,values:se.keys,size:se.size,empty:se.empty,each:se.each};var Oa=Math.PI*(3-Math.sqrt(5));function Qr(n){var i,e=1,r=.001,s=1-Math.pow(r,1/300),g=0,b=.6,w=Sn(),S=Re(U),F=ln("tick","end");function U(){$(),F.call("tick",i),e<r&&(S.stop(),F.call("end",i))}function $(nt){var tt,ot,at=n.length;void 0===nt&&(nt=1);for(var dt=0;dt<nt;++dt)for(e+=(g-e)*s,w.each(function(ct){ct(e)}),tt=0;tt<at;++tt)null==(ot=n[tt]).fx?ot.x+=ot.vx*=b:(ot.x=ot.fx,ot.vx=0),null==ot.fy?ot.y+=ot.vy*=b:(ot.y=ot.fy,ot.vy=0);return i}function R(){for(var at,nt=0,tt=n.length;nt<tt;++nt){if((at=n[nt]).index=nt,null!=at.fx&&(at.x=at.fx),null!=at.fy&&(at.y=at.fy),isNaN(at.x)||isNaN(at.y)){var ot=10*Math.sqrt(nt),dt=nt*Oa;at.x=ot*Math.cos(dt),at.y=ot*Math.sin(dt)}(isNaN(at.vx)||isNaN(at.vy))&&(at.vx=at.vy=0)}}function j(nt){return nt.initialize&&nt.initialize(n),nt}return null==n&&(n=[]),R(),i={tick:$,restart:function(){return S.restart(U),i},stop:function(){return S.stop(),i},nodes:function(nt){return arguments.length?(n=nt,R(),w.each(j),i):n},alpha:function(nt){return arguments.length?(e=+nt,i):e},alphaMin:function(nt){return arguments.length?(r=+nt,i):r},alphaDecay:function(nt){return arguments.length?(s=+nt,i):+s},alphaTarget:function(nt){return arguments.length?(g=+nt,i):g},velocityDecay:function(nt){return arguments.length?(b=1-nt,i):1-b},force:function(nt,tt){return arguments.length>1?(null==tt?w.remove(nt):w.set(nt,j(tt)),i):w.get(nt)},find:function(nt,tt,at){var ct,_t,yt,It,Et,ot=0,dt=n.length;for(null==at?at=1/0:at*=at,ot=0;ot<dt;++ot)(yt=(ct=nt-(It=n[ot]).x)*ct+(_t=tt-It.y)*_t)<at&&(Et=It,at=yt);return Et},on:function(nt,tt){return arguments.length>1?(F.on(nt,tt),i):F.on(nt)}}}function zr(){var n,i,e,s,r=wt(-30),g=1,b=1/0,w=.81;function S(R){var j,nt=n.length,tt=Nn(n,Sa,Ia).visitAfter(U);for(e=R,j=0;j<nt;++j)i=n[j],tt.visit($)}function F(){if(n){var R,nt,j=n.length;for(s=new Array(j),R=0;R<j;++R)s[(nt=n[R]).index]=+r(nt,R,n)}}function U(R){var nt,tt,ot,dt,ct,j=0,at=0;if(R.length){for(ot=dt=ct=0;ct<4;++ct)(nt=R[ct])&&(tt=Math.abs(nt.value))&&(j+=nt.value,at+=tt,ot+=tt*nt.x,dt+=tt*nt.y);R.x=ot/at,R.y=dt/at}else{(nt=R).x=nt.data.x,nt.y=nt.data.y;do{j+=s[nt.data.index]}while(nt=nt.next)}R.value=j}function $(R,j,nt,tt){if(!R.value)return!0;var at=R.x-i.x,ot=R.y-i.y,dt=tt-j,ct=at*at+ot*ot;if(dt*dt/w<ct)return ct<b&&(0===at&&(ct+=(at=qt())*at),0===ot&&(ct+=(ot=qt())*ot),ct<g&&(ct=Math.sqrt(g*ct)),i.vx+=at*R.value*e/ct,i.vy+=ot*R.value*e/ct),!0;if(!(R.length||ct>=b)){(R.data!==i||R.next)&&(0===at&&(ct+=(at=qt())*at),0===ot&&(ct+=(ot=qt())*ot),ct<g&&(ct=Math.sqrt(g*ct)));do{R.data!==i&&(i.vx+=at*(dt=s[R.data.index]*e/ct),i.vy+=ot*dt)}while(R=R.next)}}return S.initialize=function(R){n=R,F()},S.strength=function(R){return arguments.length?(r="function"==typeof R?R:wt(+R),F(),S):r},S.distanceMin=function(R){return arguments.length?(g=R*R,S):Math.sqrt(g)},S.distanceMax=function(R){return arguments.length?(b=R*R,S):Math.sqrt(b)},S.theta=function(R){return arguments.length?(w=R*R,S):Math.sqrt(w)},S}function Za(n,i,e){var r,g,b,s=wt(.1);function w(F){for(var U=0,$=r.length;U<$;++U){var R=r[U],j=R.x-i||1e-6,nt=R.y-e||1e-6,tt=Math.sqrt(j*j+nt*nt),at=(b[U]-tt)*g[U]*F/tt;R.vx+=j*at,R.vy+=nt*at}}function S(){if(r){var F,U=r.length;for(g=new Array(U),b=new Array(U),F=0;F<U;++F)b[F]=+n(r[F],F,r),g[F]=isNaN(b[F])?0:+s(r[F],F,r)}}return"function"!=typeof n&&(n=wt(+n)),null==i&&(i=0),null==e&&(e=0),w.initialize=function(F){r=F,S()},w.strength=function(F){return arguments.length?(s="function"==typeof F?F:wt(+F),S(),w):s},w.radius=function(F){return arguments.length?(n="function"==typeof F?F:wt(+F),S(),w):n},w.x=function(F){return arguments.length?(i=+F,w):i},w.y=function(F){return arguments.length?(e=+F,w):e},w}function Fa(n){var e,r,s,i=wt(.1);function g(w){for(var U,S=0,F=e.length;S<F;++S)(U=e[S]).vx+=(s[S]-U.x)*r[S]*w}function b(){if(e){var w,S=e.length;for(r=new Array(S),s=new Array(S),w=0;w<S;++w)r[w]=isNaN(s[w]=+n(e[w],w,e))?0:+i(e[w],w,e)}}return"function"!=typeof n&&(n=wt(null==n?0:+n)),g.initialize=function(w){e=w,b()},g.strength=function(w){return arguments.length?(i="function"==typeof w?w:wt(+w),b(),g):i},g.x=function(w){return arguments.length?(n="function"==typeof w?w:wt(+w),b(),g):n},g}function Ma(n){var e,r,s,i=wt(.1);function g(w){for(var U,S=0,F=e.length;S<F;++S)(U=e[S]).vy+=(s[S]-U.y)*r[S]*w}function b(){if(e){var w,S=e.length;for(r=new Array(S),s=new Array(S),w=0;w<S;++w)r[w]=isNaN(s[w]=+n(e[w],w,e))?0:+i(e[w],w,e)}}return"function"!=typeof n&&(n=wt(null==n?0:+n)),g.initialize=function(w){e=w,b()},g.strength=function(w){return arguments.length?(i="function"==typeof w?w:wt(+w),b(),g):i},g.y=function(w){return arguments.length?(n="function"==typeof w?w:wt(+w),b(),g):n},g}var Pa=o(6703);function La(n,i,e){var r=new Se,s=i;return null==i?(r.restart(n,i,e),r):(i=+i,e=null==e?fe():+e,r.restart(function g(b){b+=s,r.restart(g,s+=i,e),n(b)},i,e),r)}const Da=["linkTemplate"],Ga=["nodeTemplate"],Ua=["clusterTemplate"],Ba=["defsTemplate"],Ja=["miniMapNodeTemplate"],Va=["nodeElement"],Ya=["linkElement"];function Ra(n,i){if(1&n&&(t.O4$(),t.GkF(0,14)),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function $a(n,i){if(1&n&&(t.O4$(),t._UZ(0,"path",15)),2&n){const e=i.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const Pe=function(n){return{$implicit:n}};function Ha(n,i){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,e))}}function Qa(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function za(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw(2).onClick(g)}),t.YNc(2,Ha,1,4,"ng-container",18),t.YNc(3,Qa,4,6,"g",19),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.ekj("old-node",r.animate&&r.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",r.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!r.clusterTemplate)}}function ja(n,i){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.linkTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,e))}}function Xa(n,i){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function Wa(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,ja,1,4,"ng-container",18),t.YNc(3,Xa,1,1,"path",25),t.qZA()),2&n){const e=i.$implicit,r=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",r.linkTemplate),t.xp6(1),t.Q6J("ngIf",!r.linkTemplate)}}function Ka(n,i){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,e))}}function qa(n,i){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function tu(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw(2).onClick(g)})("mousedown",function(s){const b=t.CHM(e).$implicit;return t.oxw(2).onNodeMouseDown(s,b)}),t.YNc(2,Ka,1,4,"ng-container",18),t.YNc(3,qa,1,3,"circle",29),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.ekj("old-node",r.animate&&r.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",r.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!r.nodeTemplate)}}function eu(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(s){return t.CHM(e),t.oxw().onTouchStart(s)})("touchend",function(s){return t.CHM(e),t.oxw().onTouchEnd(s)}),t.TgZ(1,"defs"),t.YNc(2,Ra,1,1,"ng-container",5),t.YNc(3,$a,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().isPanning=!0}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,za,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,Wa,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,tu,4,6,"g",13),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function nu(n,i){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,e))}}function ru(n,i){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,e))}}function iu(n,i){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit,r=t.oxw(2);t.uIk("cx",e.dimension.width/2/r.minimapScaleCoefficient)("cy",e.dimension.height/2/r.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function ou(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,nu,1,4,"ng-container",18),t.YNc(3,ru,1,4,"ng-container",18),t.YNc(4,iu,1,3,"circle",29),t.qZA()),2&n){const e=i.$implicit,r=t.oxw(2);t.ekj("old-node",r.animate&&r.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",r.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!r.miniMapNodeTemplate&&r.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!r.nodeTemplate&&!r.miniMapNodeTemplate)}}function su(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31),t.TgZ(1,"rect",32),t.NdJ("mousedown",function(s){return t.CHM(e),t.oxw().onMinimapPanTo(s)}),t.qZA(),t.TgZ(2,"g"),t.TgZ(3,"g",33),t.YNc(4,ou,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().onMinimapDragMouseDown()}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const au=["*"],jr={};function Qt(){let n=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return n=`a${n}`,jr[n]?Qt():(jr[n]=!0,n)}var _e=(()=>{return(n=_e||(_e={})).Both="both",n.Horizontal="horizontal",n.Vertical="vertical",_e;var n})(),xe=(()=>{return(n=xe||(xe={})).UpperLeft="UpperLeft",n.UpperRight="UpperRight",xe;var n})();function uu(n,i,e){e=e||{};let r,s,g,b=null,w=0;function S(){w=!1===e.leading?0:+new Date,b=null,g=n.apply(r,s)}return function(){const F=+new Date;!w&&!1===e.leading&&(w=F);const U=i-(F-w);return r=this,s=arguments,U<=0?(clearTimeout(b),b=null,w=F,g=n.apply(r,s)):!b&&!1!==e.trailing&&(b=setTimeout(S,U)),g}}function lu(n,i){return function(r,s,g){return{configurable:!0,enumerable:g.enumerable,get:function(){return Object.defineProperty(this,s,{configurable:!0,enumerable:g.enumerable,value:uu(g.value,n,i)}),this[s]}}}}let Xr=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class cu{constructor(i,e,r){"string"==typeof i&&(i=Xr.find(s=>s.name===i)),this.colorDomain=i.domain,this.domain=e,this.customColors=r,this.scale=this.generateColorScheme(i,this.domain)}generateColorScheme(i,e){return"string"==typeof i&&(i=Xr.find(r=>r.name===i)),Gr().range(i.domain).domain(e)}getColor(i){if(null==i)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(i);const e=i.toString();let r;return this.customColors&&this.customColors.length>0&&(r=this.customColors.find(s=>s.name.toLowerCase()===e.toLowerCase())),r?r.value:this.scale(i)}}let hu=(()=>{class n{constructor(e,r){this.element=e,this.zone=r,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:r,offsetWidth:s}=this.element.nativeElement;r&&s?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),n})();var ye=(()=>{return(n=ye||(ye={})).LEFT_TO_RIGHT="LR",n.RIGHT_TO_LEFT="RL",n.TOP_TO_BOTTOM="TB",n.BOTTOM_TO_TOM="BT",ye;var n})();class tn{constructor(){this.defaultSettings={orientation:ye.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),ve.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;const e=r=>{const s=this.dagreGraph._nodes[r.id];return Object.assign(Object.assign({},r),{position:{x:s.x,y:s.y},dimension:{width:s.width,height:s.height}})};return i.clusters=(i.clusters||[]).map(e),i.nodes=i.nodes.map(e),i}updateEdge(i,e){const r=i.nodes.find(S=>S.id===e.source),s=i.nodes.find(S=>S.id===e.target),g=r.position.y<=s.position.y?-1:1;return e.points=[{x:r.position.x,y:r.position.y-g*(r.dimension.height/2)},{x:s.position.x,y:s.position.y+g*(s.dimension.height/2)}],i}createDagreGraph(i){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new ve.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(r=>{const s=Object.assign({},r);return s.width=r.dimension.width,s.height=r.dimension.height,s.x=r.position.x,s.y=r.position.y,s}),this.dagreClusters=i.clusters||[],this.dagreEdges=i.edges.map(r=>{const s=Object.assign({},r);return s.id||(s.id=Qt()),s});for(const r of this.dagreNodes)this.dagreGraph.setNode(r.id,r);for(const r of this.dagreClusters)this.dagreGraph.setNode(r.id,r),r.childNodeIds.forEach(s=>{this.dagreGraph.setParent(s,r.id)});for(const r of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(r.source,r.target,r,r.id):this.dagreGraph.setEdge(r.source,r.target);return this.dagreGraph}}function be(n){return"string"==typeof n?{id:n,x:0,y:0}:n}function Kr(n,i){return"number"==typeof i?n[i]:i}const qr={dagre:class{constructor(){this.defaultSettings={orientation:ye.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),ve.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const r=this.dagreGraph._nodes[e],s=i.nodes.find(g=>g.id===r.id);s.position={x:r.x,y:r.y},s.dimension={width:r.width,height:r.height}}return i}updateEdge(i,e){const r=i.nodes.find(S=>S.id===e.source),s=i.nodes.find(S=>S.id===e.target),g=r.position.y<=s.position.y?-1:1;return e.points=[{x:r.position.x,y:r.position.y-g*(r.dimension.height/2)},{x:s.position.x,y:s.position.y+g*(s.dimension.height/2)}],i}createDagreGraph(i){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new ve.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(r=>{const s=Object.assign({},r);return s.width=r.dimension.width,s.height=r.dimension.height,s.x=r.position.x,s.y=r.position.y,s}),this.dagreEdges=i.edges.map(r=>{const s=Object.assign({},r);return s.id||(s.id=Qt()),s});for(const r of this.dagreNodes)r.width||(r.width=20),r.height||(r.height=30),this.dagreGraph.setNode(r.id,r);for(const r of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(r.source,r.target,r,r.id):this.dagreGraph.setEdge(r.source,r.target);return this.dagreGraph}},dagreCluster:tn,dagreNodesOnly:class{constructor(){this.defaultSettings={orientation:ye.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),ve.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const r=this.dagreGraph._nodes[e],s=i.nodes.find(g=>g.id===r.id);s.position={x:r.x,y:r.y},s.dimension={width:r.width,height:r.height}}for(const e of i.edges)this.updateEdge(i,e);return i}updateEdge(i,e){const r=i.nodes.find(nt=>nt.id===e.source),s=i.nodes.find(nt=>nt.id===e.target),g="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",b="y"===g?"x":"y",w="y"===g?"height":"width",S=r.position[g]<=s.position[g]?-1:1,F={[b]:r.position[b],[g]:r.position[g]-S*(r.dimension[w]/2)},U={[b]:s.position[b],[g]:s.position[g]+S*(s.dimension[w]/2)},$=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[F,{[b]:F[b],[g]:F[g]-S*$},{[b]:U[b],[g]:U[g]+S*$},U];const j=i.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return j&&(j.points=e.points),i}createDagreGraph(i){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new ve.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(r=>{const s=Object.assign({},r);return s.width=r.dimension.width,s.height=r.dimension.height,s.x=r.position.x,s.y=r.position.y,s}),this.dagreEdges=i.edges.map(r=>{const s=Object.assign({},r);return s.id||(s.id=Qt()),s});for(const r of this.dagreNodes)r.width||(r.width=20),r.height||(r.height=30),this.dagreGraph.setNode(r.id,r);for(const r of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(r.source,r.target,r,r.id):this.dagreGraph.setEdge(r.source,r.target);return this.dagreGraph}},d3ForceDirected:class{constructor(){this.defaultSettings={force:Qr().force("charge",zr().strength(-150)).force("collide",Jr(5)),forceLink:Hr().id(i=>i.id).distance(()=>100)},this.settings={},this.outputGraph$=new Ht.xQ}run(i){return this.inputGraph=i,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign({},e))],edges:[...this.inputGraph.edges.map(e=>Object.assign({},e))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(i,e){const r=Object.assign({},this.defaultSettings,this.settings);return r.force&&r.force.nodes(this.d3Graph.nodes).force("link",r.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(i){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||Qt(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>Object.assign(Object.assign({},e),{source:be(e.source).id,target:be(e.target).id,points:[{x:be(e.source).x,y:be(e.source).y},{x:be(e.target).x,y:be(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(i,e){this.settings.force.alphaTarget(.3).restart();const r=this.d3Graph.nodes.find(s=>s.id===i.id);!r||(this.draggingStart={x:e.x-r.x,y:e.y-r.y},r.fx=e.x-this.draggingStart.x,r.fy=e.y-this.draggingStart.y)}onDrag(i,e){if(!i)return;const r=this.d3Graph.nodes.find(s=>s.id===i.id);!r||(r.fx=e.x-this.draggingStart.x,r.fy=e.y-this.draggingStart.y)}onDragEnd(i,e){if(!i)return;const r=this.d3Graph.nodes.find(s=>s.id===i.id);!r||(this.settings.force.alphaTarget(0),r.fx=void 0,r.fy=void 0)}},colaForceDirected:class{constructor(){this.defaultSettings={force:(0,Pa.d3adaptor)(Object.assign(Object.assign(Object.assign({},_),a),v)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Ht.xQ}run(i){return this.inputGraph=i,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign(Object.assign({},e),{width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(r=>this.inputGraph.clusters.findIndex(s=>s.id===r)).filter(r=>r>=0),leaves:e.childNodeIds.map(r=>this.inputGraph.nodes.findIndex(s=>s.id===r)).filter(r=>r>=0)}))],links:[...this.inputGraph.edges.map(e=>{const r=this.inputGraph.nodes.findIndex(g=>e.source===g.id),s=this.inputGraph.nodes.findIndex(g=>e.target===g.id);if(-1!==r&&-1!==s)return Object.assign(Object.assign({},e),{source:r,target:s})}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const r=this.inputGraph.nodes.findIndex(g=>e.source===g.id),s=this.inputGraph.nodes.findIndex(g=>e.target===g.id);if(!(r>=0&&s>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(i,e){const r=Object.assign({},this.defaultSettings,this.settings);return r.force&&r.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(i){return this.outputGraph.nodes=i.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||Qt(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=i.links.map(e=>{const r=Kr(i.nodes,e.source),s=Kr(i.nodes,e.target);return Object.assign(Object.assign({},e),{source:r.id,target:s.id,points:[r.bounds.rayIntersection(s.bounds.cx(),s.bounds.cy()),s.bounds.rayIntersection(r.bounds.cx(),r.bounds.cy())]})}).concat(i.groupLinks.map(e=>{const r=i.nodes.find(w=>w.id===e.source),s=i.nodes.find(w=>w.id===e.target),g=r||i.groups.find(w=>w.id===e.source),b=s||i.groups.find(w=>w.id===e.target);return Object.assign(Object.assign({},e),{source:g.id,target:b.id,points:[g.bounds.rayIntersection(b.bounds.cx(),b.bounds.cy()),b.bounds.rayIntersection(g.bounds.cx(),g.bounds.cy())]})})),this.outputGraph.clusters=i.groups.map((e,r)=>Object.assign(Object.assign({},this.inputGraph.clusters[r]),{dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(i,e){const r=this.outputGraph.nodes.findIndex(g=>g.id===i.id),s=this.internalGraph.nodes[r];!s||(this.draggingStart={x:s.x-e.x,y:s.y-e.y},s.fixed=1,this.settings.force.start())}onDrag(i,e){if(!i)return;const r=this.outputGraph.nodes.findIndex(g=>g.id===i.id),s=this.internalGraph.nodes[r];!s||(s.x=this.draggingStart.x+e.x,s.y=this.draggingStart.y+e.y)}onDragEnd(i,e){if(!i)return;const r=this.outputGraph.nodes.findIndex(g=>g.id===i.id),s=this.internalGraph.nodes[r];!s||(s.fixed=0)}}};let ti=(()=>{class n{getLayout(e){if(qr[e])return new qr[e];throw new Error(`Unknown layout type '${e}'`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),_u=(()=>{class n{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),g=e.wheelDelta?r<0:r>0;(e.wheelDelta?r>0:r<0)?this.mouseWheelUp.emit(e):g&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","mouseWheel",""]],hostBindings:function(e,r){1&e&&t.NdJ("mousewheel",function(g){return r.onMouseWheelChrome(g)})("DOMMouseScroll",function(g){return r.onMouseWheelFirefox(g)})("wheel",function(g){return r.onWheel(g)})("onmousewheel",function(g){return r.onMouseWheelIE(g)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),n})(),In=(()=>{class n{constructor(e,r,s,g){this.el=e,this.zone=r,this.cd=s,this.layoutService=g,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=_e.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=xe.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Sr.w,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=b=>b.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${Qt()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:s}=e;this.setLayout(this.layout),s&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new hu(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=zi.beta(1)),this.zone.run(()=>{this.dims=function({width:n,height:i}){let e=n,r=i;return e=Math.max(0,e),r=Math.max(0,r),{width:Math.floor(e),height:Math.floor(r)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Sr.w;const e=r=>(r.meta||(r.meta={}),r.id||(r.id=Qt()),r.dimension?r.meta.forceDimensions=void 0===r.meta.forceDimensions||r.meta.forceDimensions:(r.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},r.meta.forceDimensions=!1),r.position={x:0,y:0},r.data=r.data?r.data:{},r);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(r=>(r.id||(r.id=Qt()),r)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),r=e instanceof Ir.y?e:(0,En.of)(e);this.graphSubscription.add(r.subscribe(s=>{this.graph=s,this.tick()})),0!==this.graph.nodes.length&&r.pipe((0,Ds.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(g=>{g.transform=`translate(${g.position.x-g.dimension.width/2||0}, ${g.position.y-g.dimension.height/2||0})`,g.data||(g.data={}),g.data.color=this.colors.getColor(this.groupResultsBy(g)),e.add(g.id)});const r=new Set;(this.graph.clusters||[]).map(g=>{g.transform=`translate(${g.position.x-g.dimension.width/2||0}, ${g.position.y-g.dimension.height/2||0})`,g.data||(g.data={}),g.data.color=this.colors.getColor(this.groupResultsBy(g)),r.add(g.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=r},500);const s=[];for(const g in this.graph.edgeLabels){const b=this.graph.edgeLabels[g],w=g.replace(/[^\w-]*/g,""),S=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let F=this._oldLinks.find(S?tt=>`${tt.source}${tt.target}${tt.id}`===w:tt=>`${tt.source}${tt.target}`===w);const U=this.graph.edges.find(S?tt=>`${tt.source}${tt.target}${tt.id}`===w:tt=>`${tt.source}${tt.target}`===w);F?F.data&&U&&U.data&&JSON.stringify(F.data)!==JSON.stringify(U.data)&&(F.data=U.data):F=U||b,F.oldLine=F.line;const $=b.points,R=this.generateLine($),j=Object.assign({},F);j.line=R,j.points=$,this.updateMidpointOnEdge(j,$);const nt=$[Math.floor($.length/2)];nt&&(j.textTransform=`translate(${nt.x||0},${nt.y||0})`),j.textAngle=0,j.oldLine||(j.oldLine=j.line),this.calcDominantBaseline(j),s.push(j)}this.graph.edges=s,this.graph.edges&&(this._oldLinks=this.graph.edges.map(g=>{const b=Object.assign({},g);return b.oldLine=g.line,b})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case xe.UpperLeft:return"";case xe.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,r=-1/0,s=1/0,g=-1/0;for(let b=0;b<this.graph.nodes.length;b++){const w=this.graph.nodes[b];e=w.position.x<e?w.position.x:e,s=w.position.y<s?w.position.y:s,r=w.position.x+w.dimension.width>r?w.position.x+w.dimension.width:r,g=w.position.y+w.dimension.height>g?w.position.y+w.dimension.height:g}e-=100,s-=100,r+=100,g+=100,this.graphDims.width=r-e,this.graphDims.height=g-s,this.minimapOffsetX=e,this.minimapOffsetY=s}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const r=e.nativeElement,s=this.graph.nodes.find(b=>b.id===r.id);if(!s)return;let g;try{if(g=r.getBBox(),!g.width||!g.height)return}catch(b){return}if(s.dimension.height=this.nodeHeight?s.dimension.height&&s.meta.forceDimensions?s.dimension.height:this.nodeHeight:s.dimension.height&&s.meta.forceDimensions?s.dimension.height:g.height,this.nodeMaxHeight&&(s.dimension.height=Math.max(s.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(s.dimension.height=Math.min(s.dimension.height,this.nodeMinHeight)),this.nodeWidth)s.dimension.width=s.dimension.width&&s.meta.forceDimensions?s.dimension.width:this.nodeWidth;else if(r.getElementsByTagName("text").length){let b;try{for(const w of r.getElementsByTagName("text")){const S=w.getBBox();b?(S.width>b.width&&(b.width=S.width),S.height>b.height&&(b.height=S.height)):b=S}}catch(w){return}s.dimension.width=s.dimension.width&&s.meta.forceDimensions?s.dimension.width:b.width+20}else s.dimension.width=s.dimension.width&&s.meta.forceDimensions?s.dimension.width:g.width;this.nodeMaxWidth&&(s.dimension.width=Math.max(s.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(s.dimension.width=Math.min(s.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(r=>{const s=this.graph.edges.find(g=>g.id===r.nativeElement.id);s&&(Yn(r.nativeElement).select(".line").attr("d",s.oldLine).transition().ease(Xn).duration(e?500:0).attr("d",s.line),Yn(this.el.nativeElement).select(`#${s.id}`).attr("d",s.oldTextPath).transition().ease(Xn).duration(e?500:0).attr("d",s.textPath),this.updateMidpointOnEdge(s,s.points))})}calcDominantBaseline(e){const r=e.points[0],s=e.points[e.points.length-1];e.oldTextPath=e.textPath,s.x<r.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function(){var n=Ki,i=qi,e=Ue(!0),r=null,s=Wi,g=null;function b(w){var S,U,R,F=w.length,$=!1;for(null==r&&(g=s(R=Xi())),S=0;S<=F;++S)!(S<F&&e(U=w[S],S,w))===$&&(($=!$)?g.lineStart():g.lineEnd()),$&&g.point(+n(U,S,w),+i(U,S,w));if(R)return g=null,R+""||null}return b.x=function(w){return arguments.length?(n="function"==typeof w?w:Ue(+w),b):n},b.y=function(w){return arguments.length?(i="function"==typeof w?w:Ue(+w),b):i},b.defined=function(w){return arguments.length?(e="function"==typeof w?w:Ue(!!w),b):e},b.curve=function(w){return arguments.length?(s=w,null!=r&&(g=s(r)),b):s},b.context=function(w){return arguments.length?(null==w?r=g=null:g=s(r=w),b):r},b}().x(s=>s.x).y(s=>s.y).curve(this.curve)(e)}onZoom(e,r){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const s=1+("in"===r?this.zoomSpeed:-this.zoomSpeed),g=this.zoomLevel*s;if(!(g<=this.minZoomLevel||g>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const b=e.clientX,w=e.clientY,S=this.el.nativeElement.querySelector("svg"),F=S.querySelector("g.chart"),U=S.createSVGPoint();U.x=b,U.y=w;const $=U.matrixTransform(F.getScreenCTM().inverse());this.pan($.x,$.y,!0),this.zoom(s),this.pan(-$.x,-$.y,!0)}else this.zoom(s)}pan(e,r,s=!1){const g=s?1:this.zoomLevel;this.transformationMatrix=Me(this.transformationMatrix,Zr(e/g,r/g)),this.updateTransform()}panTo(e,r){null==e||isNaN(e)||null==r||isNaN(r)||(this.transformationMatrix=Me(this.transformationMatrix,Zr((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-r*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=Me(this.transformationMatrix,function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Ws(i)&&(i=n),{a:n,c:0,e:0,b:0,d:i,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const r=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(r,e),r.position.x+=e.movementX/this.zoomLevel,r.position.y+=e.movementY/this.zoomLevel,r.transform=`translate(${r.position.x-r.dimension.width/2}, ${r.position.y-r.dimension.height/2})`;for(const b of this.graph.edges)if((b.target===r.id||b.source===r.id||b.target.id===r.id||b.source.id===r.id)&&this.layout&&"string"!=typeof this.layout){const w=this.layout.updateEdge(this.graph,b),S=w instanceof Ir.y?w:(0,En.of)(w);this.graphSubscription.add(S.subscribe(F=>{this.graph=F,this.redrawEdge(b)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const r=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=r}updateTransform(){this.transform=function(n){return function(n){return"matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")"}(n)}(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(n.a*i)/i,b:Math.round(n.b*i)/i,c:Math.round(n.c*i)/i,d:Math.round(n.d*i)/i,e:Math.round(n.e*i)/i,f:Math.round(n.f*i)/i}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const r=this.activeEntries.indexOf(e);this.activeEntries.splice(r,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,r)=>-1!==e.indexOf(r)?e:e.concat([r]),[]).sort()}trackLinkBy(e,r){return r.id}trackNodeBy(e,r){return r.id}setColors(){this.colors=new cu(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const r=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,g=r-this._touchLastX,b=s-this._touchLastY;this._touchLastX=r,this._touchLastY=s,this.pan(g,b)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,r){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=r,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(r,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let s=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);s<this.minZoomLevel&&(s=this.minZoomLevel),s>this.maxZoomLevel&&(s=this.maxZoomLevel),s!==this.zoomLevel&&(this.zoomLevel=s,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const r=this.graph.nodes.find(s=>s.id===e);!r||this.panTo(r.position.x,r.position.y)}panWithConstraints(e,r){let s=r.movementX,g=r.movementY;switch(this.isMinimapPanning&&(s=-this.minimapScaleCoefficient*s*this.zoomLevel,g=-this.minimapScaleCoefficient*g*this.zoomLevel),e){case _e.Horizontal:this.pan(s,0);break;case _e.Vertical:this.pan(0,g);break;default:this.pan(s,g)}}updateMidpointOnEdge(e,r){if(e&&r)if(r.length%2==1)e.midPoint=r[Math.floor(r.length/2)];else{const s=r[r.length/2],g=r[r.length/2-1];e.midPoint={x:(s.x+g.x)/2,y:(s.y+g.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,r;const s=this.el.nativeElement;if(null!==s.parentNode){const g=s.parentNode.getBoundingClientRect();e=g.width,r=g.height}return e&&r?{width:e,height:r}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const r=(0,Ls.R)(window,"resize").pipe(function(n,i=Us.P){return e=>e.lift(new Js(n,i))}(200)).subscribe(s=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(ti))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-graph"]],contentQueries:function(e,r,s){if(1&e&&(t.Suo(s,Da,5),t.Suo(s,Ga,5),t.Suo(s,Ua,5),t.Suo(s,Ba,5),t.Suo(s,Ja,5)),2&e){let g;t.iGM(g=t.CRH())&&(r.linkTemplate=g.first),t.iGM(g=t.CRH())&&(r.nodeTemplate=g.first),t.iGM(g=t.CRH())&&(r.clusterTemplate=g.first),t.iGM(g=t.CRH())&&(r.defsTemplate=g.first),t.iGM(g=t.CRH())&&(r.miniMapNodeTemplate=g.first)}},viewQuery:function(e,r){if(1&e&&(t.Gf(Va,5),t.Gf(Ya,5)),2&e){let s;t.iGM(s=t.CRH())&&(r.nodeElements=s),t.iGM(s=t.CRH())&&(r.linkElements=s)}},hostBindings:function(e,r){1&e&&t.NdJ("mousemove",function(g){return r.onMouseMove(g)},!1,t.evT)("mousedown",function(g){return r.onMouseDown(g)},!1,t.evT)("click",function(g){return r.graphClick(g)},!1,t.evT)("touchmove",function(g){return r.onTouchMove(g)},!1,t.evT)("mouseup",function(g){return r.onMouseUp(g)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:au,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,r){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(g){return r.onZoom(g,"in")})("mouseWheelDown",function(g){return r.onZoom(g,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,eu,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,su,6,15,"g",3),t.qZA(),t.qZA()),2&e&&(t.Udp("width",r.width,"px"),t.Q6J("@animationState","active")("@.disabled",!r.animations),t.xp6(1),t.uIk("width",r.width)("height",r.height),t.xp6(1),t.Q6J("ngIf",r.initialized&&r.graph),t.xp6(1),t.uIk("id",r.minimapClipPathId),t.xp6(1),t.uIk("width",r.graphDims.width/r.minimapScaleCoefficient)("height",r.graphDims.height/r.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",r.showMiniMap))},directives:[_u,c.O5,c.sg,c.tP],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,W.X$)("animationState",[(0,W.eR)(":enter",[(0,W.oB)({opacity:0}),(0,W.jt)("500ms 100ms",(0,W.oB)({opacity:1}))])])]},changeDetection:0}),function(n,i,e,r){var b,s=arguments.length,g=s<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,i,e,r);else for(var w=n.length-1;w>=0;w--)(b=n[w])&&(g=(s<3?b(g):s>3?b(i,e,g):b(i,e))||g);s>3&&g&&Object.defineProperty(i,e,g)}([lu(500)],n.prototype,"updateMinimap",null),n})(),xu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ti],imports:[[c.ez]]}),n})(),yu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez],xu]}),n})(),bu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,u.Bz,yu,h.XC,m.UX,h.IJ]]}),n})();var ei=o(6215);let we=(()=>{class n{constructor(e){this.datePipe=e,this.graph={date:"",name:"",description:"",nodes:[],edges:[],clusters:[]},this.graph$=new ei.X(null)}createGraph(e,r){return!localStorage.getItem(e)&&(this.graph.date=this.datePipe.transform(new Date,"YYYY-MM-dd HH:mm:ss")||"",this.graph.name=e,this.graph.description=r,this.graph.nodes=[],this.graph.edges=[],this.graph.clusters=[],this.graph$.next(this.graph),!0)}loadGraph(e){return e<localStorage.length&&(this.graph=JSON.parse(localStorage.getItem(localStorage.key(e)||"")||""),this.graph$.next(this.graph),!0)}editGraph(e,r){this.graph.name=e,this.graph.description=r,this.graph$.next(this.graph)}addNode(e){return!(!e||this.graph.nodes.find(r=>r.id==e.id)||(this.graph.nodes.push(e),this.graph$.next(e),0))}addEdge(e){return!(!e||this.graph.edges.find(r=>r.id==e.id)||(this.graph.edges.push(e),this.graph$.next(e),0))}addCluster(e){return!(!e||this.graph.clusters.find(r=>r.id==e.id)||(this.graph.clusters.push(e),this.graph$.next(e),0))}editNode(e){let r=this.graph.nodes.indexOf(this.graph.nodes.find(s=>s.id==e.id)||e);return r>=0&&(this.graph.nodes[r]=e,this.graph$.next(e),!0)}editEdge(e){let r=this.graph.edges.indexOf(this.graph.edges.find(s=>s.id==e.id)||e);return r>=0&&(this.graph.edges[r]=e,this.graph$.next(e),!0)}editCluster(e){let r=this.graph.clusters.indexOf(this.graph.clusters.find(s=>s.id==e.id)||e);return r>=0&&(this.graph.clusters[r]=e,this.graph$.next(e),!0)}addToCluster(e,r){var s,g;let b=this.graph.clusters.find(w=>w.id==e);if(b){let w=this.graph.clusters.indexOf(b);if(w>=0&&!(null===(s=b.childNodeIds)||void 0===s?void 0:s.find(S=>S==r.id)))return null===(g=b.childNodeIds)||void 0===g||g.push(r.id),this.graph.clusters[w]=b,this.graph$.next(b),!0}return!1}deleteNode(e){let r=[];this.graph.nodes.forEach((s,g)=>{s.id==e&&(this.graph.nodes.splice(g,1),r=this.graph.edges.filter(b=>b.source==e||b.target==e),this.graph.clusters.forEach(b=>{b.childNodeIds&&b.childNodeIds.forEach((w,S)=>{var F;w==e&&(null===(F=b.childNodeIds)||void 0===F||F.splice(S,1))})}))}),r.forEach(s=>{this.graph.edges.splice(this.graph.edges.indexOf(s),1)}),this.graph$.next(this.graph)}deleteEdge(e){this.graph.edges.forEach((r,s)=>{r.id==e&&this.graph.edges.splice(s,1)}),this.graph$.next(this.graph)}deleteCluster(e){this.graph.clusters.forEach((r,s)=>{r.id==e&&this.graph.clusters.splice(s,1)}),this.graph$.next(this.graph)}saveGraphInStorage(){localStorage.setItem(this.graph.name,JSON.stringify(this.graph))}clearGraph(){this.graph.nodes=[],this.graph.edges=[],this.graph.clusters=[],this.graph$.next(this.graph)}getNode(e){return this.graph.nodes.find(r=>r.id==e)}getEdge(e){return this.graph.edges.find(r=>r.id==e)}getCluster(e){return this.graph.clusters.find(r=>r.id==e)}getConds(e){return Object.entries(e.properties).map(s=>s[1])}getTaskNodes(){return this.graph.nodes.filter(e=>"task"==e.type)||[]}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.uU))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wu(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",13),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?40:30+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",40+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function Cu(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,wu,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function Eu(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Cu,2,1,"g",7),t._UZ(2,"rect",8),t._UZ(3,"rect",9),t.TgZ(4,"text",10),t._uU(5),t.qZA(),t.TgZ(6,"text",11),t._uU(7),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.showNodeDetails==e.id),t.xp6(4),t.Oqu(e.id),t.xp6(2),t.hij("props: ",r.Object.entries(e.properties).length,"")}}function Tu(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",17),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?60:50+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",60+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function Nu(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Tu,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function Au(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",15),t.TgZ(2,"text",16),t._uU(3,"AND"),t.qZA(),t.YNc(4,Nu,2,1,"g",7),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.uIk("width",1e3),t.xp6(3),t.Q6J("ngIf",r.showNodeDetails==e.id)}}function Su(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",18),t.TgZ(2,"text",19),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",1e3),t.xp6(2),t.hij(" ","cin"==e.id.split("_")[0]?"IN":"OUT"," ")}}function Iu(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",6),t.NdJ("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreNodeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreNodeDetails(0)}),t.YNc(1,Eu,8,3,"g",7),t.YNc(2,Au,5,2,"g",7),t.YNc(3,Su,4,2,"g",7),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf","task"==e.type),t.xp6(1),t.Q6J("ngIf","cond"==e.type),t.xp6(1),t.Q6J("ngIf","clus"==e.type)}}function ku(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"text",24),t.TgZ(1,"textPath",25),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Udp("dominant-baseline",e.dominantBaseline),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.weight," ")}}const Ou=function(n,i){return{"edge-success":n,"edge-insuccess":i}};function Zu(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",20),t.NdJ("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreEdgeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreEdgeDetails(0)}),t._UZ(1,"circle",21),t._UZ(2,"path",22),t.YNc(3,ku,3,4,"text",23),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(2,Ou,2==r.checkConditions(e),1==r.checkConditions(e))),t.xp6(1),t.Q6J("ngIf",r.showEdgeDetails==e.id)}}function Fu(n,i){1&n&&(t.O4$(),t.TgZ(0,"marker",26),t._UZ(1,"path",27),t.qZA())}function Mu(n,i){1&n&&(t.O4$(),t._UZ(0,"g"))}function Pu(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",28),t.NdJ("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreClusterDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreClusterDetails(0)}),t._UZ(1,"rect",29),t.TgZ(2,"text",30),t._uU(3,"OR"),t.qZA(),t.YNc(4,Mu,1,0,"g",7),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height),t.xp6(3),t.Q6J("ngIf",r.showClusterDetails==e.id)}}const Lu=function(n){return{height:n}};let Du=(()=>{class n{constructor(e,r){this.graphEditingService=e,this.activatedRoute=r,this.nodes=[],this.edges=[],this.clusters=[],this.graph_id=0,this.update$=new Ht.xQ,this.Object=Object,this.showNodeDetails=0,this.showEdgeDetails=0,this.showClusterDetails=0,this.layout=new tn,this.graph_id=this.activatedRoute.snapshot.params.graph_id,this.graphEditingService.loadGraph(this.graph_id-1),this.updateGraph()}ngOnInit(){}ngOnChanges(e){}getContentHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}updateGraph(){this.nodes=this.graphEditingService.graph.nodes,this.edges=this.graphEditingService.graph.edges,this.clusters=this.graphEditingService.graph.clusters,this.update$.next(!0)}moreNodeDetails(e){this.showNodeDetails=e}moreEdgeDetails(e){this.showEdgeDetails=e}moreClusterDetails(e){this.showClusterDetails=e}checkClusterConditions(e,r){let s=[];e.childNodeIds&&(s=e.childNodeIds.filter(b=>"c"==b.split("_")[0]).map(b=>this.graphEditingService.getNode(b)));let g=!1;return s.forEach(b=>{this.checkAllProps(b,r)&&(g=!0)}),g}checkConditions(e){const r=this.nodes.find(g=>g.id==e.source),s=this.nodes.find(g=>g.id==e.target);if(s&&"task"==s.type&&r&&"clus"==r.type){let g=this.clusters.find(b=>b.id=="clus_"+r.id.split("_")[1]);return g&&this.checkClusterConditions(g,s)?2:1}if(s&&"clus"==s.type&&r&&"cond"==r.type){let g=this.nodes.find(b=>b.id==r.id.split("_")[1].split("-")[1]);return g&&this.checkAllProps(r,g)?2:1}return 0}checkAllProps(e,r){const s=Object.entries(e.properties).map(w=>w[1]),g=Object.entries(r.properties).map(w=>w[1]);let b=!0;return s.forEach(w=>{if(""==w.value||null==w.value){if(!g.find(S=>S.name==w.name))return void(b=!1)}else if(!g.find(F=>F.name==w.name&&F.value==w.value))return void(b=!1)}),b}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(we),t.Y36(u.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],features:[t.TTD],decls:10,vars:8,consts:[[3,"ngStyle"],[1,"chart-container",3,"nodes","links","clusters","update$","layout"],["nodeTemplate",""],["linkTemplate",""],["defsTemplate",""],["clusterTemplate",""],["xmlns","http://www.w3.org/2000/svg",3,"mouseenter","mouseleave"],[4,"ngIf"],["x","0","y","10","width","100","height","50","rx","10","fill","#a22"],["x","0","y","0","width","100","height","30","rx","10","fill","#811"],["x","20","y","20","font-size","16","fill","#fff"],["x","10","y","50","font-size","16","fill","#fff"],[4,"ngFor","ngForOf"],["x","0","width","100","rx","10","fill","#a22"],["x","10","font-size","16","fill","#fff"],["cx","30","cy","25","r","25","fill","#118"],["x","16","y","30","font-size","14","fill","#fff"],["x","0","width","100","rx","10","fill","#118"],["cx","22","cy","17","r","17","fill","#ccc"],["x","11","y","23","font-size","14","fill","#000"],[1,"edge",3,"mouseenter","mouseleave"],["width","15","height","15","fill","#000"],["stroke-width","5","marker-end","url(#arrow)",1,"line",3,"ngClass"],["class","edge-label","text-anchor","middle",4,"ngIf"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path",2,"font-size","20px"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node","cluster",3,"mouseenter","mouseleave"],["x","10","y","10","rx","5","ry","5","stroke","#000","stroke-width","5","fill","#0005"],["x","20","y","30","font-size","16","fill","#000"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"ngx-graph",1),t.YNc(2,Iu,4,3,"ng-template",null,2,t.W1O),t.YNc(4,Zu,4,5,"ng-template",null,3,t.W1O),t.YNc(6,Fu,2,0,"ng-template",null,4,t.W1O),t.YNc(8,Pu,5,3,"ng-template",null,5,t.W1O),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(6,Lu,r.getContentHeight())),t.xp6(1),t.Q6J("nodes",r.nodes)("links",r.edges)("clusters",r.clusters)("update$",r.update$)("layout",r.layout))},directives:[c.PC,In,c.O5,c.sg,c.mk],styles:[".edge-success[_ngcontent-%COMP%]{stroke:#393}.edge-insuccess[_ngcontent-%COMP%]{stroke:#a33}.cluster-success[_ngcontent-%COMP%]{stroke:#0f0}.cluster-insuccess[_ngcontent-%COMP%]{stroke:red}"]}),n})();var Gu=o(6575);let Uu=(()=>{class n{constructor(e){this.users=e,this.username=sessionStorage.getItem("username")||""}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Gu.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-header"]],decls:15,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"navbar-brand","ms-4","me-auto",3,"routerLink"],["src","../../../assets/images/logo-gray.svg","width","40","alt","logo",1,"mx-2"],[1,"d-none","d-sm-inline","mx-3","fs-4","my-grey"],["ngbDropdown",""],["ngbDropdownToggle","","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","mx-3","btn-light"],["ngbDropdownMenu","","aria-labelledby","userDropdown",1,"py-0",2,"right","0"],["ngbDropdownItem",""],["ngbDropdownItem","",3,"routerLink"]],template:function(e,r){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"a",1),t._UZ(2,"img",2),t.TgZ(3,"span",3),t._uU(4,"App Grafi"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t._uU(7),t.qZA(),t.TgZ(8,"ul",6),t.TgZ(9,"li"),t.TgZ(10,"button",7),t._uU(11,"User page"),t.qZA(),t.qZA(),t.TgZ(12,"li"),t.TgZ(13,"button",8),t._uU(14,"Logout"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("routerLink","/app/graph"),t.xp6(6),t.hij(" ",r.username," "),t.xp6(6),t.Q6J("routerLink","/login"))},directives:[h.M2,u.yS,h.jt,h.iD,h.Vi,h.TH,u.rH],styles:[".header-link[_ngcontent-%COMP%]{font-size:1.2rem}"]}),n})();const Bu=function(n,i){return{"padding-bottom":n,"min-height":i}};let Ju=(()=>{class n{constructor(e){this.router=e}ngOnInit(){}getContentHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}getContentBottomPadding(){var e;return"/app/graph/list"==this.router.url?((null===(e=document.getElementsByTagName("app-footer")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||29).toString()+"px":"0px"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:4,consts:[[2,"background-color","#f1f1f1",3,"ngStyle"]],template:function(e,r){1&e&&(t.TgZ(0,"main",0),t._UZ(1,"router-outlet"),t.qZA()),2&e&&t.Q6J("ngStyle",t.WLB(1,Bu,r.getContentBottomPadding(),r.getContentHeight()))},directives:[c.PC,u.lC],styles:[""]}),n})(),Vu=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"bg-dark",2,"position","fixed","bottom","0","height","10vh","width","100vw"],[1,"fs-6","text-center","m-0","pt-4","pb-5",2,"color","#555"]],template:function(e,r){1&e&&(t.TgZ(0,"footer",0),t.TgZ(1,"p",1),t._uU(2,"Grafo App"),t.qZA(),t.qZA())},styles:[""]}),n})();function Yu(n,i){1&n&&t._UZ(0,"app-footer")}let Ru=(()=>{class n{constructor(e){this.router=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-content"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(t._UZ(0,"app-header"),t._UZ(1,"app-main"),t.YNc(2,Yu,1,0,"app-footer",0)),2&e&&(t.xp6(2),t.Q6J("ngIf","/app/graph/list"==r.router.url))},directives:[Uu,Ju,c.O5,Vu],styles:[""]}),n})();function $u(n,i){1&n&&(t.TgZ(0,"p",11),t._uU(1,"graph name required"),t.qZA())}function Hu(n,i){1&n&&(t.TgZ(0,"p",11),t._uU(1,"graph name already taken"),t.qZA())}const Qu=function(n){return{disabled:n}};function zu(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",2),t.TgZ(1,"h3",3),t._uU(2,"Graph details"),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"input",5),t.NdJ("input",function(s){return t.CHM(e),t.oxw().checkGraphName(s.target.value)}),t.qZA(),t.TgZ(5,"label",6),t._uU(6,"graph name"),t.qZA(),t.YNc(7,$u,2,0,"p",7),t.YNc(8,Hu,2,0,"p",7),t.qZA(),t.TgZ(9,"div",4),t._UZ(10,"textarea",8),t.TgZ(11,"label",9),t._uU(12,"Graph description"),t.qZA(),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().tryCreate()}),t._uU(14,"Next"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.graphInitForm),t.xp6(7),t.Q6J("ngIf",!e.graphInitForm.controls.graph_name.valid),t.xp6(1),t.Q6J("ngIf",e.graphNameAlready),t.xp6(5),t.Q6J("ngClass",t.VKq(4,Qu,!e.graphInitForm.controls.graph_name.valid||e.graphNameAlready))}}function ju(n,i){if(1&n&&(t.TgZ(0,"p",53),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.nodeForm.controls.node_id.errors?null:e.nodeForm.controls.node_id.errors.msg)}}function Xu(n,i){1&n&&t._UZ(0,"img",54)}function Wu(n,i){1&n&&t._UZ(0,"img",55)}function Ku(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",62),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(3).removeNodeDataField(s)}),t._UZ(1,"img",63),t.qZA()}}function qu(n,i){if(1&n&&(t.TgZ(0,"small",53),t._uU(1),t.qZA()),2&n){const e=t.oxw().index,r=t.oxw(3);let s;t.xp6(1),t.Oqu(null==(s=r.nodeForm.get("node_data."+e+".name"))||null==s.errors?null:s.errors.msg)}}const zt=function(n){return{"is-invalid":n}};function tl(n,i){if(1&n&&(t.TgZ(0,"div",56),t.TgZ(1,"div",57),t._UZ(2,"input",58),t.qZA(),t.TgZ(3,"div",59),t._UZ(4,"input",60),t.qZA(),t.YNc(5,Ku,2,0,"div",61),t.YNc(6,qu,2,1,"small",33),t.qZA()),2&n){const e=i.$implicit,r=i.index,s=t.oxw(3);let g,b,w;t.Q6J("formGroupName",r),t.xp6(2),t.Q6J("ngClass",t.VKq(5,zt,!(null!=(g=s.nodeForm.get("node_data."+r+".name"))&&g.valid))),t.xp6(2),t.Q6J("ngClass",t.VKq(7,zt,!(null!=(b=s.nodeForm.get("node_data."+r+".value"))&&b.valid))),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!(null!=(w=s.nodeForm.get("node_data."+r+".name"))&&w.valid))}}function el(n,i){1&n&&(t.TgZ(0,"div",64),t.TgZ(1,"p",65),t._uU(2,"no properties"),t.qZA(),t.qZA())}function nl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).deleteNode()}),t._uU(1,"Delete"),t.qZA()}}const kn=function(n,i){return{disabled:n,"btn-warning":i}};function rl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",31),t._UZ(2,"input",32),t.YNc(3,ju,2,1,"p",33),t._UZ(4,"input",34),t.TgZ(5,"div",35),t.TgZ(6,"div",36),t.TgZ(7,"div",37),t.NdJ("click",function(){return t.CHM(e),t.MAs(13).toggle()}),t._uU(8," Data "),t.TgZ(9,"button",38),t.YNc(10,Xu,1,0,"img",39),t.YNc(11,Wu,1,0,"img",40),t.qZA(),t.qZA(),t.TgZ(12,"div",41,42),t.NdJ("ngbCollapseChange",function(s){return t.CHM(e),t.oxw(2).isCollapsed=s}),t.TgZ(14,"div",43),t.YNc(15,tl,7,9,"div",44),t.qZA(),t.YNc(16,el,3,0,"div",45),t.TgZ(17,"div",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addNodeDataField()}),t._UZ(18,"img",47),t.TgZ(19,"p",48),t._uU(20,"Add data field"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",49),t.TgZ(22,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).tryNode()}),t._uU(23,"Add"),t.qZA(),t.YNc(24,nl,2,0,"button",51),t.TgZ(25,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearNodeInput()}),t._uU(26,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);let r;t.xp6(1),t.Q6J("formGroup",e.nodeForm),t.xp6(1),t.Q6J("ngClass",t.VKq(13,zt,!e.nodeForm.controls.node_id.valid))("readonly",e.nodeEditing),t.xp6(1),t.Q6J("ngIf",null==e.nodeForm.controls.node_id.errors?null:e.nodeForm.controls.node_id.errors.already),t.xp6(4),t.uIk("aria-expanded",!e.isCollapsed),t.xp6(3),t.Q6J("ngIf",e.isCollapsed),t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngbCollapse",e.isCollapsed),t.xp6(3),t.Q6J("ngForOf",e.nodeDataForm.controls),t.xp6(1),t.Q6J("ngIf",0==e.nodeForm.controls.node_data.value.length),t.xp6(6),t.Q6J("ngClass",t.WLB(15,kn,!e.nodeForm.valid||!(null!=(r=e.nodeForm.get("node_data"))&&r.valid),e.nodeEditing))("innerText",e.nodeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.nodeEditing)}}function il(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function ol(n,i){if(1&n&&(t.TgZ(0,"option",74),t.YNc(1,il,2,1,"p",26),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function sl(n,i){1&n&&(t.TgZ(0,"p",75),t._uU(1,"source node doesn't exist"),t.qZA())}function al(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function ul(n,i){if(1&n&&(t.TgZ(0,"option",74),t.YNc(1,al,2,1,"p",26),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function ll(n,i){1&n&&(t.TgZ(0,"p",75),t._uU(1,"target node doesn't exist"),t.qZA())}function cl(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.condForm.errors?null:e.condForm.errors.msg)}}function dl(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.condForm.errors?null:e.condForm.errors.msg)}}function hl(n,i){1&n&&t._UZ(0,"img",54)}function fl(n,i){1&n&&t._UZ(0,"img",55)}function pl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",62),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(3).removeCondDataField(s)}),t._UZ(1,"img",63),t.qZA()}}function gl(n,i){if(1&n&&(t.TgZ(0,"small",53),t._uU(1),t.qZA()),2&n){const e=t.oxw().index,r=t.oxw(3);let s;t.xp6(1),t.Oqu(null==(s=r.condForm.get("cond_data."+e+".name"))||null==s.errors?null:s.errors.msg)}}function ml(n,i){if(1&n&&(t.TgZ(0,"div",56),t.TgZ(1,"div",57),t._UZ(2,"input",58),t.qZA(),t.TgZ(3,"div",59),t._UZ(4,"input",60),t.qZA(),t.YNc(5,pl,2,0,"div",61),t.YNc(6,gl,2,1,"small",33),t.qZA()),2&n){const e=i.$implicit,r=i.index,s=t.oxw(3);let g,b,w;t.Q6J("formGroupName",r),t.xp6(2),t.Q6J("ngClass",t.VKq(5,zt,!(null!=(g=s.condForm.get("cond_data."+r+".name"))&&g.valid))),t.xp6(2),t.Q6J("ngClass",t.VKq(7,zt,!(null!=(b=s.condForm.get("cond_data."+r+".value"))&&b.valid))),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!(null!=(w=s.condForm.get("cond_data."+r+".name"))&&w.valid))}}function vl(n,i){1&n&&(t.TgZ(0,"div",64),t.TgZ(1,"p",65),t._uU(2,"no properties"),t.qZA(),t.qZA())}function _l(n,i){if(1&n&&(t.TgZ(0,"small",11),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.condForm.controls.cond_data.errors?null:e.condForm.controls.cond_data.errors.msg)}}function xl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).deleteCond()}),t._uU(1,"Delete"),t.qZA()}}function yl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",31),t.TgZ(2,"select",67),t.TgZ(3,"option",68),t._uU(4,"No input node"),t.qZA(),t.YNc(5,ol,2,2,"option",69),t.qZA(),t.YNc(6,sl,2,0,"p",70),t.TgZ(7,"select",71),t.YNc(8,ul,2,2,"option",69),t.qZA(),t.YNc(9,ll,2,0,"p",70),t.YNc(10,cl,2,1,"p",70),t.YNc(11,dl,2,1,"p",70),t._UZ(12,"input",72),t.TgZ(13,"div",35),t.TgZ(14,"div",36),t.TgZ(15,"div",37),t.NdJ("click",function(){return t.CHM(e),t.MAs(21).toggle()}),t._uU(16," Data "),t.TgZ(17,"button",38),t.YNc(18,hl,1,0,"img",39),t.YNc(19,fl,1,0,"img",40),t.qZA(),t.qZA(),t.TgZ(20,"div",41,42),t.NdJ("ngbCollapseChange",function(s){return t.CHM(e),t.oxw(2).isCollapsed=s}),t.TgZ(22,"div",73),t.YNc(23,ml,7,9,"div",44),t.qZA(),t.YNc(24,vl,3,0,"div",45),t.TgZ(25,"div",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addCondDataField()}),t._UZ(26,"img",47),t.TgZ(27,"p",48),t._uU(28,"Add data field"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(29,_l,2,1,"small",7),t.TgZ(30,"div",49),t.TgZ(31,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).tryCond()}),t._uU(32,"Add"),t.qZA(),t.YNc(33,xl,2,0,"button",51),t.TgZ(34,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearCondInput()}),t._uU(35,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.condForm),t.xp6(1),t.Q6J("ngClass",t.VKq(22,zt,!e.condForm.controls.cond_source.valid)),t.uIk("disabled",!!e.nodeEditing||null),t.xp6(1),t.Q6J("ngValue",null),t.xp6(2),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.condForm.controls.cond_source.errors?null:e.condForm.controls.cond_source.errors.notFound),t.xp6(1),t.Q6J("ngClass",t.VKq(24,zt,!e.condForm.controls.cond_target.valid)),t.uIk("disabled",!!e.nodeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.condForm.controls.cond_target.errors?null:e.condForm.controls.cond_target.errors.notFound),t.xp6(1),t.Q6J("ngIf",null==e.condForm.errors?null:e.condForm.errors.loop),t.xp6(1),t.Q6J("ngIf",null==e.condForm.errors?null:e.condForm.errors.edgeNotFound),t.xp6(4),t.uIk("aria-expanded",!e.isCollapsed),t.xp6(3),t.Q6J("ngIf",e.isCollapsed),t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngbCollapse",e.isCollapsed),t.xp6(3),t.Q6J("ngForOf",e.condDataForm.controls),t.xp6(1),t.Q6J("ngIf",0==e.condForm.controls.cond_data.value.length),t.xp6(5),t.Q6J("ngIf",!e.condForm.controls.cond_data.valid),t.xp6(2),t.Q6J("ngClass",t.WLB(26,kn,!e.condForm.controls.cond_data.valid||!e.condForm.controls.cond_target.valid,e.nodeEditing))("innerText",e.nodeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.nodeEditing)}}function bl(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function wl(n,i){if(1&n&&(t.TgZ(0,"option",74),t.YNc(1,bl,2,1,"p",26),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function Cl(n,i){1&n&&(t.TgZ(0,"p",75),t._uU(1,"source node doesn't exist"),t.qZA())}function El(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function Tl(n,i){if(1&n&&(t.TgZ(0,"option",74),t.YNc(1,El,2,1,"p",26),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function Nl(n,i){1&n&&(t.TgZ(0,"p",75),t._uU(1,"target node doesn't exist"),t.qZA())}function Al(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.msg)}}function Sl(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Il(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function kl(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Ol(n,i){if(1&n&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Zl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).deleteEdge()}),t._uU(1,"Delete"),t.qZA()}}function Fl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",31),t.TgZ(2,"select",76),t.YNc(3,wl,2,2,"option",69),t.qZA(),t.YNc(4,Cl,2,0,"p",70),t.TgZ(5,"select",77),t.YNc(6,Tl,2,2,"option",69),t.qZA(),t.YNc(7,Nl,2,0,"p",70),t.YNc(8,Al,2,1,"p",70),t.YNc(9,Sl,2,1,"p",70),t.YNc(10,Il,2,1,"p",70),t.YNc(11,kl,2,1,"p",70),t._UZ(12,"input",78),t.TgZ(13,"div",79),t.TgZ(14,"p",80),t._uU(15,"Edge weight:"),t.qZA(),t.TgZ(16,"div",81),t._UZ(17,"input",82),t.qZA(),t.YNc(18,Ol,2,1,"p",70),t.qZA(),t.TgZ(19,"div",49),t.TgZ(20,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).tryEdge()}),t._uU(21,"Add"),t.qZA(),t.YNc(22,Zl,2,0,"button",51),t.TgZ(23,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearEdgeInput()}),t._uU(24,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.edgeForm),t.xp6(1),t.Q6J("ngClass",t.VKq(17,zt,!e.edgeForm.controls.edge_source.valid)),t.uIk("disabled",!!e.edgeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.controls.edge_source.errors?null:e.edgeForm.controls.edge_source.errors.notFound),t.xp6(1),t.Q6J("ngClass",t.VKq(19,zt,!e.edgeForm.controls.edge_target.valid)),t.uIk("disabled",!!e.edgeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.notFound),t.xp6(1),t.Q6J("ngIf",(null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.already2cond)&&!(null!=e.edgeForm.errors&&e.edgeForm.errors.cond2cond)),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.already),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.loop),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.cond2cond),t.xp6(7),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.weightError),t.xp6(2),t.Q6J("ngClass",t.WLB(21,kn,!e.edgeForm.valid,e.edgeEditing))("innerText",e.edgeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.edgeEditing)}}const Ml=function(n){return{height:n}};function Pl(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.TgZ(2,"div",14),t.TgZ(3,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().isCreated=!1}),t._UZ(4,"img",16),t.qZA(),t.TgZ(5,"h3",17),t._uU(6),t.qZA(),t.TgZ(7,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().start_over()}),t._uU(8,"Start over"),t.qZA(),t.qZA(),t.TgZ(9,"div",19),t.TgZ(10,"h5",20),t._uU(11,"Create:"),t.qZA(),t.TgZ(12,"select",21),t.NdJ("change",function(s){return t.CHM(e),t.oxw().changedView(s.target.value)}),t.TgZ(13,"option",22),t._uU(14,"Node task"),t.qZA(),t.TgZ(15,"option",23),t._uU(16,"Node condition"),t.qZA(),t.TgZ(17,"option",24),t._uU(18,"Edge"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",25),t.YNc(20,rl,27,18,"div",26),t.YNc(21,yl,36,29,"div",26),t.YNc(22,Fl,25,24,"div",26),t.qZA(),t.qZA(),t.TgZ(23,"div",27),t.TgZ(24,"div",13),t.TgZ(25,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveGraph()}),t._uU(26,"Create Graph"),t.qZA(),t.qZA(),t.TgZ(27,"div",29),t.TgZ(28,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().centerGraph()}),t._uU(29,"Center graph"),t.qZA(),t.TgZ(30,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().fitGraph()}),t._uU(31,"Zoom to fit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngStyle",t.VKq(6,Ml,e.getSidebarHeight())),t.xp6(6),t.Oqu(e.graphEditingService.graph.name),t.xp6(6),t.Q6J("value",e.view),t.xp6(8),t.Q6J("ngIf","node_task"==e.view),t.xp6(1),t.Q6J("ngIf","node_cond"==e.view),t.xp6(1),t.Q6J("ngIf","edge"==e.view)}}let Ll=(()=>{class n{constructor(e,r,s){this.graphEditingService=e,this.formBuilder=r,this.router=s,this.updateGraphView=new t.vpe,this.graphNameAlready=!1,this.nodeEditing=!1,this.edgeEditing=!1,this.clusterEditing=!1,this.Object=Object,this.view="node_task",this.isCreated=!1,this.isCollapsed=!0,this.nodePropId=0,this.edgePropId=0,this.graphEditingService.clearGraph(),this.graphInitForm=this.formBuilder.group({graph_name:["",m.kI.required],graph_desc:new m.NI("",m.kI.required)}),this.nodeForm=this.formBuilder.group({node_id:[null,[m.kI.required,this.checkNodeId()]],node_label:null,node_type:null,node_data:this.formBuilder.array([])}),this.nodePropForm=this.formBuilder.group({node_prop_name:[null,[m.kI.required,this.checkNodeProperty()]],node_prop_value:null}),this.condForm=this.formBuilder.group({cond_id:null,cond_source:null,cond_target:[null,[m.kI.required,this.checkCondNodeTask()]],cond_label:null,cond_cluster:null,cond_data:this.formBuilder.array([],this.checkCondPresent())},{validators:this.checkCondForm()}),this.edgeForm=this.formBuilder.group({edge_id:null,edge_label:null,edge_source:[null,[m.kI.required,this.checkEdgeNode()]],edge_target:[null,[m.kI.required,this.checkEdgeNode()]],edge_weight:[1,this.checkEdgeWeight()]},{validators:this.checkEdgeId()}),this.clusterForm=this.formBuilder.group({cluster_id:[null,[m.kI.required,this.checkClusterId()]],cluster_label:null,cluster_nodes:this.formBuilder.array([])})}ngOnInit(){}ngOnChanges(e){1==this.forcedChange&&this.selectedNodeInputChange(this.selectedNode),2==this.forcedChange&&this.selectedEdgeInputChange(this.selectedEdge)}getSidebarHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}get graph(){return this.graphEditingService.graph}get nodeDataForm(){return this.nodeForm.get("node_data")}get condDataForm(){return this.condForm.get("cond_data")}get clusterNodes(){return this.clusterForm.get("cluster_nodes")}checkGraphName(e){this.graphNameAlready=!!localStorage.getItem(e)}tryCreate(){this.graphInitForm.controls.graph_name.valid&&(this.isCreated=this.graphEditingService.createGraph(this.graphInitForm.controls.graph_name.value,this.graphInitForm.controls.graph_desc.value))}tryNode(){let e=this.nodeForm.controls.node_id.value,r=this.nodeForm.controls.node_label.value||"";this.nodeForm.controls.node_type.setValue("node_cond"==this.view?"cond":"task");let b={id:e,label:r,type:this.nodeForm.controls.node_type.value,properties:this.nodeForm.controls.node_data.value};this.nodeEditing?this.graphEditingService.editNode(b):this.graphEditingService.addNode(b),this.clearNodeInput()}tryCond(){var e,r,s,g,b;let w=this.condForm.controls.cond_source.value||"",S=this.condForm.controls.cond_target.value,F=this.condForm.controls.cond_label.value||"",U=this.condForm.controls.cond_data.value;this.condForm.controls.cond_cluster.setValue("clus_"+w+"-"+S);let $=this.condForm.controls.cond_cluster.value;if(!this.graph.clusters.find(ot=>ot.id==$)){let ot={id:"clus_"+w+"-"+S,label:"",childNodeIds:[]};if(this.graphEditingService.addCluster(ot),""!=w){let _t={id:"cin_"+w+"-"+S,label:"",type:"clus",properties:{}};this.graphEditingService.addNode(_t),this.graphEditingService.addEdge({id:"_"+w+"-"+_t.id,source:w,target:_t.id,label:"",weight:1}),this.graphEditingService.addToCluster(ot.id,_t),this.graphEditingService.deleteEdge("_"+w+"-"+S)}let dt={id:"cout_"+w+"-"+S,label:"",type:"clus",properties:{}};this.graphEditingService.addNode(dt),this.graphEditingService.addEdge({id:"_"+dt.id+"-"+S,source:dt.id,target:S,label:"",weight:1}),this.graphEditingService.addToCluster(ot.id,dt)}if(!this.nodeEditing){let ot=Number((null===(e=this.graph.nodes.filter(dt=>"c"==dt.id.split("_")[0]&&dt.id.split("_")[1]==w+"-"+S).pop())||void 0===e?void 0:e.id.split("_")[2])||"0");ot+=1,this.condForm.controls.cond_id.setValue("c_"+w+"-"+S+"_"+String(ot))}let j=this.condForm.controls.cond_id.value;if(""!=w){let ot=(null===(s=null===(r=this.graphEditingService.getCluster($))||void 0===r?void 0:r.childNodeIds)||void 0===s?void 0:s.find(ct=>"cin"==ct.split("_")[0]))||"";this.graphEditingService.addEdge({id:"_"+ot+"-"+j,label:"",weight:1,source:ot,target:j})}let nt=(null===(b=null===(g=this.graphEditingService.getCluster($))||void 0===g?void 0:g.childNodeIds)||void 0===b?void 0:b.find(ot=>"cout"==ot.split("_")[0]))||"";this.graphEditingService.addEdge({id:"_"+j+"-"+nt,label:"",weight:1,source:j,target:nt});let at={id:j,label:F,type:"cond",properties:U};this.nodeEditing?this.graphEditingService.editNode(at):(this.graphEditingService.addNode(at),this.graphEditingService.addToCluster($,at)),this.clearCondInput()}tryEdge(){let e=this.edgeForm.controls.edge_label.value||"",r=this.edgeForm.controls.edge_source.value,s=this.edgeForm.controls.edge_target.value;this.edgeForm.controls.edge_id.setValue("_"+r+"-"+s);let w={id:this.edgeForm.controls.edge_id.value,source:r,target:s,label:e,weight:this.edgeForm.controls.edge_weight.value||1};this.edgeEditing?this.graphEditingService.editEdge(w):this.graphEditingService.addEdge(w),this.clearEdgeInput()}tryCluster(){let g={id:this.clusterForm.controls.cluster_id.value,label:this.clusterForm.controls.cluster_label.value||"",childNodeIds:this.clusterForm.controls.cluster_nodes.value||[]};this.clusterEditing?this.graphEditingService.editCluster(g):this.graphEditingService.addCluster(g),this.clearClusterInput()}deleteNode(){this.graphEditingService.deleteNode(this.nodeForm.controls.node_id.value),this.clearNodeInput()}deleteEdge(){this.graphEditingService.deleteEdge(this.edgeForm.controls.edge_id.value),this.clearEdgeInput()}deleteCond(){var e,r;let s=this.condForm.controls.cond_id.value;this.graphEditingService.deleteNode(s);let g=s.split("_")[1],b="clus_"+g;(null===(r=null===(e=this.graph.clusters.find(w=>w.id==b))||void 0===e?void 0:e.childNodeIds)||void 0===r?void 0:r.find(w=>"c"==w.split("_")[0]))||(this.graphEditingService.deleteCluster(b),this.graphEditingService.deleteNode("cin_"+g),this.graphEditingService.deleteNode("cout_"+g),g.split("-")[0]&&this.graphEditingService.addEdge({id:"_"+g,label:"",source:g.split("-")[0],target:g.split("-")[1],weight:1})),this.clearCondInput()}deleteCluster(){this.graphEditingService.deleteCluster(this.clusterForm.controls.cluster_id.value),this.clearClusterInput()}clearNodeInput(){this.nodeEditing=!1,this.nodePropId=0,this.nodeForm.reset(),this.nodeForm.controls.node_data=this.formBuilder.array([])}clearCondInput(){this.nodeEditing=!1,this.nodePropId=0,this.condForm.reset(),this.condForm.controls.cond_data=this.formBuilder.array([],this.checkCondPresent())}clearEdgeInput(){this.edgeEditing=!1,this.edgePropId=0,this.edgeForm.reset(),this.edgeForm.controls.edge_weight.setValue(1)}clearClusterInput(){this.clusterEditing=!1,this.clusterForm.reset(),this.clusterForm.controls.cluster_nodes=this.formBuilder.array([])}clearPropsInput(){this.nodePropForm.reset()}selectedNodeInputChange(e){"clus"!=e.type&&(this.clearNodeInput(),this.clearCondInput(),this.nodeEditing=!0,"task"==e.type?(this.nodeForm.controls.node_id.setValue(e.id),this.nodeForm.controls.node_label.setValue(e.label),this.graph.clusters.forEach(r=>{var s;null===(s=r.childNodeIds)||void 0===s||s.forEach(g=>{g!=e.id||this.nodeForm.controls.node_cluster.setValue(r.id)})}),e.properties.forEach(r=>{const s=this.formBuilder.group({id:r.id,name:[r.name,[m.kI.required,this.checkNodeProperty()]],value:[r.value,m.kI.required]});this.nodeDataForm.push(s)})):"cond"==e.type&&(this.condForm.controls.cond_id.setValue(e.id),this.condForm.controls.cond_label.setValue(e.label),this.condForm.controls.cond_source.setValue(e.id.split("_")[1].split("-")[0]),this.condForm.controls.cond_target.setValue(e.id.split("_")[1].split("-")[1]),e.properties.forEach(r=>{const s=this.formBuilder.group({id:r.id,name:[r.name,[m.kI.required,this.checkNodeProperty()]],value:r.value});this.condDataForm.push(s)})),this.view="cond"==e.type?"node_cond":"node_task")}selectedEdgeInputChange(e){this.clearEdgeInput(),this.edgeEditing=!0,this.edgeForm.controls.edge_id.setValue(e.id),this.edgeForm.controls.edge_label.setValue(e.label),this.edgeForm.controls.edge_source.setValue(e.source),this.edgeForm.controls.edge_target.setValue(e.target),this.edgeForm.controls.edge_weight.setValue(e.weight),this.view="edge"}selectedClusterInputChange(e){this.clearClusterInput(),this.clusterEditing=!0,this.clusterForm.controls.cluster_id.setValue(e.id),this.clusterForm.controls.cluster_label.setValue(e.label),e.childNodeIds&&e.childNodeIds.forEach(r=>{const s=this.formBuilder.control(r);this.clusterNodes.push(s)}),this.view="cluster"}saveGraph(){this.graphEditingService.saveGraphInStorage(),this.router.navigate(["/app/graph/list"])}start_over(){this.graphEditingService.clearGraph(),this.clearNodeInput(),this.clearCondInput(),this.clearEdgeInput()}changedView(e){switch(this.view=e,this.view){case"node_task":this.clearNodeInput();break;case"node_cond":this.clearCondInput();break;case"edge":this.clearEdgeInput()}this.clearPropsInput()}reload_page(){location.reload()}centerGraph(){this.updateGraphView.emit(2)}fitGraph(){this.updateGraphView.emit(3)}addNodeDataField(){this.nodePropId+=1;const e=this.formBuilder.group({id:String(this.nodePropId),name:[null,[m.kI.required,this.checkNodeProperty()]],value:[null,m.kI.required]});this.nodeDataForm.push(e)}addCondDataField(){this.nodePropId+=1;const e=this.formBuilder.group({id:String(this.nodePropId),name:[null,[m.kI.required,this.checkNodeProperty()]],value:null});this.condDataForm.push(e),this.nodePropForm.reset()}editNodeDataField(e){}removeNodeDataField(e){this.nodeDataForm.removeAt(e)}removeCondDataField(e){this.condDataForm.removeAt(e)}checkNodeId(){return e=>e.value&&!this.nodeEditing&&this.graph.nodes.filter(r=>"task"==r.type).find(r=>r.id==e.value)?{already:!0,msg:"Already exists a node with this id"}:null}checkNodeProperty(){return e=>{if(e.value)if("node_task"==this.view){if(this.nodeForm.controls.node_data.value.find(r=>r.name==e.value)&&e.dirty)return{already:!0,msg:"Already existst a property with this name"}}else if("node_cond"==this.view){if(this.condForm.controls.cond_data.value.find(b=>b.name==e.value)&&e.dirty)return{already:!0,msg:"Already existst a property with this name"};let r=!1,s=this.graphEditingService.getNode(this.condForm.controls.cond_target.value),g=[];return s&&(g=this.graphEditingService.getConds(s)),g.forEach(b=>{b.name!=e.value||(r=!0)}),r?null:{noCondName:!0,msg:"This condition isn't present in any of the targeting task nodes"}}return null}}checkEdgeId(){return e=>{if(e.value){let r=e.value.edge_source,s=e.value.edge_target;if(r&&s){if(r==s)return{loop:!0,msg:"Source and target must be different"};if((this.graph.nodes.find(g=>g.id==s&&"cond"==g.type)||this.graph.clusters.find(g=>g.id==s))&&(this.graph.nodes.find(g=>g.id==r&&"cond"==g.type)||this.graph.clusters.find(g=>g.id==r)))return{cond2cond:!0,msg:"Can't add edge from condition to condition"};{let g="_"+r+"-"+s;if(this.graph.edges.find(b=>b.id==g&&!this.edgeEditing)&&!this.edgeEditing)return{already:!0,msg:"Already existst an edge between these nodes"}}}}return null}}checkEdgeNode(){return e=>!e.value||this.graph.nodes.find(r=>r.id==e.value)||this.graph.clusters.find(r=>r.id==e.value)?null:{notFound:!0}}checkCondNode(){return e=>(this.graph.nodes.find(r=>r.id==e.value&&"cond"==r.type)||this.graph.nodes.find(r=>r.id==e.value))&&this.graph.edges.find(r=>r.target==e.value)&&!this.edgeEditing?{already2cond:!0,msg:"Already exists an edge to that condition"}:null}checkEdgeWeight(){return e=>e.value<1?{weightError:!0,msg:"Edge weight must be at least 1"}:null}checkClusterId(){return e=>{if(e.value&&!this.clusterEditing){if(this.graph.clusters.find(r=>r.id==e.value))return{msg:"Already exists a cluster with this id"};if(this.graph.nodes.find(r=>r.id==e.value))return{msg:"Already exists a node with this id"}}return null}}checkClusterExists(){return e=>e.value&&!this.graph.clusters.find(r=>r.id==e.value)?{clusterNotFound:!0,msg:"Cluster not found"}:null}checkCondNodeTask(){return e=>e.value&&!this.graph.nodes.filter(r=>"task"==r.type).find(r=>r.id==e.value)?{notFound:!0}:null}checkCondForm(){return e=>{if(e.value){let r=e.value.cond_source,s=e.value.cond_target;if(r&&s&&(r=e.value.cond_source,s=e.value.cond_target,r==s))return{loop:!0,msg:"Source and target must be different"}}return null}}checkCondPresent(){return e=>e.value&&0==e.value.length?{noConds:!0,msg:"Must specify at least one condition"}:null}checkNodeConds(){return e=>null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(we),t.Y36(m.qu),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sidebar"]],inputs:{selectedNode:"selectedNode",selectedEdge:"selectedEdge",selectedCluster:"selectedCluster",forcedChange:"forcedChange"},outputs:{updateGraphView:"updateGraphView"},features:[t.TTD],decls:3,vars:2,consts:[["novalidate","","class","mx-3",3,"formGroup",4,"ngIf","ngIfElse"],["creation",""],["novalidate","",1,"mx-3",3,"formGroup"],[1,"py-4","text-white"],[1,"form-floating"],["type","text","id","graphNameInput","placeholder","Graph name","formControlName","graph_name",1,"my-2","form-control",3,"input"],["for","graphNameInput"],["class","text-danger text-start",4,"ngIf"],["id","graphDescriptionInput","placeholder","Graph description","formControlName","graph_desc",1,"h-25","my-2","form-control"],["for","graphDescriptionInput"],["type","button",1,"w-50","mt-5","btn","btn-lg","btn-primary",3,"ngClass","click"],[1,"text-danger","text-start"],[1,"row","mx-3",3,"ngStyle"],[1,"col-12"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-transparent","align-self-center",3,"click"],["src","../../../../../../assets/images/arrow-left-short-white.svg","alt","go back"],[1,"ms-1","my-3","text-white",2,"overflow-x","auto"],["title","Delete all nodes and edges",1,"btn","btn-sm","align-self-center","btn-danger","ms-auto",3,"click"],[1,"col-12","d-flex","align-items-center"],[1,"my-grey","mt-2"],["name","graph_elements",1,"form-select","my-bg-grey","ms-5",3,"value","change"],["selected","","value","node_task"],["value","node_cond"],["value","edge"],[1,"d-flex-column","my-grey","mt-4"],[4,"ngIf"],[1,"mt-auto"],[1,"btn","btn-success","w-100",3,"click"],[1,"d-flex","gap-2","my-3","justify-content-evenly"],[1,"btn","btn-sm","btn-secondary",3,"click"],["novalidate","",1,"d-flex-column",3,"formGroup"],["type","text","formControlName","node_id","placeholder","node id",1,"form-control","my-2",3,"ngClass","readonly"],["class","text-danger text-start my-0",4,"ngIf"],["type","text","formControlName","node_label","placeholder","node label",1,"form-control","my-2"],[1,"accordion","text-dark"],[1,"accordion-item"],[1,"accordion-header","px-3","btn","col-12","d-flex","align-items-center",3,"click"],[1,"ms-auto","bg-white",2,"border-width","0"],["src","../../../../../../assets/images/chevron-down.svg","alt","expand",4,"ngIf"],["src","../../../../../../assets/images/chevron-up.svg","alt","collapse",4,"ngIf"],[3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],["formArrayName","node_data"],["class","row pb-2 px-4 align-items-center",3,"formGroupName",4,"ngFor","ngForOf"],["class","row px-4 pb-2 text-center",4,"ngIf"],[1,"col-12","ps-3","pb-3","btn","d-flex","align-items-center",3,"click"],["src","../../../../../../assets/images/plus-dark.svg","alt","add data field"],[1,"m-0","ms-1",2,"color","#666"],[1,"d-flex"],["type","button",1,"mt-2","btn","btn-primary",3,"ngClass","innerText","click"],["class","ms-3 mt-2 btn btn-danger",3,"click",4,"ngIf"],[1,"ms-auto","mt-2","btn","btn-secondary",3,"click"],[1,"text-danger","text-start","my-0"],["src","../../../../../../assets/images/chevron-down.svg","alt","expand"],["src","../../../../../../assets/images/chevron-up.svg","alt","collapse"],[1,"row","pb-2","px-4","align-items-center",3,"formGroupName"],[1,"col-5","p-0","ps-2","pe-1",2,"overflow-x","auto"],["type","text","formControlName","name","placeholder","name",1,"form-control",3,"ngClass"],[1,"col-5","p-0","px-1","ps-2",2,"overflow-x","auto"],["type","text","formControlName","value","placeholder","value",1,"form-control",3,"ngClass"],["class","col-2 p-1 pt-1 btn btn-danger",3,"click",4,"ngIf"],[1,"col-2","p-1","pt-1","btn","btn-danger",3,"click"],["src","../../../../../../assets/images/x-white.svg","alt","delete node property","width","24"],[1,"row","px-4","pb-2","text-center"],[1,"m-0",2,"color","#666"],[1,"ms-3","mt-2","btn","btn-danger",3,"click"],["formControlName","cond_source",1,"form-select","my-bg-grey","my-2",3,"ngClass"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger text-start mt-1",4,"ngIf"],["formControlName","cond_target",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["type","text","formControlName","cond_label","placeholder","cond node label",1,"form-control","my-2"],["formArrayName","cond_data"],[3,"value"],[1,"text-danger","text-start","mt-1"],["formControlName","edge_source",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["formControlName","edge_target",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["type","text","formControlName","edge_label","placeholder","edge label",1,"form-control","my-2"],[1,"row","my-2","align-items-center"],[1,"m-0","my-grey","col-8"],[1,"col-4"],["type","number","formControlName","edge_weight","placeholder","edge weight",1,"form-control"]],template:function(e,r){if(1&e&&(t.YNc(0,zu,15,6,"form",0),t.YNc(1,Pl,32,8,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",!r.isCreated)("ngIfElse",s)}},directives:[c.O5,m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,c.mk,c.PC,m.YN,m.Kr,h._D,m.CE,c.sg,m.x0,m.EJ,m.wV],styles:[""]}),n})();function Dl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",13),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?40:30+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",40+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function Gl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Dl,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function Ul(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Gl,2,1,"g",7),t._UZ(2,"rect",8),t._UZ(3,"rect",9),t.TgZ(4,"text",10),t._uU(5),t.qZA(),t.TgZ(6,"text",11),t._uU(7),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.showNodeDetails==e.id),t.xp6(4),t.Oqu(e.id),t.xp6(2),t.hij("props: ",r.Object.entries(e.properties).length,"")}}function Bl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",17),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?60:50+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",60+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function Jl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Bl,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function Vl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",15),t.TgZ(2,"text",16),t._uU(3,"AND"),t.qZA(),t.YNc(4,Jl,2,1,"g",7),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.uIk("width",1e3),t.xp6(3),t.Q6J("ngIf",r.showNodeDetails==e.id)}}function Yl(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",18),t.TgZ(2,"text",19),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",1e3),t.xp6(2),t.hij(" ","cin"==e.id.split("_")[0]?"IN":"OUT"," ")}}function Rl(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",6),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().nodeClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreNodeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreNodeDetails(0)}),t.YNc(1,Ul,8,3,"g",7),t.YNc(2,Vl,5,2,"g",7),t.YNc(3,Yl,4,2,"g",7),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf","task"==e.type),t.xp6(1),t.Q6J("ngIf","cond"==e.type),t.xp6(1),t.Q6J("ngIf","clus"==e.type)}}function $l(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"text",24),t.TgZ(1,"textPath",25),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Udp("dominant-baseline",e.dominantBaseline),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.weight," ")}}const Hl=function(n,i){return{"edge-success":n,"edge-insuccess":i}};function Ql(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",20),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().linkClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreEdgeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreEdgeDetails(0)}),t._UZ(1,"circle",21),t._UZ(2,"path",22),t.YNc(3,$l,3,4,"text",23),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(2,Hl,2==r.checkConditions(e),1==r.checkConditions(e))),t.xp6(1),t.Q6J("ngIf",r.showEdgeDetails==e.id)}}function zl(n,i){1&n&&(t.O4$(),t.TgZ(0,"marker",26),t._UZ(1,"path",27),t.qZA())}function jl(n,i){1&n&&(t.O4$(),t._UZ(0,"g"))}function Xl(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",28),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().clusterClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreClusterDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreClusterDetails(0)}),t._UZ(1,"rect",29),t.TgZ(2,"text",30),t._uU(3,"OR"),t.qZA(),t.YNc(4,jl,1,0,"g",7),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height),t.xp6(3),t.Q6J("ngIf",r.showClusterDetails==e.id)}}const Wl=function(n){return{height:n}};let Kl=(()=>{class n{constructor(e){this.graphEditingService=e,this.nodes=[],this.edges=[],this.clusters=[],this.update=0,this.update$=new Ht.xQ,this.center$=new Ht.xQ,this.zoomToFit$=new Ht.xQ,this.selectedNode=new t.vpe,this.selectedEdge=new t.vpe,this.selectedCluster=new t.vpe,this.Object=Object,this.showNodeDetails=0,this.showEdgeDetails=0,this.showClusterDetails=0,this.layout=new tn,this.graphEditingService.graph$.subscribe(r=>{r&&this.updateGraph()})}ngOnInit(){}ngOnChanges(e){switch(this.update){case 1:break;case 2:this.center$.next(!0);break;case 3:this.zoomToFit$.next(!0)}}getContentHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}updateGraph(){this.nodes=this.graphEditingService.graph.nodes,this.edges=this.graphEditingService.graph.edges,this.clusters=this.graphEditingService.graph.clusters,this.update$.next(!0)}onNodeSelect(e){}linkClick(e){this.selectedEdge.emit(e)}nodeClick(e){this.selectedNode.emit(e)}clusterClick(e){this.selectedCluster.emit(e)}moreNodeDetails(e){this.showNodeDetails=e}moreEdgeDetails(e){this.showEdgeDetails=e}moreClusterDetails(e){this.showClusterDetails=e}checkClusterConditions(e,r){let s=[];e.childNodeIds&&(s=e.childNodeIds.filter(b=>"c"==b.split("_")[0]).map(b=>this.graphEditingService.getNode(b)));let g=!1;return s.forEach(b=>{this.checkAllProps(b,r)&&(g=!0)}),g}checkConditions(e){const r=this.nodes.find(g=>g.id==e.source),s=this.nodes.find(g=>g.id==e.target);if(s&&"task"==s.type&&r&&"clus"==r.type){let g=this.clusters.find(b=>b.id=="clus_"+r.id.split("_")[1]);return g&&this.checkClusterConditions(g,s)?2:1}if(s&&"clus"==s.type&&r&&"cond"==r.type){let g=this.nodes.find(b=>b.id==r.id.split("_")[1].split("-")[1]);return g&&this.checkAllProps(r,g)?2:1}return 0}checkAllProps(e,r){const s=Object.entries(e.properties).map(w=>w[1]),g=Object.entries(r.properties).map(w=>w[1]);let b=!0;return s.forEach(w=>{if(""==w.value||null==w.value){if(!g.find(S=>S.name==w.name))return void(b=!1)}else if(!g.find(F=>F.name==w.name&&F.value==w.value))return void(b=!1)}),b}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(we))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-creation-view"]],inputs:{update:"update"},outputs:{selectedNode:"selectedNode",selectedEdge:"selectedEdge",selectedCluster:"selectedCluster"},features:[t.TTD],decls:10,vars:10,consts:[[3,"ngStyle"],[1,"chart-container",3,"update$","center$","zoomToFit$","nodes","links","clusters","layout"],["nodeTemplate",""],["linkTemplate",""],["defsTemplate",""],["clusterTemplate",""],["xmlns","http://www.w3.org/2000/svg",3,"click","mouseenter","mouseleave"],[4,"ngIf"],["x","0","y","10","width","100","height","50","rx","10","fill","#a22"],["x","0","y","0","width","100","height","30","rx","10","fill","#811"],["x","20","y","20","font-size","16","fill","#fff"],["x","10","y","50","font-size","16","fill","#fff"],[4,"ngFor","ngForOf"],["x","0","width","100","rx","10","fill","#a22"],["x","10","font-size","16","fill","#fff"],["cx","30","cy","25","r","25","fill","#118"],["x","16","y","30","font-size","14","fill","#fff"],["x","0","width","100","rx","10","fill","#118"],["cx","22","cy","17","r","17","fill","#ccc"],["x","11","y","23","font-size","14","fill","#000"],[1,"edge",3,"click","mouseenter","mouseleave"],["width","15","height","15","fill","#000"],["stroke-width","5","marker-end","url(#arrow)",1,"line",3,"ngClass"],["class","edge-label","text-anchor","middle",4,"ngIf"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path",2,"font-size","20px"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node","cluster",3,"click","mouseenter","mouseleave"],["x","10","y","10","rx","5","ry","5","stroke","#000","stroke-width","5","fill","#0005"],["x","20","y","30","font-size","16","fill","#000"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"ngx-graph",1),t.YNc(2,Rl,4,3,"ng-template",null,2,t.W1O),t.YNc(4,Ql,4,5,"ng-template",null,3,t.W1O),t.YNc(6,zl,2,0,"ng-template",null,4,t.W1O),t.YNc(8,Xl,5,3,"ng-template",null,5,t.W1O),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(8,Wl,r.getContentHeight())),t.xp6(1),t.Q6J("update$",r.update$)("center$",r.center$)("zoomToFit$",r.zoomToFit$)("nodes",r.nodes)("links",r.edges)("clusters",r.clusters)("layout",r.layout))},directives:[c.PC,In,c.O5,c.sg,c.mk],styles:[".edge-success[_ngcontent-%COMP%]{stroke:#393}.edge-insuccess[_ngcontent-%COMP%]{stroke:#a33}.cluster-success[_ngcontent-%COMP%]{stroke:#0f0}.cluster-insuccess[_ngcontent-%COMP%]{stroke:red}"]}),n})(),ql=(()=>{class n{constructor(){this.graph_switch=0,this.sidebar_switch=0}ngOnInit(){}switcher(e){this.graph_switch=e,setTimeout(()=>{this.graph_switch=0},100)}nodeIsSelected(e){this.selectedNode=e,this.sidebar_switch=1,setTimeout(()=>{this.sidebar_switch=0},100)}edgeIsSelected(e){this.selectedEdge=e,this.sidebar_switch=2,setTimeout(()=>{this.sidebar_switch=0},100)}clusterIsSelected(e){this.selectedCluster=e,this.sidebar_switch=3,setTimeout(()=>{this.sidebar_switch=0},100)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create"]],decls:5,vars:5,consts:[[1,"row","m-0"],[1,"col-4","bg-dark"],[3,"selectedNode","selectedEdge","selectedCluster","forcedChange","updateGraphView"],[1,"col-8",2,"padding","0"],[3,"update","selectedNode","selectedEdge","selectedCluster"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-sidebar",2),t.NdJ("updateGraphView",function(g){return r.switcher(g)}),t.qZA(),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"app-creation-view",4),t.NdJ("selectedNode",function(g){return r.nodeIsSelected(g)})("selectedEdge",function(g){return r.edgeIsSelected(g)})("selectedCluster",function(g){return r.clusterIsSelected(g)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("selectedNode",r.selectedNode)("selectedEdge",r.selectedEdge)("selectedCluster",r.selectedCluster)("forcedChange",r.sidebar_switch),t.xp6(2),t.Q6J("update",r.graph_switch))},directives:[Ll,Kl],styles:[""]}),n})(),tc=(()=>{class n{constructor(){this.Graphs=[{id:1,name:"grafo1",description:"desc grafo 1"},{id:2,name:"grafo2",description:""},{id:3,name:"grafo3",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ex maiores saepe dolor minima iste similique iusto facilis corrupti possimus amet, fugiat cum officia accusamus dolorum architecto fugit, quod accusantium tempore!"},{id:4,name:"gdfsa",description:"fd"}],this.graph$=new ei.X(this.Graphs)}getGraphs(){return(0,En.of)(this.Graphs)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ec(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().confirm_delete(s.id)}),t._uU(1,"Delete"),t.qZA()}}function nc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().deleteGraph(s.graph.name)})("mouseleave",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().confirm_delete(s.id)}),t._uU(1,"Sure?"),t.qZA()}}function rc(n,i){if(1&n&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"div",11),t.TgZ(3,"h4"),t._uU(4),t.qZA(),t.TgZ(5,"p",12),t._uU(6),t.qZA(),t.TgZ(7,"p",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",14),t.TgZ(10,"button",15),t._uU(11,"View"),t.qZA(),t.TgZ(12,"button",15),t._uU(13,"Edit"),t.qZA(),t.YNc(14,ec,2,0,"button",16),t.YNc(15,nc,2,0,"ng-template",null,17,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=t.MAs(16),s=t.oxw();t.xp6(4),t.Oqu(e.graph.name),t.xp6(2),t.Oqu(e.graph.description),t.xp6(2),t.Oqu(e.graph.date),t.xp6(2),t.Q6J("routerLink","/app/graph/view/"+e.id),t.xp6(2),t.Q6J("routerLink","/app/graph/edit/"+e.id),t.xp6(2),t.Q6J("ngIf",!s.graph_deletions[e.id])("ngIfElse",r)}}let ic=(()=>{class n{constructor(e,r){this.Graphs=e,this.router=r,this.graph_deletions=[],this.graphs=[];for(let s=0;s<localStorage.length;s++)this.graphs.push({id:s+1,graph:JSON.parse(localStorage.getItem(localStorage.key(s)||"")||"")}),this.graph_deletions[s+1]=!1;this.graphs=this.graphs.sort((s,g)=>s.graph.date>g.graph.date?1:-1)}ngOnInit(){}getGraphs(){return this.graphs}editGraph(e){this.router.navigate(["/app/graph/edit/"+e])}deleteGraph(e){localStorage.removeItem(e),location.reload()}confirm_delete(e){this.graph_deletions[e]=!this.graph_deletions[e]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tc),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:11,vars:2,consts:[[1,"container"],[1,"row","mb-5","pt-3"],[1,"col-md-8"],[1,"my-3"],[1,"col-md-4","d-grid"],[1,"col-4","d-grid","my-3","ms-auto","me-2"],[1,"btn","btn-success",3,"routerLink"],[1,"row","mt-3"],["class","col-md-12",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"row","my-3","bg-white"],[1,"col-sm-8","py-4","ps-5"],[1,"m-0"],[1,"mt-3",2,"color","#999"],[1,"col-sm-4","d-flex","flex-sm-column","flex-lg-row","align-items-center","justify-content-center","gap-3","p-3"],["type","button",1,"btn","btn-dark","whiten",3,"routerLink"],["type","button","class","btn btn-danger whiten-red",3,"click",4,"ngIf","ngIfElse"],["delete_sure",""],["type","button",1,"btn","btn-danger","whiten-red",3,"click"],["type","button",1,"btn","btn-danger","whiten-red",3,"click","mouseleave"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h1",3),t._uU(4,"Graphs List"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"button",6),t._uU(8,"+ New"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",7),t.YNc(10,rc,17,7,"div",8),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("routerLink","/app/graph/create"),t.xp6(3),t.Q6J("ngForOf",r.getGraphs()))},directives:[u.rH,c.sg,c.O5],styles:[""]}),n})();function oc(n,i){1&n&&(t.TgZ(0,"p",23),t._uU(1,"Graph name already taken"),t.qZA())}const Bt=function(n){return{"is-invalid":n}},sc=function(n){return{disabled:n}};function ac(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",18),t.TgZ(2,"input",19),t.NdJ("input",function(){return t.CHM(e),t.oxw().checkGraphName()}),t.qZA(),t.YNc(3,oc,2,0,"p",20),t._UZ(4,"textarea",21),t.TgZ(5,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().editGraph()}),t._uU(6,"Save"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editGraphForm),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Bt,!e.editGraphForm.controls.graph_name.valid)),t.xp6(1),t.Q6J("ngIf",e.graphNameAlready),t.xp6(2),t.Q6J("ngClass",t.VKq(6,sc,!e.editGraphForm.controls.graph_name.valid))}}function uc(n,i){if(1&n&&(t.TgZ(0,"p",23),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",null==e.nodeForm.controls.node_id.errors?null:e.nodeForm.controls.node_id.errors.msg,"")}}function lc(n,i){1&n&&t._UZ(0,"img",44)}function cc(n,i){1&n&&t._UZ(0,"img",45)}function dc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).removeNodeDataField(s)}),t._UZ(1,"img",53),t.qZA()}}function hc(n,i){if(1&n&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&n){const e=t.oxw().index,r=t.oxw(2);let s;t.xp6(1),t.Oqu(null==(s=r.nodeForm.get("node_data."+e+".name"))||null==s.errors?null:s.errors.msg)}}function fc(n,i){if(1&n&&(t.TgZ(0,"div",46),t.TgZ(1,"div",47),t._UZ(2,"input",48),t.qZA(),t.TgZ(3,"div",49),t._UZ(4,"input",50),t.qZA(),t.YNc(5,dc,2,0,"div",51),t.YNc(6,hc,2,1,"small",20),t.qZA()),2&n){const e=i.$implicit,r=i.index,s=t.oxw(2);let g,b,w;t.Q6J("formGroupName",r),t.xp6(2),t.Q6J("ngClass",t.VKq(5,Bt,!(null!=(g=s.nodeForm.get("node_data."+r+".name"))&&g.valid))),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Bt,!(null!=(b=s.nodeForm.get("node_data."+r+".value"))&&b.valid))),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!(null!=(w=s.nodeForm.get("node_data."+r+".name"))&&w.valid))}}function pc(n,i){1&n&&(t.TgZ(0,"div",54),t.TgZ(1,"p",55),t._uU(2,"no properties"),t.qZA(),t.qZA())}function gc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).deleteNode()}),t._uU(1,"Delete"),t.qZA()}}const On=function(n,i){return{disabled:n,"btn-warning":i}};function mc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",18),t._UZ(2,"input",24),t.YNc(3,uc,2,1,"p",20),t._UZ(4,"input",25),t.TgZ(5,"div",26),t.TgZ(6,"div",27),t.TgZ(7,"div",28),t.NdJ("click",function(){return t.CHM(e),t.MAs(13).toggle()}),t._uU(8," Data "),t.TgZ(9,"button",29),t.YNc(10,lc,1,0,"img",30),t.YNc(11,cc,1,0,"img",31),t.qZA(),t.qZA(),t.TgZ(12,"div",32,33),t.NdJ("ngbCollapseChange",function(s){return t.CHM(e),t.oxw().isCollapsed=s}),t.TgZ(14,"div",34),t.YNc(15,fc,7,9,"div",35),t.qZA(),t.YNc(16,pc,3,0,"div",36),t.TgZ(17,"div",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addNodeDataField()}),t._UZ(18,"img",38),t.TgZ(19,"p",39),t._uU(20,"Add data field"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",40),t.TgZ(22,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().tryNode()}),t._uU(23,"Add"),t.qZA(),t.YNc(24,gc,2,0,"button",42),t.TgZ(25,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearNodeInput()}),t._uU(26,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();let r;t.xp6(1),t.Q6J("formGroup",e.nodeForm),t.xp6(1),t.Q6J("ngClass",t.VKq(13,Bt,!e.nodeForm.controls.node_id.valid))("readonly",e.nodeEditing),t.xp6(1),t.Q6J("ngIf",null==e.nodeForm.controls.node_id.errors?null:e.nodeForm.controls.node_id.errors.already),t.xp6(4),t.uIk("aria-expanded",!e.isCollapsed),t.xp6(3),t.Q6J("ngIf",e.isCollapsed),t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngbCollapse",e.isCollapsed),t.xp6(3),t.Q6J("ngForOf",e.nodeDataForm.controls),t.xp6(1),t.Q6J("ngIf",0==e.nodeForm.controls.node_data.value.length),t.xp6(6),t.Q6J("ngClass",t.WLB(15,On,!e.nodeForm.valid||!(null!=(r=e.nodeForm.get("node_data"))&&r.valid),e.nodeEditing))("innerText",e.nodeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.nodeEditing)}}function vc(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function _c(n,i){if(1&n&&(t.TgZ(0,"option",65),t.YNc(1,vc,2,1,"p",13),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function xc(n,i){1&n&&(t.TgZ(0,"p",66),t._uU(1,"source node doesn't exist"),t.qZA())}function yc(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function bc(n,i){if(1&n&&(t.TgZ(0,"option",65),t.YNc(1,yc,2,1,"p",13),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function wc(n,i){1&n&&(t.TgZ(0,"p",66),t._uU(1,"target node doesn't exist"),t.qZA())}function Cc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.condForm.errors?null:e.condForm.errors.msg)}}function Ec(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.condForm.errors?null:e.condForm.errors.msg)}}function Tc(n,i){1&n&&t._UZ(0,"img",44)}function Nc(n,i){1&n&&t._UZ(0,"img",45)}function Ac(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(2).removeCondDataField(s)}),t._UZ(1,"img",53),t.qZA()}}function Sc(n,i){if(1&n&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&n){const e=t.oxw().index,r=t.oxw(2);let s;t.xp6(1),t.Oqu(null==(s=r.condForm.get("cond_data."+e+".name"))||null==s.errors?null:s.errors.msg)}}function Ic(n,i){if(1&n&&(t.TgZ(0,"div",46),t.TgZ(1,"div",47),t._UZ(2,"input",48),t.qZA(),t.TgZ(3,"div",49),t._UZ(4,"input",50),t.qZA(),t.YNc(5,Ac,2,0,"div",51),t.YNc(6,Sc,2,1,"small",20),t.qZA()),2&n){const e=i.$implicit,r=i.index,s=t.oxw(2);let g,b,w;t.Q6J("formGroupName",r),t.xp6(2),t.Q6J("ngClass",t.VKq(5,Bt,!(null!=(g=s.condForm.get("cond_data."+r+".name"))&&g.valid))),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Bt,!(null!=(b=s.condForm.get("cond_data."+r+".value"))&&b.valid))),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!(null!=(w=s.condForm.get("cond_data."+r+".name"))&&w.valid))}}function kc(n,i){1&n&&(t.TgZ(0,"div",54),t.TgZ(1,"p",55),t._uU(2,"no properties"),t.qZA(),t.qZA())}function Oc(n,i){if(1&n&&(t.TgZ(0,"small",67),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.condForm.controls.cond_data.errors?null:e.condForm.controls.cond_data.errors.msg)}}function Zc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).deleteCond()}),t._uU(1,"Delete"),t.qZA()}}function Fc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",18),t.TgZ(2,"select",57),t.TgZ(3,"option",58),t._uU(4,"No input node"),t.qZA(),t.YNc(5,_c,2,2,"option",59),t.qZA(),t.YNc(6,xc,2,0,"p",60),t.TgZ(7,"select",61),t.YNc(8,bc,2,2,"option",59),t.qZA(),t.YNc(9,wc,2,0,"p",60),t.YNc(10,Cc,2,1,"p",60),t.YNc(11,Ec,2,1,"p",60),t._UZ(12,"input",62),t.TgZ(13,"div",26),t.TgZ(14,"div",27),t.TgZ(15,"div",28),t.NdJ("click",function(){return t.CHM(e),t.MAs(21).toggle()}),t._uU(16," Data "),t.TgZ(17,"button",29),t.YNc(18,Tc,1,0,"img",30),t.YNc(19,Nc,1,0,"img",31),t.qZA(),t.qZA(),t.TgZ(20,"div",32,33),t.NdJ("ngbCollapseChange",function(s){return t.CHM(e),t.oxw().isCollapsed=s}),t.TgZ(22,"div",63),t.YNc(23,Ic,7,9,"div",35),t.qZA(),t.YNc(24,kc,3,0,"div",36),t.TgZ(25,"div",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addCondDataField()}),t._UZ(26,"img",38),t.TgZ(27,"p",39),t._uU(28,"Add data field"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(29,Oc,2,1,"small",64),t.TgZ(30,"div",40),t.TgZ(31,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().tryCond()}),t._uU(32,"Add"),t.qZA(),t.YNc(33,Zc,2,0,"button",42),t.TgZ(34,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearCondInput()}),t._uU(35,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.condForm),t.xp6(1),t.Q6J("ngClass",t.VKq(22,Bt,!e.condForm.controls.cond_source.valid)),t.uIk("disabled",!!e.nodeEditing||null),t.xp6(1),t.Q6J("ngValue",null),t.xp6(2),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.condForm.controls.cond_source.errors?null:e.condForm.controls.cond_source.errors.notFound),t.xp6(1),t.Q6J("ngClass",t.VKq(24,Bt,!e.condForm.controls.cond_target.valid)),t.uIk("disabled",!!e.nodeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.condForm.controls.cond_target.errors?null:e.condForm.controls.cond_target.errors.notFound),t.xp6(1),t.Q6J("ngIf",null==e.condForm.errors?null:e.condForm.errors.loop),t.xp6(1),t.Q6J("ngIf",null==e.condForm.errors?null:e.condForm.errors.edgeNotFound),t.xp6(4),t.uIk("aria-expanded",!e.isCollapsed),t.xp6(3),t.Q6J("ngIf",e.isCollapsed),t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngbCollapse",e.isCollapsed),t.xp6(3),t.Q6J("ngForOf",e.condDataForm.controls),t.xp6(1),t.Q6J("ngIf",0==e.condForm.controls.cond_data.value.length),t.xp6(5),t.Q6J("ngIf",!e.condForm.controls.cond_data.valid),t.xp6(2),t.Q6J("ngClass",t.WLB(26,On,!e.condForm.controls.cond_data.valid||!e.condForm.controls.cond_target.valid,e.nodeEditing))("innerText",e.nodeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.nodeEditing)}}function Mc(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function Pc(n,i){if(1&n&&(t.TgZ(0,"option",65),t.YNc(1,Mc,2,1,"p",13),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function Lc(n,i){1&n&&(t.TgZ(0,"p",66),t._uU(1,"source node doesn't exist"),t.qZA())}function Dc(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.id)}}function Gc(n,i){if(1&n&&(t.TgZ(0,"option",65),t.YNc(1,Dc,2,1,"p",13),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf","task"==e.type)}}function Uc(n,i){1&n&&(t.TgZ(0,"p",66),t._uU(1,"target node doesn't exist"),t.qZA())}function Bc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.msg)}}function Jc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Vc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Yc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function Rc(n,i){if(1&n&&(t.TgZ(0,"p",66),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.edgeForm.errors?null:e.edgeForm.errors.msg)}}function $c(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).deleteEdge()}),t._uU(1,"Delete"),t.qZA()}}function Hc(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",18),t.TgZ(2,"select",68),t.YNc(3,Pc,2,2,"option",59),t.qZA(),t.YNc(4,Lc,2,0,"p",60),t.TgZ(5,"select",69),t.YNc(6,Gc,2,2,"option",59),t.qZA(),t.YNc(7,Uc,2,0,"p",60),t.YNc(8,Bc,2,1,"p",60),t.YNc(9,Jc,2,1,"p",60),t.YNc(10,Vc,2,1,"p",60),t.YNc(11,Yc,2,1,"p",60),t._UZ(12,"input",70),t.TgZ(13,"div",71),t.TgZ(14,"p",72),t._uU(15,"Edge weight:"),t.qZA(),t.TgZ(16,"div",73),t._UZ(17,"input",74),t.qZA(),t.YNc(18,Rc,2,1,"p",60),t.qZA(),t.TgZ(19,"div",40),t.TgZ(20,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().tryEdge()}),t._uU(21,"Add"),t.qZA(),t.YNc(22,$c,2,0,"button",42),t.TgZ(23,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearEdgeInput()}),t._uU(24,"Clear"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.edgeForm),t.xp6(1),t.Q6J("ngClass",t.VKq(17,Bt,!e.edgeForm.controls.edge_source.valid)),t.uIk("disabled",!!e.edgeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.controls.edge_source.errors?null:e.edgeForm.controls.edge_source.errors.notFound),t.xp6(1),t.Q6J("ngClass",t.VKq(19,Bt,!e.edgeForm.controls.edge_target.valid)),t.uIk("disabled",!!e.edgeEditing||null),t.xp6(1),t.Q6J("ngForOf",e.graphEditingService.getTaskNodes()),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.notFound),t.xp6(1),t.Q6J("ngIf",(null==e.edgeForm.controls.edge_target.errors?null:e.edgeForm.controls.edge_target.errors.already2cond)&&!(null!=e.edgeForm.errors&&e.edgeForm.errors.cond2cond)),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.already),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.loop),t.xp6(1),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.cond2cond),t.xp6(7),t.Q6J("ngIf",null==e.edgeForm.errors?null:e.edgeForm.errors.weightError),t.xp6(2),t.Q6J("ngClass",t.WLB(21,On,!e.edgeForm.valid,e.edgeEditing))("innerText",e.edgeEditing?"Edit":"Add"),t.xp6(2),t.Q6J("ngIf",e.edgeEditing)}}const Qc=function(n){return{height:n}};let zc=(()=>{class n{constructor(e,r,s){this.graphEditingService=e,this.formBuilder=r,this.router=s,this.updateGraphView=new t.vpe,this.graphNameAlready=!1,this.nodeEditing=!1,this.edgeEditing=!1,this.clusterEditing=!1,this.view="node_task",this.isCollapsed=!0,this.nodePropId=0,this.edgePropId=0,this.editGraphForm=this.formBuilder.group({graph_name:["",m.kI.required],graph_desc:["",m.kI.required]}),this.nodeForm=this.formBuilder.group({node_id:[null,[m.kI.required,this.checkNodeId()]],node_label:null,node_type:null,node_data:this.formBuilder.array([])}),this.nodePropForm=this.formBuilder.group({node_prop_name:[null,[m.kI.required,this.checkNodeProperty()]],node_prop_value:null}),this.condForm=this.formBuilder.group({cond_id:null,cond_source:null,cond_target:[null,[m.kI.required,this.checkCondNodeTask()]],cond_label:null,cond_cluster:null,cond_data:this.formBuilder.array([],this.checkCondPresent())},{validators:this.checkCondForm()}),this.edgeForm=this.formBuilder.group({edge_id:null,edge_label:null,edge_source:[null,[m.kI.required,this.checkEdgeNode()]],edge_target:[null,[m.kI.required,this.checkEdgeNode()]],edge_weight:[1,this.checkEdgeWeight()]},{validators:this.checkEdgeId()}),this.clusterForm=this.formBuilder.group({cluster_id:[null,[m.kI.required,this.checkClusterId()]],cluster_label:null,cluster_nodes:this.formBuilder.array([])})}ngOnInit(){var e,r;null===(e=this.editGraphForm.get("graph_name"))||void 0===e||e.setValue(this.graph.name),null===(r=this.editGraphForm.get("graph_desc"))||void 0===r||r.setValue(this.graph.description)}ngOnChanges(e){1==this.forcedChange&&this.selectedNodeInputChange(this.selectedNode),2==this.forcedChange&&this.selectedEdgeInputChange(this.selectedEdge)}getSidebarHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}get graph(){return this.graphEditingService.graph}get nodeDataForm(){return this.nodeForm.get("node_data")}get condDataForm(){return this.condForm.get("cond_data")}get clusterNodes(){return this.clusterForm.get("cluster_nodes")}editGraph(){let e=this.editGraphForm.controls.graph_name.value,r=this.graph.name;this.editGraphForm.controls.graph_name.valid&&(r!=e&&!localStorage.getItem(e)&&(this.graphNameAlready=!1,localStorage.removeItem(r),this.graph.name=this.editGraphForm.controls.graph_name.value),this.graph.description=this.editGraphForm.controls.graph_desc.value)}checkGraphName(){let e=this.editGraphForm.controls.graph_name.value;this.graphNameAlready=!(e==this.graph.name||""==e||!localStorage.getItem(e))}tryNode(){let e=this.nodeForm.controls.node_id.value,r=this.nodeForm.controls.node_label.value||"";this.nodeForm.controls.node_type.setValue("node_cond"==this.view?"cond":"task");let b={id:e,label:r,type:this.nodeForm.controls.node_type.value,properties:this.nodeForm.controls.node_data.value};this.nodeEditing?this.graphEditingService.editNode(b):this.graphEditingService.addNode(b),this.clearNodeInput()}tryCond(){var e,r,s,g,b;let w=this.condForm.controls.cond_source.value||"",S=this.condForm.controls.cond_target.value,F=this.condForm.controls.cond_label.value||"",U=this.condForm.controls.cond_data.value;this.condForm.controls.cond_cluster.setValue("clus_"+w+"-"+S);let $=this.condForm.controls.cond_cluster.value;if(!this.graph.clusters.find(ot=>ot.id==$)){let ot={id:"clus_"+w+"-"+S,label:"",childNodeIds:[]};if(this.graphEditingService.addCluster(ot),""!=w){let _t={id:"cin_"+w+"-"+S,label:"",type:"clus",properties:{}};this.graphEditingService.addNode(_t),this.graphEditingService.addEdge({id:"_"+w+"-"+_t.id,source:w,target:_t.id,label:"",weight:1}),this.graphEditingService.addToCluster(ot.id,_t),this.graphEditingService.deleteEdge("_"+w+"-"+S)}let dt={id:"cout_"+w+"-"+S,label:"",type:"clus",properties:{}};this.graphEditingService.addNode(dt),this.graphEditingService.addEdge({id:"_"+dt.id+"-"+S,source:dt.id,target:S,label:"",weight:1}),this.graphEditingService.addToCluster(ot.id,dt)}if(!this.nodeEditing){let ot=Number((null===(e=this.graph.nodes.filter(dt=>"c"==dt.id.split("_")[0]&&dt.id.split("_")[1]==w+"-"+S).pop())||void 0===e?void 0:e.id.split("_")[2])||"0");ot+=1,this.condForm.controls.cond_id.setValue("c_"+w+"-"+S+"_"+String(ot))}let j=this.condForm.controls.cond_id.value;if(""!=w){let ot=(null===(s=null===(r=this.graphEditingService.getCluster($))||void 0===r?void 0:r.childNodeIds)||void 0===s?void 0:s.find(ct=>"cin"==ct.split("_")[0]))||"";this.graphEditingService.addEdge({id:"_"+ot+"-"+j,label:"",weight:1,source:ot,target:j})}let nt=(null===(b=null===(g=this.graphEditingService.getCluster($))||void 0===g?void 0:g.childNodeIds)||void 0===b?void 0:b.find(ot=>"cout"==ot.split("_")[0]))||"";this.graphEditingService.addEdge({id:"_"+j+"-"+nt,label:"",weight:1,source:j,target:nt});let at={id:j,label:F,type:"cond",properties:U};this.nodeEditing?this.graphEditingService.editNode(at):(this.graphEditingService.addNode(at),this.graphEditingService.addToCluster($,at)),this.clearCondInput()}tryEdge(){let e=this.edgeForm.controls.edge_label.value||"",r=this.edgeForm.controls.edge_source.value,s=this.edgeForm.controls.edge_target.value;this.edgeForm.controls.edge_id.setValue("_"+r+"-"+s);let w={id:this.edgeForm.controls.edge_id.value,source:r,target:s,label:e,weight:this.edgeForm.controls.edge_weight.value||1};this.edgeEditing?this.graphEditingService.editEdge(w):this.graphEditingService.addEdge(w),this.clearEdgeInput()}tryCluster(){let g={id:this.clusterForm.controls.cluster_id.value,label:this.clusterForm.controls.cluster_label.value||"",childNodeIds:this.clusterForm.controls.cluster_nodes.value||[]};this.clusterEditing?this.graphEditingService.editCluster(g):this.graphEditingService.addCluster(g),this.clearClusterInput()}deleteNode(){this.graphEditingService.deleteNode(this.nodeForm.controls.node_id.value),this.clearNodeInput()}deleteEdge(){this.graphEditingService.deleteEdge(this.edgeForm.controls.edge_id.value),this.clearEdgeInput()}deleteCond(){var e,r;let s=this.condForm.controls.cond_id.value;this.graphEditingService.deleteNode(s);let g=s.split("_")[1],b="clus_"+g;(null===(r=null===(e=this.graph.clusters.find(w=>w.id==b))||void 0===e?void 0:e.childNodeIds)||void 0===r?void 0:r.find(w=>"c"==w.split("_")[0]))||(this.graphEditingService.deleteCluster(b),this.graphEditingService.deleteNode("cin_"+g),this.graphEditingService.deleteNode("cout_"+g),g.split("-")[0]&&this.graphEditingService.addEdge({id:"_"+g,label:"",source:g.split("-")[0],target:g.split("-")[1],weight:1})),this.clearCondInput()}deleteCluster(){this.graphEditingService.deleteCluster(this.clusterForm.controls.cluster_id.value),this.clearClusterInput()}clearNodeInput(){this.nodeEditing=!1,this.nodePropId=0,this.nodeForm.reset(),this.nodeForm.controls.node_data=this.formBuilder.array([])}clearCondInput(){this.nodeEditing=!1,this.nodePropId=0,this.condForm.reset(),this.condForm.controls.cond_data=this.formBuilder.array([],this.checkCondPresent())}clearEdgeInput(){this.edgeEditing=!1,this.edgePropId=0,this.edgeForm.reset(),this.edgeForm.controls.edge_weight.setValue(1)}clearClusterInput(){this.clusterEditing=!1,this.clusterForm.reset(),this.clusterForm.controls.cluster_nodes=this.formBuilder.array([])}clearPropsInput(){this.nodePropForm.reset()}selectedNodeInputChange(e){"clus"!=e.type&&(this.clearNodeInput(),this.clearCondInput(),this.nodeEditing=!0,"task"==e.type?(this.nodeForm.controls.node_id.setValue(e.id),this.nodeForm.controls.node_label.setValue(e.label),this.graph.clusters.forEach(r=>{var s;null===(s=r.childNodeIds)||void 0===s||s.forEach(g=>{g!=e.id||this.nodeForm.controls.node_cluster.setValue(r.id)})}),e.properties.forEach(r=>{const s=this.formBuilder.group({id:r.id,name:[r.name,[m.kI.required,this.checkNodeProperty()]],value:[r.value,m.kI.required]});this.nodeDataForm.push(s)})):"cond"==e.type&&(this.condForm.controls.cond_id.setValue(e.id),this.condForm.controls.cond_label.setValue(e.label),this.condForm.controls.cond_source.setValue(e.id.split("_")[1].split("-")[0]),this.condForm.controls.cond_target.setValue(e.id.split("_")[1].split("-")[1]),e.properties.forEach(r=>{const s=this.formBuilder.group({id:r.id,name:[r.name,[m.kI.required,this.checkNodeProperty()]],value:r.value});this.condDataForm.push(s)})),this.view="cond"==e.type?"node_cond":"node_task")}selectedEdgeInputChange(e){this.clearEdgeInput(),this.edgeEditing=!0,this.edgeForm.controls.edge_id.setValue(e.id),this.edgeForm.controls.edge_label.setValue(e.label),this.edgeForm.controls.edge_source.setValue(e.source),this.edgeForm.controls.edge_target.setValue(e.target),this.edgeForm.controls.edge_weight.setValue(e.weight),this.view="edge"}selectedClusterInputChange(e){this.clearClusterInput(),this.clusterEditing=!0,this.clusterForm.controls.cluster_id.setValue(e.id),this.clusterForm.controls.cluster_label.setValue(e.label),e.childNodeIds&&e.childNodeIds.forEach(r=>{const s=this.formBuilder.control(r);this.clusterNodes.push(s)}),this.view="cluster"}saveGraph(){this.graphEditingService.saveGraphInStorage(),this.router.navigate(["/app/graph/list"])}start_over(){this.graphEditingService.clearGraph(),this.clearNodeInput(),this.clearCondInput(),this.clearEdgeInput()}changedView(e){switch(this.view=e,this.view){case"node_task":this.clearNodeInput();break;case"node_cond":this.clearCondInput();break;case"edge":this.clearEdgeInput()}this.clearPropsInput()}reload_page(){location.reload()}centerGraph(){this.updateGraphView.emit(2)}fitGraph(){this.updateGraphView.emit(3)}addNodeDataField(){this.nodePropId+=1;const e=this.formBuilder.group({id:String(this.nodePropId),name:[null,[m.kI.required,this.checkNodeProperty()]],value:[null,m.kI.required]});this.nodeDataForm.push(e)}addCondDataField(){this.nodePropId+=1;const e=this.formBuilder.group({id:String(this.nodePropId),name:[null,[m.kI.required,this.checkNodeProperty()]],value:null});this.condDataForm.push(e),this.nodePropForm.reset()}editNodeDataField(e){}removeNodeDataField(e){this.nodeDataForm.removeAt(e)}removeCondDataField(e){this.condDataForm.removeAt(e)}checkNodeId(){return e=>e.value&&!this.nodeEditing&&this.graph.nodes.filter(r=>"task"==r.type).find(r=>r.id==e.value)?{already:!0,msg:"Already exists a node with this id"}:null}checkNodeProperty(){return e=>{if(e.value)if("node_task"==this.view){if(this.nodeForm.controls.node_data.value.find(r=>r.name==e.value)&&e.dirty)return{already:!0,msg:"Already existst a property with this name"}}else if("node_cond"==this.view){if(this.condForm.controls.cond_data.value.find(b=>b.name==e.value)&&e.dirty)return{already:!0,msg:"Already existst a property with this name"};let r=!1,s=this.graphEditingService.getNode(this.condForm.controls.cond_target.value),g=[];return s&&(g=this.graphEditingService.getConds(s)),g.forEach(b=>{b.name!=e.value||(r=!0)}),r?null:{noCondName:!0,msg:"This condition isn't present in any of the targeting task nodes"}}return null}}checkEdgeId(){return e=>{if(e.value){let r=e.value.edge_source,s=e.value.edge_target;if(r&&s){if(r==s)return{loop:!0,msg:"Source and target must be different"};if((this.graph.nodes.find(g=>g.id==s&&"cond"==g.type)||this.graph.clusters.find(g=>g.id==s))&&(this.graph.nodes.find(g=>g.id==r&&"cond"==g.type)||this.graph.clusters.find(g=>g.id==r)))return{cond2cond:!0,msg:"Can't add edge from condition to condition"};{let g="_"+r+"-"+s;if(this.graph.edges.find(b=>b.id==g&&!this.edgeEditing)&&!this.edgeEditing)return{already:!0,msg:"Already existst an edge between these nodes"}}}}return null}}checkEdgeNode(){return e=>!e.value||this.graph.nodes.find(r=>r.id==e.value)||this.graph.clusters.find(r=>r.id==e.value)?null:{notFound:!0}}checkCondNode(){return e=>(this.graph.nodes.find(r=>r.id==e.value&&"cond"==r.type)||this.graph.nodes.find(r=>r.id==e.value))&&this.graph.edges.find(r=>r.target==e.value)&&!this.edgeEditing?{already2cond:!0,msg:"Already exists an edge to that condition"}:null}checkEdgeWeight(){return e=>e.value<1?{weightError:!0,msg:"Edge weight must be at least 1"}:null}checkClusterId(){return e=>{if(e.value&&!this.clusterEditing){if(this.graph.clusters.find(r=>r.id==e.value))return{msg:"Already exists a cluster with this id"};if(this.graph.nodes.find(r=>r.id==e.value))return{msg:"Already exists a node with this id"}}return null}}checkClusterExists(){return e=>e.value&&!this.graph.clusters.find(r=>r.id==e.value)?{clusterNotFound:!0,msg:"Cluster not found"}:null}checkCondNodeTask(){return e=>e.value&&!this.graph.nodes.filter(r=>"task"==r.type).find(r=>r.id==e.value)?{notFound:!0}:null}checkCondForm(){return e=>{if(e.value){let r=e.value.cond_source,s=e.value.cond_target;if(r&&s&&(r=e.value.cond_source,s=e.value.cond_target,r==s))return{loop:!0,msg:"Source and target must be different"}}return null}}checkCondPresent(){return e=>e.value&&0==e.value.length?{noConds:!0,msg:"Must specify at least one condition"}:null}checkNodeConds(){return e=>null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(we),t.Y36(m.qu),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sidebar-edit"]],inputs:{selectedNode:"selectedNode",selectedEdge:"selectedEdge",selectedCluster:"selectedCluster",forcedChange:"forcedChange"},outputs:{updateGraphView:"updateGraphView"},features:[t.TTD],decls:33,vars:9,consts:[[1,"row","mx-3",3,"ngStyle"],[1,"col-12"],[1,"d-flex","align-items-center"],[1,"ms-1","my-3","text-white",2,"overflow-x","auto"],["title","Delete all nodes and edges",1,"btn","btn-sm","align-self-center","btn-danger","ms-auto",3,"click"],[1,"col-12","d-flex","align-items-center"],[1,"my-grey","mt-2"],["name","graph_elements",1,"form-select","my-bg-grey","ms-5",3,"value","change"],["value","graph"],["selected","","value","node_task"],["value","node_cond"],["value","edge"],[1,"d-flex-column","my-grey","mt-4"],[4,"ngIf"],[1,"mt-auto"],[1,"btn","btn-success","w-100",3,"click"],[1,"d-flex","gap-2","my-3","justify-content-evenly"],[1,"btn","btn-sm","btn-secondary",3,"click"],["novalidate","",1,"d-flex-column",3,"formGroup"],["type","text","formControlName","graph_name","placeholder","graph name",1,"form-control","my-2",3,"ngClass","input"],["class","text-danger text-start my-0",4,"ngIf"],["type","text","formControlName","graph_desc","placeholder","graph description",1,"form-control","my-2"],["type","button",1,"mt-2","w-50","btn","btn-primary",3,"ngClass","click"],[1,"text-danger","text-start","my-0"],["type","text","formControlName","node_id","placeholder","node id",1,"form-control","my-2",3,"ngClass","readonly"],["type","text","formControlName","node_label","placeholder","node label",1,"form-control","my-2"],[1,"accordion","text-dark"],[1,"accordion-item"],[1,"accordion-header","px-3","btn","col-12","d-flex","align-items-center",3,"click"],[1,"ms-auto","bg-white",2,"border-width","0"],["src","../../../../../../assets/images/chevron-down.svg","alt","expand",4,"ngIf"],["src","../../../../../../assets/images/chevron-up.svg","alt","collapse",4,"ngIf"],[3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],["formArrayName","node_data"],["class","row pb-2 px-4 align-items-center",3,"formGroupName",4,"ngFor","ngForOf"],["class","row px-4 pb-2 text-center",4,"ngIf"],[1,"col-12","ps-3","pb-3","btn","d-flex","align-items-center",3,"click"],["src","../../../../../../assets/images/plus-dark.svg","alt","add data field"],[1,"m-0","ms-1",2,"color","#666"],[1,"d-flex"],["type","button",1,"mt-2","btn","btn-primary",3,"ngClass","innerText","click"],["class","ms-3 mt-2 btn btn-danger",3,"click",4,"ngIf"],[1,"ms-auto","mt-2","btn","btn-secondary",3,"click"],["src","../../../../../../assets/images/chevron-down.svg","alt","expand"],["src","../../../../../../assets/images/chevron-up.svg","alt","collapse"],[1,"row","pb-2","px-4","align-items-center",3,"formGroupName"],[1,"col-5","p-0","ps-2","pe-1",2,"overflow-x","auto"],["type","text","formControlName","name","placeholder","name",1,"form-control",3,"ngClass"],[1,"col-5","p-0","px-1","ps-2",2,"overflow-x","auto"],["type","text","formControlName","value","placeholder","value",1,"form-control",3,"ngClass"],["class","col-2 p-1 pt-1 btn btn-danger",3,"click",4,"ngIf"],[1,"col-2","p-1","pt-1","btn","btn-danger",3,"click"],["src","../../../../../../assets/images/x-white.svg","alt","delete node property","width","24"],[1,"row","px-4","pb-2","text-center"],[1,"m-0",2,"color","#666"],[1,"ms-3","mt-2","btn","btn-danger",3,"click"],["formControlName","cond_source",1,"form-select","my-bg-grey","my-2",3,"ngClass"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger text-start mt-1",4,"ngIf"],["formControlName","cond_target",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["type","text","formControlName","cond_label","placeholder","cond node label",1,"form-control","my-2"],["formArrayName","cond_data"],["class","text-danger text-start",4,"ngIf"],[3,"value"],[1,"text-danger","text-start","mt-1"],[1,"text-danger","text-start"],["formControlName","edge_source",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["formControlName","edge_target",1,"form-select","my-bg-grey","my-2",3,"ngClass"],["type","text","formControlName","edge_label","placeholder","edge label",1,"form-control","my-2"],[1,"row","my-2","align-items-center"],[1,"m-0","my-grey","col-8"],[1,"col-4"],["type","number","formControlName","edge_weight","placeholder","edge weight",1,"form-control"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return r.start_over()}),t._uU(6,"Start over"),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"h5",6),t._uU(9,"Edit:"),t.qZA(),t.TgZ(10,"select",7),t.NdJ("change",function(g){return r.changedView(g.target.value)}),t.TgZ(11,"option",8),t._uU(12,"Graph"),t.qZA(),t.TgZ(13,"option",9),t._uU(14,"Node task"),t.qZA(),t.TgZ(15,"option",10),t._uU(16,"Node condition"),t.qZA(),t.TgZ(17,"option",11),t._uU(18,"Edge"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",12),t.YNc(20,ac,7,8,"div",13),t.YNc(21,mc,27,18,"div",13),t.YNc(22,Fc,36,29,"div",13),t.YNc(23,Hc,25,24,"div",13),t.qZA(),t.qZA(),t.TgZ(24,"div",14),t.TgZ(25,"div",1),t.TgZ(26,"button",15),t.NdJ("click",function(){return r.saveGraph()}),t._uU(27,"Save Graph"),t.qZA(),t.qZA(),t.TgZ(28,"div",16),t.TgZ(29,"button",17),t.NdJ("click",function(){return r.centerGraph()}),t._uU(30,"Center graph"),t.qZA(),t.TgZ(31,"button",17),t.NdJ("click",function(){return r.fitGraph()}),t._uU(32,"Zoom to fit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(7,Qc,r.getSidebarHeight())),t.xp6(4),t.Oqu(r.graphEditingService.graph.name),t.xp6(6),t.Q6J("value",r.view),t.xp6(10),t.Q6J("ngIf","graph"==r.view),t.xp6(1),t.Q6J("ngIf","node_task"==r.view),t.xp6(1),t.Q6J("ngIf","node_cond"==r.view),t.xp6(1),t.Q6J("ngIf","edge"==r.view))},directives:[c.PC,m.YN,m.Kr,c.O5,m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,c.mk,h._D,m.CE,c.sg,m.x0,m.EJ,m.wV],styles:[""]}),n})();function jc(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",13),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?40:30+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",40+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function Xc(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,jc,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function Wc(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Xc,2,1,"g",7),t._UZ(2,"rect",8),t._UZ(3,"rect",9),t.TgZ(4,"text",10),t._uU(5),t.qZA(),t.TgZ(6,"text",11),t._uU(7),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.showNodeDetails==e.id),t.xp6(4),t.Oqu(e.id),t.xp6(2),t.hij("props: ",r.Object.entries(e.properties).length,"")}}function Kc(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"rect",17),t.TgZ(2,"text",14),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=i.index;t.xp6(1),t.uIk("y",0==r?60:50+30*(r+1))("height",0==r?70:50),t.xp6(1),t.uIk("y",60+35*(r+1)),t.xp6(1),t.AsE("",e.name,": ",e.value,"")}}function qc(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t.YNc(1,Kc,4,5,"g",12),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.properties)}}function td(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",15),t.TgZ(2,"text",16),t._uU(3,"AND"),t.qZA(),t.YNc(4,qc,2,1,"g",7),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.uIk("width",1e3),t.xp6(3),t.Q6J("ngIf",r.showNodeDetails==e.id)}}function ed(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"g"),t._UZ(1,"circle",18),t.TgZ(2,"text",19),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",1e3),t.xp6(2),t.hij(" ","cin"==e.id.split("_")[0]?"IN":"OUT"," ")}}function nd(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",6),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().nodeClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreNodeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreNodeDetails(0)}),t.YNc(1,Wc,8,3,"g",7),t.YNc(2,td,5,2,"g",7),t.YNc(3,ed,4,2,"g",7),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf","task"==e.type),t.xp6(1),t.Q6J("ngIf","cond"==e.type),t.xp6(1),t.Q6J("ngIf","clus"==e.type)}}function rd(n,i){if(1&n&&(t.O4$(),t.TgZ(0,"text",24),t.TgZ(1,"textPath",25),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Udp("dominant-baseline",e.dominantBaseline),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.weight," ")}}const id=function(n,i){return{"edge-success":n,"edge-insuccess":i}};function od(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",20),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().linkClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreEdgeDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreEdgeDetails(0)}),t._UZ(1,"circle",21),t._UZ(2,"path",22),t.YNc(3,rd,3,4,"text",23),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(2,id,2==r.checkConditions(e),1==r.checkConditions(e))),t.xp6(1),t.Q6J("ngIf",r.showEdgeDetails==e.id)}}function sd(n,i){1&n&&(t.O4$(),t.TgZ(0,"marker",26),t._UZ(1,"path",27),t.qZA())}function ad(n,i){1&n&&(t.O4$(),t._UZ(0,"g"))}function ud(n,i){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",28),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().clusterClick(g)})("mouseenter",function(){const g=t.CHM(e).$implicit;return t.oxw().moreClusterDetails(g.id)})("mouseleave",function(){return t.CHM(e),t.oxw().moreClusterDetails(0)}),t._UZ(1,"rect",29),t.TgZ(2,"text",30),t._uU(3,"OR"),t.qZA(),t.YNc(4,ad,1,0,"g",7),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height),t.xp6(3),t.Q6J("ngIf",r.showClusterDetails==e.id)}}const ld=function(n){return{height:n}};let cd=(()=>{class n{constructor(e){this.graphEditingService=e,this.nodes=[],this.edges=[],this.clusters=[],this.update=0,this.update$=new Ht.xQ,this.center$=new Ht.xQ,this.zoomToFit$=new Ht.xQ,this.selectedNode=new t.vpe,this.selectedEdge=new t.vpe,this.Object=Object,this.showNodeDetails=0,this.showEdgeDetails=0,this.showClusterDetails=0,this.layout=new tn,this.graphEditingService.graph$.subscribe(r=>{r&&this.updateGraph()})}ngOnInit(){}ngOnChanges(e){switch(this.update){case 1:break;case 2:this.center$.next(!0);break;case 3:this.zoomToFit$.next(!0)}}getContentHeight(){var e;const r=(null===(e=document.getElementsByTagName("app-header")[0].firstElementChild)||void 0===e?void 0:e.clientHeight)||67;return((window.innerHeight||290)-r).toString()+"px"}updateGraph(){this.nodes=this.graphEditingService.graph.nodes,this.edges=this.graphEditingService.graph.edges,this.clusters=this.graphEditingService.graph.clusters,this.update$.next(!0)}onNodeSelect(e){}linkClick(e){this.selectedEdge.emit(e)}nodeClick(e){this.selectedNode.emit(e)}clusterClick(e){}moreNodeDetails(e){this.showNodeDetails=e}moreEdgeDetails(e){this.showEdgeDetails=e}moreClusterDetails(e){this.showClusterDetails=e}checkClusterConditions(e,r){let s=[];e.childNodeIds&&(s=e.childNodeIds.filter(b=>"c"==b.split("_")[0]).map(b=>this.graphEditingService.getNode(b)));let g=!1;return s.forEach(b=>{this.checkAllProps(b,r)&&(g=!0)}),g}checkConditions(e){const r=this.nodes.find(g=>g.id==e.source),s=this.nodes.find(g=>g.id==e.target);if(s&&"task"==s.type&&r&&"clus"==r.type){let g=this.clusters.find(b=>b.id=="clus_"+r.id.split("_")[1]);return g&&this.checkClusterConditions(g,s)?2:1}if(s&&"clus"==s.type&&r&&"cond"==r.type){let g=this.nodes.find(b=>b.id==r.id.split("_")[1].split("-")[1]);return g&&this.checkAllProps(r,g)?2:1}return 0}checkAllProps(e,r){const s=Object.entries(e.properties).map(w=>w[1]),g=Object.entries(r.properties).map(w=>w[1]);let b=!0;return s.forEach(w=>{if(""==w.value||null==w.value){if(!g.find(S=>S.name==w.name))return void(b=!1)}else if(!g.find(F=>F.name==w.name&&F.value==w.value))return void(b=!1)}),b}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(we))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-graph-view-edit"]],inputs:{update:"update"},outputs:{selectedNode:"selectedNode",selectedEdge:"selectedEdge"},features:[t.TTD],decls:10,vars:10,consts:[[3,"ngStyle"],[1,"chart-container",3,"update$","center$","zoomToFit$","nodes","links","clusters","layout"],["nodeTemplate",""],["linkTemplate",""],["defsTemplate",""],["clusterTemplate",""],["xmlns","http://www.w3.org/2000/svg",3,"click","mouseenter","mouseleave"],[4,"ngIf"],["x","0","y","10","width","100","height","50","rx","10","fill","#a22"],["x","0","y","0","width","100","height","30","rx","10","fill","#811"],["x","20","y","20","font-size","16","fill","#fff"],["x","10","y","50","font-size","16","fill","#fff"],[4,"ngFor","ngForOf"],["x","0","width","100","rx","10","fill","#a22"],["x","10","font-size","16","fill","#fff"],["cx","30","cy","25","r","25","fill","#118"],["x","16","y","30","font-size","14","fill","#fff"],["x","0","width","100","rx","10","fill","#118"],["cx","22","cy","17","r","17","fill","#ccc"],["x","11","y","23","font-size","14","fill","#000"],[1,"edge",3,"click","mouseenter","mouseleave"],["width","15","height","15","fill","#000"],["stroke-width","5","marker-end","url(#arrow)",1,"line",3,"ngClass"],["class","edge-label","text-anchor","middle",4,"ngIf"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path",2,"font-size","20px"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node","cluster",3,"click","mouseenter","mouseleave"],["x","10","y","10","rx","5","ry","5","stroke","#000","stroke-width","5","fill","#0005"],["x","20","y","30","font-size","16","fill","#000"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"ngx-graph",1),t.YNc(2,nd,4,3,"ng-template",null,2,t.W1O),t.YNc(4,od,4,5,"ng-template",null,3,t.W1O),t.YNc(6,sd,2,0,"ng-template",null,4,t.W1O),t.YNc(8,ud,5,3,"ng-template",null,5,t.W1O),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(8,ld,r.getContentHeight())),t.xp6(1),t.Q6J("update$",r.update$)("center$",r.center$)("zoomToFit$",r.zoomToFit$)("nodes",r.nodes)("links",r.edges)("clusters",r.clusters)("layout",r.layout))},directives:[c.PC,In,c.O5,c.sg,c.mk],styles:[".edge-success[_ngcontent-%COMP%]{stroke:#393}.edge-insuccess[_ngcontent-%COMP%]{stroke:#a33}.cluster-success[_ngcontent-%COMP%]{stroke:#0f0}.cluster-insuccess[_ngcontent-%COMP%]{stroke:red}"]}),n})();const dd=[{path:"graph",component:Ru,children:[{path:"list",component:ic},{path:"create",component:ql,data:{footer:!1}},{path:"view/:graph_id",component:Du},{path:"edit/:graph_id",component:(()=>{class n{constructor(e,r){this.activatedRoute=e,this.graphEditingService=r,this.graph_switch=0,this.sidebar_switch=0,this.graph_id=0}ngOnInit(){this.graph_id=this.activatedRoute.snapshot.params.graph_id,this.graphEditingService.loadGraph(this.graph_id-1),this.switcher(1)}switcher(e){this.graph_switch=e,setTimeout(()=>{this.graph_switch=0},100)}nodeIsSelected(e){this.selectedNode=e,this.sidebar_switch=1,setTimeout(()=>{this.sidebar_switch=0},100)}edgeIsSelected(e){this.selectedEdge=e,this.sidebar_switch=2,setTimeout(()=>{this.sidebar_switch=0},100)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(we))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-workspace"]],decls:5,vars:4,consts:[[1,"row","m-0"],[1,"col-4","bg-dark"],[3,"selectedNode","selectedEdge","forcedChange","updateGraphView"],[1,"col-8",2,"padding","0"],[3,"update","selectedEdge","selectedNode"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-sidebar-edit",2),t.NdJ("updateGraphView",function(g){return r.switcher(g)}),t.qZA(),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"app-graph-view-edit",4),t.NdJ("selectedEdge",function(g){return r.edgeIsSelected(g)})("selectedNode",function(g){return r.nodeIsSelected(g)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("selectedNode",r.selectedNode)("selectedEdge",r.selectedEdge)("forcedChange",r.sidebar_switch),t.xp6(2),t.Q6J("update",r.graph_switch))},directives:[zc,cd],styles:[""]}),n})()},{path:"",redirectTo:"list"}]},{path:"",redirectTo:"graph"}];let hd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(dd)],u.Bz]}),n})(),fd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,hd,u.Bz,bu,h.IJ]]}),n})()}}]);